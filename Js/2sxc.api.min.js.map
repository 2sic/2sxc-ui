{"version":3,"sources":["2sxc.api.min.js"],"names":["__extends","this","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","ToSic","Sxc","SxcController","id","cbid","$2sxc","window","_controllers","idTuple","autoFind","cacheKey","_data","SxcInstanceWithInternals","$","ServicesFramework","buildSxcController","url","UrlParamManager","debug","load","get","uncache","addOn","sysinfo","version","description","beta","totalPopup","TotalPopup","urlParams","parts","getUrl","preventUnmin","r","replace","indexOf","property","domElement","containerTag","closest","iid","getAttribute","SxcDataWithInternals","controller","source","undefined","List","sourceUrl","params","resolveServiceUrl","_this","data","origSuccess","success","dataSetName","name","Default","isLoaded","lastRefresh","Date","_triggerLoaded","error","request","alert","statusText","preventAutoFail","reload","webApi","then","on","events","callback","bind","trigger","one","SxcInstance","dnnSf","serviceScopes","serviceRoot","getServiceRoot","SxcWebApiWithInternals","virtualPath","scope","split","toLowerCase","substring","showDetailedHttpError","result","console","log","status","config","infoText","srvResp","responseText","JSON","parse","msg","Message","msgDet","MessageDetail","ExceptionMessage","SxcInstanceWithEditing","_super","call","manage","_manage","initInstance","e","_translateInit","isEditMode","_isEditMode","recreate","resetCache","frame","open","z","top","parent","wrapper","document","createElement","setAttribute","body","appendChild","ifrm","className","close","frm","parentNode","removeChild","closeThis","strResult","searchRx","RegExp","results","exec","location","search","hashRx","hash","matches","pathname","match","length","reverse","decodeURIComponent","require","found","message","settingsOrUrl","post","put","settings","method","controllerAction","controllerName","actionName","action","defaults","extend","sf","promise","ajax","type","dataType","async","stringify","contentType","getActionUrl","beforeSend","xhr","setRequestHeader","setModuleHeaders","fail","base","param"],"mappings":"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","file":"2sxc.api.min.js","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar ToSic;\r\n(function (ToSic) {\r\n    var Sxc;\r\n    (function (Sxc) {\r\n        function SxcController(id, cbid) {\r\n            var $2sxc = window.$2sxc;\r\n            if (!$2sxc._controllers)\r\n                throw \"$2sxc not initialized yet\";\r\n            if (typeof id === \"object\") {\r\n                var idTuple = autoFind(id);\r\n                id = idTuple[0];\r\n                cbid = idTuple[1];\r\n            }\r\n            if (!cbid)\r\n                cbid = id;\r\n            var cacheKey = id + \":\" + cbid;\r\n            if ($2sxc._controllers[cacheKey])\r\n                return $2sxc._controllers[cacheKey];\r\n            if (!$2sxc._data[cacheKey])\r\n                $2sxc._data[cacheKey] = {};\r\n            return ($2sxc._controllers[cacheKey] = new Sxc.SxcInstanceWithInternals(id, cbid, cacheKey, $2sxc, $.ServicesFramework));\r\n        }\r\n        function buildSxcController() {\r\n            var url = new Sxc.UrlParamManager();\r\n            var debug = {\r\n                load: (url.get(\"debug\") === \"true\"),\r\n                uncache: url.get(\"sxcver\")\r\n            };\r\n            var addOn = {\r\n                _controllers: {},\r\n                sysinfo: {\r\n                    version: \"09.05.02\",\r\n                    description: \"The 2sxc Controller object - read more about it on 2sxc.org\"\r\n                },\r\n                beta: {},\r\n                _data: {},\r\n                totalPopup: new Sxc.TotalPopup(),\r\n                urlParams: url,\r\n                debug: debug,\r\n                parts: {\r\n                    getUrl: function (url, preventUnmin) {\r\n                        var r = (preventUnmin || !debug.load) ? url : url.replace(\".min\", \"\");\r\n                        if (debug.uncache && r.indexOf(\"sxcver\") === -1)\r\n                            r = r + ((r.indexOf(\"?\") === -1) ? \"?\" : \"&\") + \"sxcver=\" + debug.uncache;\r\n                        return r;\r\n                    }\r\n                },\r\n            };\r\n            for (var property in addOn)\r\n                if (addOn.hasOwnProperty(property))\r\n                    SxcController[property] = addOn[property];\r\n            return SxcController;\r\n        }\r\n        Sxc.buildSxcController = buildSxcController;\r\n        function autoFind(domElement) {\r\n            var containerTag = $(domElement).closest(\".sc-content-block\")[0];\r\n            if (!containerTag)\r\n                return null;\r\n            var iid = containerTag.getAttribute(\"data-cb-instance\"), cbid = containerTag.getAttribute(\"data-cb-id\");\r\n            if (!iid || !cbid)\r\n                return null;\r\n            return [iid, cbid];\r\n        }\r\n    })(Sxc = ToSic.Sxc || (ToSic.Sxc = {}));\r\n})(ToSic || (ToSic = {}));\r\nvar ToSic;\r\n(function (ToSic) {\r\n    var Sxc;\r\n    (function (Sxc) {\r\n        var SxcDataWithInternals = (function () {\r\n            function SxcDataWithInternals(controller) {\r\n                this.controller = controller;\r\n                this.source = undefined;\r\n                this[\"in\"] = {};\r\n                this.List = [];\r\n            }\r\n            SxcDataWithInternals.prototype.sourceUrl = function (params) {\r\n                var url = this.controller.resolveServiceUrl(\"app-sys/appcontent/GetContentBlockData\");\r\n                if (typeof params == \"string\")\r\n                    url += \"&\" + params;\r\n                return url;\r\n            };\r\n            SxcDataWithInternals.prototype.load = function (source) {\r\n                var _this = this;\r\n                if (source && source.List) {\r\n                    return this.controller.data;\r\n                }\r\n                else {\r\n                    if (!source)\r\n                        source = {};\r\n                    if (!source.url)\r\n                        source.url = this.controller.data.sourceUrl();\r\n                    source.origSuccess = source.success;\r\n                    source.success = function (data) {\r\n                        for (var dataSetName in data) {\r\n                            if (data.hasOwnProperty(dataSetName))\r\n                                if (data[dataSetName].List !== null) {\r\n                                    _this.controller.data[\"in\"][dataSetName] = data[dataSetName];\r\n                                    _this.controller.data[\"in\"][dataSetName].name = dataSetName;\r\n                                }\r\n                        }\r\n                        if (_this.controller.data[\"in\"].Default)\r\n                            _this.List = _this[\"in\"].Default.List;\r\n                        if (source.origSuccess)\r\n                            source.origSuccess(_this);\r\n                        _this.controller.isLoaded = true;\r\n                        _this.controller.lastRefresh = new Date();\r\n                        _this._triggerLoaded();\r\n                    };\r\n                    source.error = function (request) { alert(request.statusText); };\r\n                    source.preventAutoFail = true;\r\n                    this.source = source;\r\n                    return this.reload();\r\n                }\r\n            };\r\n            SxcDataWithInternals.prototype.reload = function () {\r\n                this.controller.webApi.get(this.source)\r\n                    .then(this.source.success, this.source.error);\r\n                return this;\r\n            };\r\n            SxcDataWithInternals.prototype.on = function (events, callback) {\r\n                return $(this).bind(\"2scLoad\", callback)[0]._triggerLoaded();\r\n            };\r\n            SxcDataWithInternals.prototype._triggerLoaded = function () {\r\n                return this.controller.isLoaded\r\n                    ? $(this).trigger(\"2scLoad\", [this])[0]\r\n                    : this;\r\n            };\r\n            SxcDataWithInternals.prototype.one = function (events, callback) {\r\n                if (!this.controller.isLoaded)\r\n                    return $(this).one(\"2scLoad\", callback)[0];\r\n                callback({}, this);\r\n                return this;\r\n            };\r\n            return SxcDataWithInternals;\r\n        }());\r\n        Sxc.SxcDataWithInternals = SxcDataWithInternals;\r\n    })(Sxc = ToSic.Sxc || (ToSic.Sxc = {}));\r\n})(ToSic || (ToSic = {}));\r\nvar ToSic;\r\n(function (ToSic) {\r\n    var Sxc;\r\n    (function (Sxc) {\r\n        var SxcInstance = (function () {\r\n            function SxcInstance(id, cbid, dnnSf) {\r\n                this.id = id;\r\n                this.cbid = cbid;\r\n                this.dnnSf = dnnSf;\r\n                this.serviceScopes = [\"app\", \"app-sys\", \"app-api\", \"app-query\", \"app-content\", \"eav\", \"view\", \"dnn\"];\r\n                this.serviceRoot = dnnSf(id).getServiceRoot(\"2sxc\");\r\n                this.webApi = new Sxc.SxcWebApiWithInternals(this, id, cbid);\r\n            }\r\n            SxcInstance.prototype.resolveServiceUrl = function (virtualPath) {\r\n                var scope = virtualPath.split(\"/\")[0].toLowerCase();\r\n                if (this.serviceScopes.indexOf(scope) === -1)\r\n                    return virtualPath;\r\n                return this.serviceRoot + scope + \"/\" + virtualPath.substring(virtualPath.indexOf(\"/\") + 1);\r\n            };\r\n            SxcInstance.prototype.showDetailedHttpError = function (result) {\r\n                if (window.console)\r\n                    console.log(result);\r\n                if (result.status === 404 &&\r\n                    result.config &&\r\n                    result.config.url &&\r\n                    result.config.url.indexOf(\"/dist/i18n/\") > -1) {\r\n                    if (window.console)\r\n                        console.log(\"just fyi: failed to load language resource; will have to use default\");\r\n                    return result;\r\n                }\r\n                if (result.status === 0 || result.status === -1)\r\n                    return result;\r\n                var infoText = \"Had an error talking to the server (status \" + result.status + \").\";\r\n                var srvResp = result.responseText\r\n                    ? JSON.parse(result.responseText)\r\n                    : result.data;\r\n                if (srvResp) {\r\n                    var msg = srvResp.Message;\r\n                    if (msg)\r\n                        infoText += \"\\nMessage: \" + msg;\r\n                    var msgDet = srvResp.MessageDetail || srvResp.ExceptionMessage;\r\n                    if (msgDet)\r\n                        infoText += \"\\nDetail: \" + msgDet;\r\n                    if (msgDet && msgDet.indexOf(\"No action was found\") === 0)\r\n                        if (msgDet.indexOf(\"that matches the name\") > 0)\r\n                            infoText += \"\\n\\nTip from 2sxc: you probably got the action-name wrong in your JS.\";\r\n                        else if (msgDet.indexOf(\"that matches the request.\") > 0)\r\n                            infoText += \"\\n\\nTip from 2sxc: Seems like the parameters are the wrong amount or type.\";\r\n                    if (msg && msg.indexOf(\"Controller\") === 0 && msg.indexOf(\"not found\") > 0)\r\n                        infoText +=\r\n                            \"\\n\\nTip from 2sxc: you probably spelled the controller name wrong or forgot to remove the word 'controller' from the call in JS. To call a controller called 'DemoController' only use 'Demo'.\";\r\n                }\r\n                infoText += \"\\n\\nif you are an advanced user you can learn more about what went wrong - discover how on 2sxc.org/help?tag=debug\";\r\n                alert(infoText);\r\n                return result;\r\n            };\r\n            return SxcInstance;\r\n        }());\r\n        Sxc.SxcInstance = SxcInstance;\r\n        var SxcInstanceWithEditing = (function (_super) {\r\n            __extends(SxcInstanceWithEditing, _super);\r\n            function SxcInstanceWithEditing(id, cbid, $2sxc, dnnSf) {\r\n                var _this = _super.call(this, id, cbid, dnnSf) || this;\r\n                _this.id = id;\r\n                _this.cbid = cbid;\r\n                _this.$2sxc = $2sxc;\r\n                _this.dnnSf = dnnSf;\r\n                _this.manage = null;\r\n                try {\r\n                    if ($2sxc._manage)\r\n                        $2sxc._manage.initInstance(_this);\r\n                }\r\n                catch (e) {\r\n                    throw e;\r\n                }\r\n                if ($2sxc._translateInit && _this.manage)\r\n                    $2sxc._translateInit(_this.manage);\r\n                return _this;\r\n            }\r\n            SxcInstanceWithEditing.prototype.isEditMode = function () {\r\n                return this.manage && this.manage._isEditMode();\r\n            };\r\n            return SxcInstanceWithEditing;\r\n        }(SxcInstance));\r\n        Sxc.SxcInstanceWithEditing = SxcInstanceWithEditing;\r\n        var SxcInstanceWithInternals = (function (_super) {\r\n            __extends(SxcInstanceWithInternals, _super);\r\n            function SxcInstanceWithInternals(id, cbid, cacheKey, $2sxc, dnnSf) {\r\n                var _this = _super.call(this, id, cbid, $2sxc, dnnSf) || this;\r\n                _this.id = id;\r\n                _this.cbid = cbid;\r\n                _this.cacheKey = cacheKey;\r\n                _this.$2sxc = $2sxc;\r\n                _this.dnnSf = dnnSf;\r\n                _this.source = null;\r\n                _this.isLoaded = false;\r\n                _this.lastRefresh = null;\r\n                _this.data = new Sxc.SxcDataWithInternals(_this);\r\n                return _this;\r\n            }\r\n            SxcInstanceWithInternals.prototype.recreate = function (resetCache) {\r\n                if (resetCache)\r\n                    delete this.$2sxc._controllers[this.cacheKey];\r\n                return this.$2sxc(this.id, this.cbid);\r\n            };\r\n            return SxcInstanceWithInternals;\r\n        }(SxcInstanceWithEditing));\r\n        Sxc.SxcInstanceWithInternals = SxcInstanceWithInternals;\r\n    })(Sxc = ToSic.Sxc || (ToSic.Sxc = {}));\r\n})(ToSic || (ToSic = {}));\r\nvar ToSic;\r\n(function (ToSic) {\r\n    var Sxc;\r\n    (function (Sxc) {\r\n        var TotalPopup = (function () {\r\n            function TotalPopup() {\r\n                this.frame = undefined;\r\n                this.callback = undefined;\r\n            }\r\n            TotalPopup.prototype.open = function (url, callback) {\r\n                var z = 10000010, p = window;\r\n                while (p !== window.top && z < 10000100) {\r\n                    z++;\r\n                    p = p.parent;\r\n                }\r\n                var wrapper = document.createElement(\"div\");\r\n                wrapper.setAttribute(\"style\", \" top: 0;left: 0;width: 100%;height: 100%; position:fixed; z-index:\" + z);\r\n                document.body.appendChild(wrapper);\r\n                var ifrm = document.createElement(\"iframe\");\r\n                ifrm.setAttribute(\"allowtransparency\", \"true\");\r\n                ifrm.setAttribute(\"style\", \"top: 0;left: 0;width: 100%;height: 100%;\");\r\n                ifrm.setAttribute(\"src\", url);\r\n                wrapper.appendChild(ifrm);\r\n                document.body.className += \" sxc-popup-open\";\r\n                this.frame = ifrm;\r\n                this.callback = callback;\r\n            };\r\n            TotalPopup.prototype.close = function () {\r\n                if (this.frame) {\r\n                    document.body.className = document.body.className.replace(\"sxc-popup-open\", \"\");\r\n                    var frm = this.frame;\r\n                    frm.parentNode.parentNode.removeChild(frm.parentNode);\r\n                    this.callback();\r\n                }\r\n            };\r\n            TotalPopup.prototype.closeThis = function () {\r\n                window.parent.$2sxc.totalPopup.close();\r\n            };\r\n            return TotalPopup;\r\n        }());\r\n        Sxc.TotalPopup = TotalPopup;\r\n    })(Sxc = ToSic.Sxc || (ToSic.Sxc = {}));\r\n})(ToSic || (ToSic = {}));\r\nvar ToSic;\r\n(function (ToSic) {\r\n    var Sxc;\r\n    (function (Sxc) {\r\n        var UrlParamManager = (function () {\r\n            function UrlParamManager() {\r\n            }\r\n            UrlParamManager.prototype.get = function (name) {\r\n                name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n                var searchRx = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\", \"i\");\r\n                var results = searchRx.exec(location.search), strResult;\r\n                if (results === null) {\r\n                    var hashRx = new RegExp(\"[#&]\" + name + \"=([^&#]*)\", \"i\");\r\n                    results = hashRx.exec(location.hash);\r\n                }\r\n                if (results === null) {\r\n                    var matches = window.location.pathname.match(new RegExp(\"/\" + name + \"/([^/]+)\", \"i\"));\r\n                    if (matches && matches.length > 1)\r\n                        strResult = matches.reverse()[0];\r\n                }\r\n                else\r\n                    strResult = results[1];\r\n                return strResult === null || strResult === undefined ? \"\" : decodeURIComponent(strResult.replace(/\\+/g, \" \"));\r\n            };\r\n            UrlParamManager.prototype.require = function (name) {\r\n                var found = this.get(name);\r\n                if (found === \"\") {\r\n                    var message = \"Required parameter (\" + name + \") missing from url - cannot continue\";\r\n                    alert(message);\r\n                    throw message;\r\n                }\r\n                return found;\r\n            };\r\n            return UrlParamManager;\r\n        }());\r\n        Sxc.UrlParamManager = UrlParamManager;\r\n    })(Sxc = ToSic.Sxc || (ToSic.Sxc = {}));\r\n})(ToSic || (ToSic = {}));\r\nvar ToSic;\r\n(function (ToSic) {\r\n    var Sxc;\r\n    (function (Sxc) {\r\n        var SxcWebApiWithInternals = (function () {\r\n            function SxcWebApiWithInternals(controller, id, cbid) {\r\n                this.controller = controller;\r\n                this.id = id;\r\n                this.cbid = cbid;\r\n            }\r\n            SxcWebApiWithInternals.prototype.get = function (settingsOrUrl, params, data, preventAutoFail) {\r\n                return this.request(settingsOrUrl, params, data, preventAutoFail, \"GET\");\r\n            };\r\n            SxcWebApiWithInternals.prototype.post = function (settingsOrUrl, params, data, preventAutoFail) {\r\n                return this.request(settingsOrUrl, params, data, preventAutoFail, \"POST\");\r\n            };\r\n            SxcWebApiWithInternals.prototype.delete = function (settingsOrUrl, params, data, preventAutoFail) {\r\n                return this.request(settingsOrUrl, params, data, preventAutoFail, \"DELETE\");\r\n            };\r\n            SxcWebApiWithInternals.prototype.put = function (settingsOrUrl, params, data, preventAutoFail) {\r\n                return this.request(settingsOrUrl, params, data, preventAutoFail, \"PUT\");\r\n            };\r\n            SxcWebApiWithInternals.prototype.request = function (settings, params, data, preventAutoFail, method) {\r\n                if (typeof params != \"object\" && typeof params != \"undefined\")\r\n                    params = { id: params };\r\n                if (typeof settings == \"string\") {\r\n                    var controllerAction = settings.split(\"/\");\r\n                    var controllerName = controllerAction[0];\r\n                    var actionName = controllerAction[1];\r\n                    if (controllerName === \"\" || actionName === \"\")\r\n                        alert(\"Error: controller or action not defined. Will continue with likely errors.\");\r\n                    settings = {\r\n                        controller: controllerName,\r\n                        action: actionName,\r\n                        params: params,\r\n                        data: data,\r\n                        url: controllerAction.length > 2 ? settings : null,\r\n                        preventAutoFail: preventAutoFail\r\n                    };\r\n                }\r\n                var defaults = {\r\n                    method: method === null ? \"POST\" : method,\r\n                    params: null,\r\n                    preventAutoFail: false\r\n                };\r\n                settings = $.extend({}, defaults, settings);\r\n                var sf = $.ServicesFramework(this.id);\r\n                var promise = $.ajax({\r\n                    type: settings.method,\r\n                    dataType: settings.dataType || \"json\",\r\n                    async: true,\r\n                    data: JSON.stringify(settings.data),\r\n                    contentType: \"application/json\",\r\n                    url: this.getActionUrl(settings),\r\n                    beforeSend: function (xhr) {\r\n                        xhr.setRequestHeader(\"ContentBlockId\", this.cbid);\r\n                        sf.setModuleHeaders(xhr);\r\n                    }\r\n                });\r\n                if (!settings.preventAutoFail)\r\n                    promise.fail(this.controller.showDetailedHttpError);\r\n                return promise;\r\n            };\r\n            SxcWebApiWithInternals.prototype.getActionUrl = function (settings) {\r\n                var sf = $.ServicesFramework(this.id);\r\n                var base = (settings.url)\r\n                    ? this.controller.resolveServiceUrl(settings.url)\r\n                    : sf.getServiceRoot(\"2sxc\") + \"app/auto/api/\" + settings.controller + \"/\" + settings.action;\r\n                return base + (settings.params === null ? \"\" : (\"?\" + $.param(settings.params)));\r\n            };\r\n            return SxcWebApiWithInternals;\r\n        }());\r\n        Sxc.SxcWebApiWithInternals = SxcWebApiWithInternals;\r\n    })(Sxc = ToSic.Sxc || (ToSic.Sxc = {}));\r\n})(ToSic || (ToSic = {}));\r\nif (!window.$2sxc)\r\n    window.$2sxc = ToSic.Sxc.buildSxcController();\r\n//# sourceMappingURL=2sxc.api.js.map"],"sourceRoot":"/source/"}