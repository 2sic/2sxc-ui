{"version":3,"sources":["2sxc.api.min.js"],"names":["__extends","this","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","ToSic","Sxc","SxcWebApiWithInternals","controller","id","cbid","get","settingsOrUrl","params","data","preventAutoFail","request","post","put","settings","method","controllerAction","split","controllerName","actionName","alert","action","url","length","defaults","$","extend","sf","ServicesFramework","promise","ajax","type","dataType","async","JSON","stringify","contentType","getActionUrl","beforeSend","xhr","setRequestHeader","setModuleHeaders","fail","showDetailedHttpError","base","resolveServiceUrl","getServiceRoot","param","SxcDataWithInternals","source","undefined","List","sourceUrl","load","_this","origSuccess","success","dataSetName","name","Default","isLoaded","lastRefresh","Date","_triggerLoaded","error","statusText","reload","webApi","then","on","events","callback","bind","trigger","one","SxcInstance","dnnSf","serviceScopes","serviceRoot","virtualPath","scope","toLowerCase","indexOf","substring","result","window","console","log","status","config","infoText","srvResp","responseText","parse","msg","Message","msgDet","MessageDetail","ExceptionMessage","SxcInstanceWithEditing","_super","$2sxc","call","manage","_manage","initInstance","e","_translateInit","isEditMode","_isEditMode","SxcInstanceWithInternals","cacheKey","recreate","resetCache","_controllers","SxcController","idTuple","autoFind","_data","buildSxcController","UrlParamManager","debug","uncache","addOn","sysinfo","version","description","beta","totalPopup","TotalPopup","urlParams","parts","getUrl","preventUnmin","r","replace","property","domElement","containerTag","closest","iid","getAttribute","frame","open","z","top","parent","wrapper","document","createElement","setAttribute","body","appendChild","ifrm","className","close","frm","parentNode","removeChild","closeThis","strResult","searchRx","RegExp","results","exec","location","search","hashRx","hash","matches","pathname","match","reverse","decodeURIComponent","require","found","message"],"mappings":"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","file":"2sxc.api.min.js","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar ToSic;\r\n(function (ToSic) {\r\n    var Sxc;\r\n    (function (Sxc) {\r\n        var SxcWebApiWithInternals = (function () {\r\n            function SxcWebApiWithInternals(controller, id, cbid) {\r\n                this.controller = controller;\r\n                this.id = id;\r\n                this.cbid = cbid;\r\n            }\r\n            SxcWebApiWithInternals.prototype.get = function (settingsOrUrl, params, data, preventAutoFail) {\r\n                this.request(settingsOrUrl, params, data, preventAutoFail, \"GET\");\r\n            };\r\n            ;\r\n            SxcWebApiWithInternals.prototype.post = function (settingsOrUrl, params, data, preventAutoFail) {\r\n                this.request(settingsOrUrl, params, data, preventAutoFail, \"POST\");\r\n            };\r\n            ;\r\n            SxcWebApiWithInternals.prototype.delete = function (settingsOrUrl, params, data, preventAutoFail) {\r\n                this.request(settingsOrUrl, params, data, preventAutoFail, \"DELETE\");\r\n            };\r\n            ;\r\n            SxcWebApiWithInternals.prototype.put = function (settingsOrUrl, params, data, preventAutoFail) {\r\n                this.request(settingsOrUrl, params, data, preventAutoFail, \"PUT\");\r\n            };\r\n            ;\r\n            SxcWebApiWithInternals.prototype.request = function (settings, params, data, preventAutoFail, method) {\r\n                if (typeof params != \"object\" && typeof params != \"undefined\")\r\n                    params = { id: params };\r\n                if (typeof settings == \"string\") {\r\n                    var controllerAction = settings.split(\"/\");\r\n                    var controllerName = controllerAction[0];\r\n                    var actionName = controllerAction[1];\r\n                    if (controllerName === \"\" || actionName === \"\")\r\n                        alert(\"Error: controller or action not defined. Will continue with likely errors.\");\r\n                    settings = {\r\n                        controller: controllerName,\r\n                        action: actionName,\r\n                        params: params,\r\n                        data: data,\r\n                        url: controllerAction.length > 2 ? settings : null,\r\n                        preventAutoFail: preventAutoFail\r\n                    };\r\n                }\r\n                var defaults = {\r\n                    method: method === null ? \"POST\" : method,\r\n                    params: null,\r\n                    preventAutoFail: false\r\n                };\r\n                settings = $.extend({}, defaults, settings);\r\n                var sf = $.ServicesFramework(this.id);\r\n                var promise = $.ajax({\r\n                    type: settings.method,\r\n                    dataType: settings.dataType || \"json\",\r\n                    async: true,\r\n                    data: JSON.stringify(settings.data),\r\n                    contentType: \"application/json\",\r\n                    url: this.getActionUrl(settings),\r\n                    beforeSend: function (xhr) {\r\n                        xhr.setRequestHeader(\"ContentBlockId\", this.cbid);\r\n                        sf.setModuleHeaders(xhr);\r\n                    }\r\n                });\r\n                if (!settings.preventAutoFail)\r\n                    promise.fail(this.controller.showDetailedHttpError);\r\n                return promise;\r\n            };\r\n            ;\r\n            SxcWebApiWithInternals.prototype.getActionUrl = function (settings) {\r\n                var sf = $.ServicesFramework(this.id);\r\n                var base = (settings.url)\r\n                    ? this.controller.resolveServiceUrl(settings.url)\r\n                    : sf.getServiceRoot(\"2sxc\") + \"app/auto/api/\" + settings.controller + \"/\" + settings.action;\r\n                return base + (settings.params === null ? \"\" : (\"?\" + $.param(settings.params)));\r\n            };\r\n            return SxcWebApiWithInternals;\r\n        }());\r\n        Sxc.SxcWebApiWithInternals = SxcWebApiWithInternals;\r\n    })(Sxc = ToSic.Sxc || (ToSic.Sxc = {}));\r\n})(ToSic || (ToSic = {}));\r\nvar ToSic;\r\n(function (ToSic) {\r\n    var Sxc;\r\n    (function (Sxc) {\r\n        var SxcDataWithInternals = (function () {\r\n            function SxcDataWithInternals(controller) {\r\n                this.controller = controller;\r\n                this.source = undefined;\r\n                this[\"in\"] = {};\r\n                this.List = [];\r\n            }\r\n            SxcDataWithInternals.prototype.sourceUrl = function (params) {\r\n                var url = this.controller.resolveServiceUrl(\"app-sys/appcontent/GetContentBlockData\");\r\n                if (typeof params == \"string\")\r\n                    url += \"&\" + params;\r\n                return url;\r\n            };\r\n            SxcDataWithInternals.prototype.load = function (source) {\r\n                var _this = this;\r\n                if (source && source.List) {\r\n                    return this.controller.data;\r\n                }\r\n                else {\r\n                    if (!source)\r\n                        source = {};\r\n                    if (!source.url)\r\n                        source.url = this.controller.data.sourceUrl();\r\n                    source.origSuccess = source.success;\r\n                    source.success = function (data) {\r\n                        for (var dataSetName in data) {\r\n                            if (data.hasOwnProperty(dataSetName))\r\n                                if (data[dataSetName].List !== null) {\r\n                                    _this.controller.data[\"in\"][dataSetName] = data[dataSetName];\r\n                                    _this.controller.data[\"in\"][dataSetName].name = dataSetName;\r\n                                }\r\n                        }\r\n                        if (_this.controller.data[\"in\"].Default)\r\n                            _this.List = _this[\"in\"].Default.List;\r\n                        if (source.origSuccess)\r\n                            source.origSuccess(_this);\r\n                        _this.controller.isLoaded = true;\r\n                        _this.controller.lastRefresh = new Date();\r\n                        _this._triggerLoaded();\r\n                    };\r\n                    source.error = function (request) { alert(request.statusText); };\r\n                    source.preventAutoFail = true;\r\n                    this.source = source;\r\n                    return this.reload();\r\n                }\r\n            };\r\n            SxcDataWithInternals.prototype.reload = function () {\r\n                this.controller.webApi.get(this.source)\r\n                    .then(this.source.success, this.source.error);\r\n                return this;\r\n            };\r\n            SxcDataWithInternals.prototype.on = function (events, callback) {\r\n                return $(this).bind(\"2scLoad\", callback)[0]._triggerLoaded();\r\n            };\r\n            SxcDataWithInternals.prototype._triggerLoaded = function () {\r\n                return this.controller.isLoaded\r\n                    ? $(this).trigger(\"2scLoad\", [this])[0]\r\n                    : this;\r\n            };\r\n            SxcDataWithInternals.prototype.one = function (events, callback) {\r\n                if (!this.controller.isLoaded)\r\n                    return $(this).one(\"2scLoad\", callback)[0];\r\n                callback({}, this);\r\n                return this;\r\n            };\r\n            return SxcDataWithInternals;\r\n        }());\r\n        Sxc.SxcDataWithInternals = SxcDataWithInternals;\r\n    })(Sxc = ToSic.Sxc || (ToSic.Sxc = {}));\r\n})(ToSic || (ToSic = {}));\r\nvar ToSic;\r\n(function (ToSic) {\r\n    var Sxc;\r\n    (function (Sxc) {\r\n        var SxcInstance = (function () {\r\n            function SxcInstance(id, cbid, dnnSf) {\r\n                this.id = id;\r\n                this.cbid = cbid;\r\n                this.dnnSf = dnnSf;\r\n                this.serviceScopes = [\"app\", \"app-sys\", \"app-api\", \"app-query\", \"app-content\", \"eav\", \"view\", \"dnn\"];\r\n                this.serviceRoot = dnnSf(id).getServiceRoot(\"2sxc\");\r\n                this.webApi = new ToSic.Sxc.SxcWebApiWithInternals(this, id, cbid);\r\n            }\r\n            SxcInstance.prototype.resolveServiceUrl = function (virtualPath) {\r\n                var scope = virtualPath.split(\"/\")[0].toLowerCase();\r\n                if (this.serviceScopes.indexOf(scope) === -1)\r\n                    return virtualPath;\r\n                return this.serviceRoot + scope + \"/\" + virtualPath.substring(virtualPath.indexOf(\"/\") + 1);\r\n            };\r\n            SxcInstance.prototype.showDetailedHttpError = function (result) {\r\n                if (window.console)\r\n                    console.log(result);\r\n                if (result.status === 404 &&\r\n                    result.config &&\r\n                    result.config.url &&\r\n                    result.config.url.indexOf(\"/dist/i18n/\") > -1) {\r\n                    if (window.console)\r\n                        console.log(\"just fyi: failed to load language resource; will have to use default\");\r\n                    return result;\r\n                }\r\n                if (result.status === 0 || result.status === -1)\r\n                    return result;\r\n                var infoText = \"Had an error talking to the server (status \" + result.status + \").\";\r\n                var srvResp = result.responseText\r\n                    ? JSON.parse(result.responseText)\r\n                    : result.data;\r\n                if (srvResp) {\r\n                    var msg = srvResp.Message;\r\n                    if (msg)\r\n                        infoText += \"\\nMessage: \" + msg;\r\n                    var msgDet = srvResp.MessageDetail || srvResp.ExceptionMessage;\r\n                    if (msgDet)\r\n                        infoText += \"\\nDetail: \" + msgDet;\r\n                    if (msgDet && msgDet.indexOf(\"No action was found\") === 0)\r\n                        if (msgDet.indexOf(\"that matches the name\") > 0)\r\n                            infoText += \"\\n\\nTip from 2sxc: you probably got the action-name wrong in your JS.\";\r\n                        else if (msgDet.indexOf(\"that matches the request.\") > 0)\r\n                            infoText += \"\\n\\nTip from 2sxc: Seems like the parameters are the wrong amount or type.\";\r\n                    if (msg && msg.indexOf(\"Controller\") === 0 && msg.indexOf(\"not found\") > 0)\r\n                        infoText +=\r\n                            \"\\n\\nTip from 2sxc: you probably spelled the controller name wrong or forgot to remove the word 'controller' from the call in JS. To call a controller called 'DemoController' only use 'Demo'.\";\r\n                }\r\n                infoText += \"\\n\\nif you are an advanced user you can learn more about what went wrong - discover how on 2sxc.org/help?tag=debug\";\r\n                alert(infoText);\r\n                return result;\r\n            };\r\n            return SxcInstance;\r\n        }());\r\n        Sxc.SxcInstance = SxcInstance;\r\n        var SxcInstanceWithEditing = (function (_super) {\r\n            __extends(SxcInstanceWithEditing, _super);\r\n            function SxcInstanceWithEditing(id, cbid, $2sxc, dnnSf) {\r\n                var _this = _super.call(this, id, cbid, dnnSf) || this;\r\n                _this.id = id;\r\n                _this.cbid = cbid;\r\n                _this.$2sxc = $2sxc;\r\n                _this.dnnSf = dnnSf;\r\n                _this.manage = null;\r\n                try {\r\n                    if ($2sxc._manage)\r\n                        $2sxc._manage.initInstance(_this);\r\n                }\r\n                catch (e) {\r\n                    throw e;\r\n                }\r\n                if ($2sxc._translateInit && _this.manage)\r\n                    $2sxc._translateInit(_this.manage);\r\n                return _this;\r\n            }\r\n            SxcInstanceWithEditing.prototype.isEditMode = function () {\r\n                return this.manage && this.manage._isEditMode();\r\n            };\r\n            return SxcInstanceWithEditing;\r\n        }(SxcInstance));\r\n        Sxc.SxcInstanceWithEditing = SxcInstanceWithEditing;\r\n        var SxcInstanceWithInternals = (function (_super) {\r\n            __extends(SxcInstanceWithInternals, _super);\r\n            function SxcInstanceWithInternals(id, cbid, cacheKey, $2sxc, dnnSf) {\r\n                var _this = _super.call(this, id, cbid, $2sxc, dnnSf) || this;\r\n                _this.id = id;\r\n                _this.cbid = cbid;\r\n                _this.cacheKey = cacheKey;\r\n                _this.$2sxc = $2sxc;\r\n                _this.dnnSf = dnnSf;\r\n                _this.source = null;\r\n                _this.isLoaded = false;\r\n                _this.lastRefresh = null;\r\n                _this.data = new Sxc.SxcDataWithInternals(_this);\r\n                return _this;\r\n            }\r\n            SxcInstanceWithInternals.prototype.recreate = function (resetCache) {\r\n                if (resetCache)\r\n                    delete this.$2sxc._controllers[this.cacheKey];\r\n                return this.$2sxc(this.id, this.cbid);\r\n            };\r\n            return SxcInstanceWithInternals;\r\n        }(SxcInstanceWithEditing));\r\n        Sxc.SxcInstanceWithInternals = SxcInstanceWithInternals;\r\n    })(Sxc = ToSic.Sxc || (ToSic.Sxc = {}));\r\n})(ToSic || (ToSic = {}));\r\nvar ToSic;\r\n(function (ToSic) {\r\n    var Sxc;\r\n    (function (Sxc) {\r\n        function SxcController(id, cbid) {\r\n            var $2sxc = window.$2sxc;\r\n            if (!$2sxc._controllers)\r\n                throw \"$2sxc not initialized yet\";\r\n            if (typeof id === \"object\") {\r\n                var idTuple = autoFind(id);\r\n                id = idTuple[0];\r\n                cbid = idTuple[1];\r\n            }\r\n            if (!cbid)\r\n                cbid = id;\r\n            var cacheKey = id + \":\" + cbid;\r\n            if ($2sxc._controllers[cacheKey])\r\n                return $2sxc._controllers[cacheKey];\r\n            if (!$2sxc._data[cacheKey])\r\n                $2sxc._data[cacheKey] = {};\r\n            return $2sxc._controllers[cacheKey] = new ToSic.Sxc.SxcInstanceWithInternals(id, cbid, cacheKey, $2sxc, $.ServicesFramework);\r\n        }\r\n        Sxc.SxcController = SxcController;\r\n        function buildSxcController() {\r\n            var url = new ToSic.Sxc.UrlParamManager();\r\n            var debug = {\r\n                load: (url.get(\"debug\") === \"true\"),\r\n                uncache: url.get(\"sxcver\")\r\n            };\r\n            var addOn = {\r\n                _controllers: {},\r\n                sysinfo: {\r\n                    version: \"09.05.00\",\r\n                    description: \"The 2sxc Controller object - read more about it on 2sxc.org\"\r\n                },\r\n                beta: {},\r\n                _data: {},\r\n                totalPopup: new ToSic.Sxc.TotalPopup(),\r\n                urlParams: url,\r\n                debug: debug,\r\n                parts: {\r\n                    getUrl: function (url, preventUnmin) {\r\n                        var r = (preventUnmin || !debug.load) ? url : url.replace(\".min\", \"\");\r\n                        if (debug.uncache && r.indexOf(\"sxcver\") === -1)\r\n                            r = r + ((r.indexOf(\"?\") === -1) ? \"?\" : \"&\") + \"sxcver=\" + debug.uncache;\r\n                        return r;\r\n                    }\r\n                },\r\n            };\r\n            for (var property in addOn)\r\n                if (addOn.hasOwnProperty(property))\r\n                    SxcController[property] = addOn[property];\r\n            return SxcController;\r\n        }\r\n        Sxc.buildSxcController = buildSxcController;\r\n        function applyMixins(derivedCtor, baseCtors) {\r\n            baseCtors.forEach(function (baseCtor) {\r\n                Object.getOwnPropertyNames(baseCtor.prototype).forEach(function (name) {\r\n                    derivedCtor.prototype[name] = baseCtor.prototype[name];\r\n                });\r\n            });\r\n        }\r\n        function autoFind(domElement) {\r\n            var containerTag = $(domElement).closest(\".sc-content-block\")[0];\r\n            if (!containerTag)\r\n                return null;\r\n            var iid = containerTag.getAttribute(\"data-cb-instance\"), cbid = containerTag.getAttribute(\"data-cb-id\");\r\n            if (!iid || !cbid)\r\n                return null;\r\n            return [iid, cbid];\r\n        }\r\n    })(Sxc = ToSic.Sxc || (ToSic.Sxc = {}));\r\n})(ToSic || (ToSic = {}));\r\nvar ToSic;\r\n(function (ToSic) {\r\n    var Sxc;\r\n    (function (Sxc) {\r\n        var TotalPopup = (function () {\r\n            function TotalPopup() {\r\n                this.frame = undefined;\r\n                this.callback = undefined;\r\n            }\r\n            TotalPopup.prototype.open = function (url, callback) {\r\n                var z = 10000010, p = window;\r\n                while (p !== window.top && z < 10000100) {\r\n                    z++;\r\n                    p = p.parent;\r\n                }\r\n                var wrapper = document.createElement(\"div\");\r\n                wrapper.setAttribute(\"style\", \" top: 0;left: 0;width: 100%;height: 100%; position:fixed; z-index:\" + z);\r\n                document.body.appendChild(wrapper);\r\n                var ifrm = document.createElement(\"iframe\");\r\n                ifrm.setAttribute(\"allowtransparency\", \"true\");\r\n                ifrm.setAttribute(\"style\", \"top: 0;left: 0;width: 100%;height: 100%;\");\r\n                ifrm.setAttribute(\"src\", url);\r\n                wrapper.appendChild(ifrm);\r\n                document.body.className += \" sxc-popup-open\";\r\n                this.frame = ifrm;\r\n                this.callback = callback;\r\n            };\r\n            TotalPopup.prototype.close = function () {\r\n                if (this.frame) {\r\n                    document.body.className = document.body.className.replace(\"sxc-popup-open\", \"\");\r\n                    var frm = this.frame;\r\n                    frm.parentNode.parentNode.removeChild(frm.parentNode);\r\n                    this.callback();\r\n                }\r\n            };\r\n            TotalPopup.prototype.closeThis = function () {\r\n                window.parent.$2sxc.totalPopup.close();\r\n            };\r\n            return TotalPopup;\r\n        }());\r\n        Sxc.TotalPopup = TotalPopup;\r\n    })(Sxc = ToSic.Sxc || (ToSic.Sxc = {}));\r\n})(ToSic || (ToSic = {}));\r\nvar ToSic;\r\n(function (ToSic) {\r\n    var Sxc;\r\n    (function (Sxc) {\r\n        var UrlParamManager = (function () {\r\n            function UrlParamManager() {\r\n            }\r\n            UrlParamManager.prototype.get = function (name) {\r\n                name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n                var searchRx = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\", \"i\");\r\n                var results = searchRx.exec(location.search), strResult;\r\n                if (results === null) {\r\n                    var hashRx = new RegExp(\"[#&]\" + name + \"=([^&#]*)\", \"i\");\r\n                    results = hashRx.exec(location.hash);\r\n                }\r\n                if (results === null) {\r\n                    var matches = window.location.pathname.match(new RegExp(\"/\" + name + \"/([^/]+)\", \"i\"));\r\n                    if (matches && matches.length > 1)\r\n                        strResult = matches.reverse()[0];\r\n                }\r\n                else\r\n                    strResult = results[1];\r\n                return strResult === null || strResult === undefined ? \"\" : decodeURIComponent(strResult.replace(/\\+/g, \" \"));\r\n            };\r\n            UrlParamManager.prototype.require = function (name) {\r\n                var found = this.get(name);\r\n                if (found === \"\") {\r\n                    var message = \"Required parameter (\" + name + \") missing from url - cannot continue\";\r\n                    alert(message);\r\n                    throw message;\r\n                }\r\n                return found;\r\n            };\r\n            return UrlParamManager;\r\n        }());\r\n        Sxc.UrlParamManager = UrlParamManager;\r\n        ;\r\n    })(Sxc = ToSic.Sxc || (ToSic.Sxc = {}));\r\n})(ToSic || (ToSic = {}));\r\nif (!window.$2sxc)\r\n    window.$2sxc = ToSic.Sxc.buildSxcController();\r\n//# sourceMappingURL=2sxc.api.js.map"],"sourceRoot":"/source/"}