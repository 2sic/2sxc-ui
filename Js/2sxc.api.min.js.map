{"version":3,"sources":["2sxc.api.min.js"],"names":["getInstance","id","cbid","autoFind","cacheKey","$2sxc","_controllers","_data","controller","serviceScopes","serviceRoot","$","ServicesFramework","getServiceRoot","resolveServiceUrl","virtualPath","scope","split","toLowerCase","indexOf","substring","data","sourceUrl","params","url","source","undefined","in","List","load","origSuccess","success","dataSetName","hasOwnProperty","name","Default","isLoaded","lastRefresh","Date","_triggerLoaded","error","request","alert","statusText","preventAutoFail","reload","webApi","get","then","on","events","callback","bind","trigger","one","manage","isEditMode","_isEditMode","recreate","resetCache","s","p","d","paf","_action","post","delete","put","settings","method","controllerAction","controllerName","actionName","action","length","defaults","extend","sf","promise","ajax","type","dataType","async","JSON","stringify","contentType","getActionUrl","beforeSend","xhr","setRequestHeader","setModuleHeaders","fail","showDetailedHttpError","base","param","result","window","console","log","status","config","infoText","srvResp","responseText","parse","msg","Message","msgDet","MessageDetail","ExceptionMessage","_manage","initInstance","e","_translateInit","domElement","containerTag","closest","iid","getAttribute","sysinfo","version","description","beta","totalPopup","open","z","top","parent","wrapper","document","createElement","setAttribute","body","appendChild","ifrm","className","frame","close","replace","frm","parentNode","removeChild","closeThis","urlParams","strResult","searchRx","RegExp","results","exec","location","search","hashRx","hash","matches","pathname","match","reverse","decodeURIComponent","require","found","message","debug","uncache","parts","getUrl","preventUnmin","r"],"mappings":"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","file":"2sxc.api.min.js","sourcesContent":["(function () {\r\n    if (window.$2sxc)\r\n        return;\r\n    var $2sxc = window.$2sxc = getInstance;\r\n    function getInstance(id, cbid) {\r\n        if (typeof id === \"object\")\r\n            return autoFind(id);\r\n        if (!cbid)\r\n            cbid = id;\r\n        var cacheKey = id + \":\" + cbid;\r\n        if ($2sxc._controllers[cacheKey])\r\n            return $2sxc._controllers[cacheKey];\r\n        if (!$2sxc._data[cacheKey])\r\n            $2sxc._data[cacheKey] = {};\r\n        var controller = $2sxc._controllers[cacheKey] = {\r\n            serviceScopes: [\"app\", \"app-sys\", \"app-api\", \"app-query\", \"app-content\", \"eav\", \"view\", \"dnn\"],\r\n            serviceRoot: $.ServicesFramework(id).getServiceRoot(\"2sxc\"),\r\n            resolveServiceUrl: function (virtualPath) {\r\n                var scope = virtualPath.split(\"/\")[0].toLowerCase();\r\n                if (controller.serviceScopes.indexOf(scope) === -1)\r\n                    return virtualPath;\r\n                return controller.serviceRoot + scope + \"/\" + virtualPath.substring(virtualPath.indexOf(\"/\") + 1);\r\n            },\r\n            data: {\r\n                sourceUrl: function (params) {\r\n                    var url = controller.resolveServiceUrl(\"app-sys/appcontent/GetContentBlockData\");\r\n                    if (typeof params == \"string\")\r\n                        url += \"&\" + params;\r\n                    return url;\r\n                },\r\n                source: undefined,\r\n                \"in\": {},\r\n                List: [],\r\n                load: function (source) {\r\n                    if (source && source.List) {\r\n                        return controller.data;\r\n                    }\r\n                    else {\r\n                        if (!source)\r\n                            source = {};\r\n                        if (!source.url)\r\n                            source.url = controller.data.sourceUrl();\r\n                        source.origSuccess = source.success;\r\n                        source.success = function (data) {\r\n                            for (var dataSetName in data) {\r\n                                if (data.hasOwnProperty(dataSetName))\r\n                                    if (data[dataSetName].List !== null) {\r\n                                        controller.data[\"in\"][dataSetName] = data[dataSetName];\r\n                                        controller.data[\"in\"][dataSetName].name = dataSetName;\r\n                                    }\r\n                            }\r\n                            if (controller.data[\"in\"].Default)\r\n                                controller.data.List = controller.data[\"in\"].Default.List;\r\n                            if (source.origSuccess)\r\n                                source.origSuccess(controller.data);\r\n                            controller.isLoaded = true;\r\n                            controller.lastRefresh = new Date();\r\n                            controller.data._triggerLoaded();\r\n                        };\r\n                        source.error = function (request) { alert(request.statusText); };\r\n                        source.preventAutoFail = true;\r\n                        controller.data.source = source;\r\n                        return controller.data.reload();\r\n                    }\r\n                },\r\n                reload: function () {\r\n                    controller.webApi.get(controller.data.source)\r\n                        .then(controller.data.source.success, controller.data.source.error);\r\n                    return controller.data;\r\n                },\r\n                on: function (events, callback) {\r\n                    return $(controller.data).bind(\"2scLoad\", callback)[0]._triggerLoaded();\r\n                },\r\n                _triggerLoaded: function () {\r\n                    return controller.isLoaded\r\n                        ? $(controller.data).trigger(\"2scLoad\", [controller.data])[0]\r\n                        : controller.data;\r\n                },\r\n                one: function (events, callback) {\r\n                    if (!controller.isLoaded)\r\n                        return $(controller.data).one(\"2scLoad\", callback)[0];\r\n                    callback({}, controller.data);\r\n                    return controller.data;\r\n                }\r\n            },\r\n            id: id,\r\n            cbid: cbid,\r\n            cacheKey: cacheKey,\r\n            source: null,\r\n            isLoaded: false,\r\n            lastRefresh: null,\r\n            manage: null,\r\n            isEditMode: function () {\r\n                return controller.manage && controller.manage._isEditMode();\r\n            },\r\n            recreate: function (resetCache) {\r\n                if (resetCache)\r\n                    delete $2sxc._controllers[cacheKey];\r\n                return $2sxc(controller.id, controller.cbid);\r\n            },\r\n            webApi: {\r\n                get: function (s, p, d, paf) { return controller.webApi._action(s, p, d, paf, \"GET\"); },\r\n                post: function (s, p, d, paf) { return controller.webApi._action(s, p, d, paf, \"POST\"); },\r\n                \"delete\": function (s, p, d, paf) { return controller.webApi._action(s, p, d, paf, \"DELETE\"); },\r\n                put: function (s, p, d, paf) { return controller.webApi._action(s, p, d, paf, \"PUT\"); },\r\n                _action: function (settings, params, data, preventAutoFail, method) {\r\n                    if (typeof params != \"object\" && typeof params != \"undefined\")\r\n                        params = { id: params };\r\n                    if (typeof settings == \"string\") {\r\n                        var controllerAction = settings.split(\"/\");\r\n                        var controllerName = controllerAction[0];\r\n                        var actionName = controllerAction[1];\r\n                        if (controllerName === \"\" || actionName === \"\")\r\n                            alert(\"Error: controller or action not defined. Will continue with likely errors.\");\r\n                        settings = {\r\n                            controller: controllerName,\r\n                            action: actionName,\r\n                            params: params,\r\n                            data: data,\r\n                            url: controllerAction.length > 2 ? settings : null,\r\n                            preventAutoFail: preventAutoFail\r\n                        };\r\n                    }\r\n                    var defaults = {\r\n                        method: method === null ? \"POST\" : method,\r\n                        params: null,\r\n                        preventAutoFail: false\r\n                    };\r\n                    settings = $.extend({}, defaults, settings);\r\n                    var sf = $.ServicesFramework(id);\r\n                    var promise = $.ajax({\r\n                        type: settings.method,\r\n                        dataType: settings.dataType || \"json\",\r\n                        async: true,\r\n                        data: JSON.stringify(settings.data),\r\n                        contentType: \"application/json\",\r\n                        url: controller.webApi.getActionUrl(settings),\r\n                        beforeSend: function (xhr) {\r\n                            xhr.setRequestHeader(\"ContentBlockId\", cbid);\r\n                            sf.setModuleHeaders(xhr);\r\n                        }\r\n                    });\r\n                    if (!settings.preventAutoFail)\r\n                        promise.fail(controller.showDetailedHttpError);\r\n                    return promise;\r\n                },\r\n                getActionUrl: function (settings) {\r\n                    var sf = $.ServicesFramework(id);\r\n                    var base = (settings.url)\r\n                        ? controller.resolveServiceUrl(settings.url)\r\n                        : sf.getServiceRoot(\"2sxc\") + \"app/auto/api/\" + settings.controller + \"/\" + settings.action;\r\n                    return base + (settings.params === null ? \"\" : (\"?\" + $.param(settings.params)));\r\n                }\r\n            },\r\n            showDetailedHttpError: function (result) {\r\n                if (window.console)\r\n                    console.log(result);\r\n                if (result.status === 404 &&\r\n                    result.config &&\r\n                    result.config.url &&\r\n                    result.config.url.indexOf(\"/dist/i18n/\") > -1) {\r\n                    if (window.console)\r\n                        console.log(\"just fyi: failed to load language resource; will have to use default\");\r\n                    return result;\r\n                }\r\n                if (result.status === 0 || result.status === -1)\r\n                    return result;\r\n                var infoText = \"Had an error talking to the server (status \" + result.status + \").\";\r\n                var srvResp = result.responseText\r\n                    ? JSON.parse(result.responseText)\r\n                    : result.data;\r\n                if (srvResp) {\r\n                    var msg = srvResp.Message;\r\n                    if (msg)\r\n                        infoText += \"\\nMessage: \" + msg;\r\n                    var msgDet = srvResp.MessageDetail || srvResp.ExceptionMessage;\r\n                    if (msgDet)\r\n                        infoText += \"\\nDetail: \" + msgDet;\r\n                    if (msgDet && msgDet.indexOf(\"No action was found\") === 0)\r\n                        if (msgDet.indexOf(\"that matches the name\") > 0)\r\n                            infoText += \"\\n\\nTip from 2sxc: you probably got the action-name wrong in your JS.\";\r\n                        else if (msgDet.indexOf(\"that matches the request.\") > 0)\r\n                            infoText += \"\\n\\nTip from 2sxc: Seems like the parameters are the wrong amount or type.\";\r\n                    if (msg && msg.indexOf(\"Controller\") === 0 && msg.indexOf(\"not found\") > 0)\r\n                        infoText +=\r\n                            \"\\n\\nTip from 2sxc: you probably spelled the controller name wrong or forgot to remove the word 'controller' from the call in JS. To call a controller called 'DemoController' only use 'Demo'.\";\r\n                }\r\n                infoText += \"\\n\\nif you are an advanced user you can learn more about what went wrong - discover how on 2sxc.org/help?tag=debug\";\r\n                alert(infoText);\r\n                return result;\r\n            }\r\n        };\r\n        try {\r\n            controller.manage = null;\r\n            if ($2sxc._manage)\r\n                $2sxc._manage.initInstance(controller);\r\n        }\r\n        catch (e) {\r\n            throw e;\r\n        }\r\n        if ($2sxc._translateInit && controller.manage)\r\n            $2sxc._translateInit(controller.manage);\r\n        return controller;\r\n    }\r\n    ;\r\n    $2sxc._controllers = {};\r\n    $2sxc.sysinfo = {\r\n        version: \"09.05.00\",\r\n        description: \"The 2sxc Controller object - read more about it on 2sxc.org\"\r\n    };\r\n    $2sxc.beta = {};\r\n    $2sxc._data = {};\r\n    $2sxc.totalPopup = {\r\n        open: function (url, callback) {\r\n            var z = 10000010, p = window;\r\n            while (p !== window.top && z < 10000100) {\r\n                z++;\r\n                p = p.parent;\r\n            }\r\n            var wrapper = document.createElement(\"div\");\r\n            wrapper.setAttribute(\"style\", \" top: 0;left: 0;width: 100%;height: 100%; position:fixed; z-index:\" + z);\r\n            document.body.appendChild(wrapper);\r\n            var ifrm = document.createElement(\"iframe\");\r\n            ifrm.setAttribute(\"allowtransparency\", \"true\");\r\n            ifrm.setAttribute(\"style\", \"top: 0;left: 0;width: 100%;height: 100%;\");\r\n            ifrm.setAttribute(\"src\", url);\r\n            wrapper.appendChild(ifrm);\r\n            document.body.className += \" sxc-popup-open\";\r\n            $2sxc.totalPopup.frame = ifrm;\r\n            $2sxc.totalPopup.callback = callback;\r\n        },\r\n        close: function () {\r\n            if ($2sxc.totalPopup.frame) {\r\n                document.body.className = document.body.className.replace(\"sxc-popup-open\", \"\");\r\n                var frm = $2sxc.totalPopup.frame;\r\n                frm.parentNode.parentNode.removeChild(frm.parentNode);\r\n                $2sxc.totalPopup.callback();\r\n            }\r\n        },\r\n        closeThis: function () {\r\n            window.parent.$2sxc.totalPopup.close();\r\n        },\r\n        frame: undefined,\r\n        callback: undefined\r\n    };\r\n    $2sxc.urlParams = {\r\n        get: function (name) {\r\n            name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n            var searchRx = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\", \"i\");\r\n            var results = searchRx.exec(location.search), strResult;\r\n            if (results === null) {\r\n                var hashRx = new RegExp(\"[#&]\" + name + \"=([^&#]*)\", \"i\");\r\n                results = hashRx.exec(location.hash);\r\n            }\r\n            if (results === null) {\r\n                var matches = window.location.pathname.match(new RegExp(\"/\" + name + \"/([^/]+)\", \"i\"));\r\n                if (matches && matches.length > 1)\r\n                    strResult = matches.reverse()[0];\r\n            }\r\n            else\r\n                strResult = results[1];\r\n            return strResult === null || strResult === undefined ? \"\" : decodeURIComponent(strResult.replace(/\\+/g, \" \"));\r\n        },\r\n        require: function (name) {\r\n            var found = $2sxc.urlParams.get(name);\r\n            if (found === \"\") {\r\n                var message = \"Required parameter (\" + name + \") missing from url - cannot continue\";\r\n                alert(message);\r\n                throw message;\r\n            }\r\n            return found;\r\n        }\r\n    };\r\n    function autoFind(domElement) {\r\n        var containerTag = $(domElement).closest(\".sc-content-block\")[0];\r\n        if (!containerTag)\r\n            return null;\r\n        var iid = containerTag.getAttribute(\"data-cb-instance\"), cbid = containerTag.getAttribute(\"data-cb-id\");\r\n        if (!iid || !cbid)\r\n            return null;\r\n        return $2sxc(iid, cbid);\r\n    }\r\n    ;\r\n    $2sxc.debug = {\r\n        load: ($2sxc.urlParams.get(\"debug\") === \"true\"),\r\n        uncache: $2sxc.urlParams.get(\"sxcver\")\r\n    };\r\n    $2sxc.parts = {\r\n        getUrl: function (url, preventUnmin) {\r\n            var r = (preventUnmin || !$2sxc.debug.load) ? url : url.replace(\".min\", \"\");\r\n            if ($2sxc.debug.uncache && r.indexOf(\"sxcver\") === -1)\r\n                r = r + ((r.indexOf(\"?\") === -1) ? \"?\" : \"&\") + \"sxcver=\" + $2sxc.debug.uncache;\r\n            return r;\r\n        }\r\n    };\r\n})();\r\n//# sourceMappingURL=2sxc.api.js.map"],"sourceRoot":"/source/"}