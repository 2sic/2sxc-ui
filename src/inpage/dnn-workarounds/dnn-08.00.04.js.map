{"version":3,"file":"dnn-08.00.04.js","sourceRoot":"","sources":["dnn-08.00.04.ts"],"names":[],"mappings":"AAAA,mDAAmD;AACnD,kEAAkE;AAClE,sEAAsE;AACtE,yBAAyB;AACzB,qEAAqE;AACrE,wCAAwC;AACxC,uEAAuE;AACvE,2EAA2E;AAC3E,0DAA0D;AAO1D,CAAC;IACG,IAAI,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC;IACnB,CAAC,CAAC,EAAE,CAAC,IAAI,GAAG;QACR,IAAI,GAAG,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QACpC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,OAAO;eACrB,OAAO,GAAG,KAAK,QAAQ;eACvB,GAAG,CAAC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;YAAC,MAAM,CAAC,GAAG,CAAC;QACxD,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,iBAAiB,EAAE,EAAE,CAAC,GAAG,iBAAiB,CAAC;IAClE,CAAC,CAAC;AACN,CAAC,CAAC,EAAE,CAAC","sourcesContent":["// The following script fixes a bug in DNN 08.00.04\r\n// the bug tries to detect a module-ID based on classes in a tag, \r\n// but uses a bad regex and captures the number 2 on all 2sxc-modules \r\n// instead of the real id\r\n// this patch changes the order of the className of 2sxc modules when\r\n// they are accessed through '$.fn.attr'\r\n// 'DnnModule-2sxc DnnModule-xxx' -> DNN thinks the mod id is 2 (false)\r\n// 'DnnModule-xxx DnnModule-2sxc' -> DNN thinks the mod id is xxx (correct)\r\n// documented here https://github.com/2sic/2sxc/issues/986\r\n\r\n/**\r\n * Fix drag-drop functionality in dnn 08.00.04 - it has an incorrect regex\r\n */\r\ndeclare const $;\r\n\r\n(() => {\r\n    var fn = $.fn.attr;\r\n    $.fn.attr = function () {\r\n        var val = fn.apply(this, arguments);\r\n        if (arguments[0] !== \"class\"\r\n            || typeof val !== \"string\"\r\n            || val.search(\"DnnModule-2sxc \") === -1) return val;\r\n        return val.replace(\"DnnModule-2sxc \", \"\") + \" DnnModule-2sxc\";\r\n    };\r\n})();"]}