{"version":3,"file":"2sxc.api.js","sourceRoot":"","sources":["2sxc.api.ts"],"names":[],"mappings":"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","sourcesContent":["// this is the 2sxc-javascript API\r\n// 2sxc will include this automatically when a user has edit-rights\r\n// a template developer will typically use this to use the data-api to read 2sxc-data from the server\r\n// read more about this in the wiki: https://github.com/2sic/2sxc/wiki/JavaScript-%242sxc\r\n\r\ndeclare const $;\r\n\r\n// ReSharper disable InconsistentNaming\r\ninterface Window { $2sxc: SxcControllerWithInternals; }\r\n\r\n(() => {\r\n    if (window.$2sxc) return;   // prevent double execution\r\n\r\n    var $2sxc = window.$2sxc = getInstance as SxcControllerWithInternals;\r\n\r\n    function getInstance(id: number | HTMLElement, cbid?: number) : SxcInstanceWithInternals  {\r\n\r\n        // if it's a dom-element, use auto-find\r\n        if (typeof id === \"object\") return autoFind(id);\r\n\r\n        if (!cbid) cbid = id;           // if content-block is unknown, use id of module\r\n        var cacheKey = id + \":\" + cbid; // neutralize the id from old \"34\" format to the new \"35:353\" format\r\n\r\n        // either get the cached controller from previous calls, or create a new one\r\n        if ($2sxc._controllers[cacheKey]) return $2sxc._controllers[cacheKey];\r\n\r\n        // also init the data-cache in case it's ever needed\r\n        if (!$2sxc._data[cacheKey]) $2sxc._data[cacheKey] = {};\r\n\r\n        var controller:SxcInstanceWithInternals = $2sxc._controllers[cacheKey] = {\r\n            serviceScopes: [\"app\", \"app-sys\", \"app-api\", \"app-query\", \"app-content\", \"eav\", \"view\", \"dnn\"],\r\n            serviceRoot: $.ServicesFramework(id).getServiceRoot(\"2sxc\"),\r\n            resolveServiceUrl(virtualPath: string) {\r\n                const scope = virtualPath.split(\"/\")[0].toLowerCase();\r\n\r\n                // stop if it's not one of our special paths\r\n                if (controller.serviceScopes.indexOf(scope) === -1)\r\n                    return virtualPath;\r\n\r\n                return controller.serviceRoot + scope + \"/\" + virtualPath.substring(virtualPath.indexOf(\"/\") + 1);\r\n            },\r\n\r\n            data: {\r\n                // source path defaulting to current page + optional params\r\n                sourceUrl(params?: string): string {\r\n                    let url = controller.resolveServiceUrl(\"app-sys/appcontent/GetContentBlockData\");\r\n                    if (typeof params == \"string\") // text like 'id=7'\r\n                        url += \"&\" + params;\r\n                    return url;\r\n                },\r\n\r\n                source: undefined as any,\r\n\r\n                // in-streams\r\n                \"in\": {} as any,\r\n\r\n                // Will hold the default stream ([\"in\"][\"Default\"].List\r\n                List: [] as any,\r\n\r\n                // 2017-09-05 2dm: remove this, don't believe anybody is using this - leave comment till 2018, then remove completely\r\n                //controller: null,\r\n\r\n                // Load data via ajax\r\n                load(source?: any) {\r\n                    // If source is already the data, set it\r\n                    if (source && source.List) {\r\n                        // 2017-09-05 2dm: discoverd a call to an inexisting function\r\n                        // since this is an old API which is being deprecated, please don't fix unless we get active feedback\r\n                        //controller.data.setData(source);\r\n                        return controller.data;\r\n                    } else {\r\n                        if (!source)\r\n                            source = {};\r\n                        if (!source.url)\r\n                            source.url = controller.data.sourceUrl();\r\n                        source.origSuccess = source.success;\r\n                        source.success = data => {\r\n\r\n                            for (let dataSetName in data) {\r\n                                if (data.hasOwnProperty(dataSetName))\r\n                                    if (data[dataSetName].List !== null) {\r\n                                        controller.data[\"in\"][dataSetName] = data[dataSetName];\r\n                                        controller.data[\"in\"][dataSetName].name = dataSetName;\r\n                                    }\r\n                            }\r\n\r\n                            if (controller.data[\"in\"].Default)\r\n                            // 2017-09-05 2dm: previously wrote it to controller.List, but this is almost certainly a mistake\r\n                            // since it's an old API which is being deprecated, we won't fix it\r\n                                controller.data.List = controller.data[\"in\"].Default.List;\r\n\r\n                            if (source.origSuccess)\r\n                                source.origSuccess(controller.data);\r\n\r\n                            controller.isLoaded = true;\r\n                            controller.lastRefresh = new Date();\r\n                            (<any>controller.data)._triggerLoaded();\r\n                        };\r\n                        source.error = request => { alert(request.statusText); };\r\n                        source.preventAutoFail = true; // use our fail message\r\n                        controller.data.source = source;\r\n                        return controller.data.reload();\r\n                    }\r\n                },\r\n                reload() {\r\n                    controller.webApi.get(controller.data.source)\r\n                        .then(controller.data.source.success, controller.data.source.error);\r\n                    return controller.data;\r\n\r\n                },\r\n                on(events, callback) {\r\n                    return $(controller.data).bind(\"2scLoad\", callback)[0]._triggerLoaded();\r\n                },\r\n                _triggerLoaded() {\r\n                    return controller.isLoaded\r\n                        ? $(controller.data).trigger(\"2scLoad\", [controller.data])[0]\r\n                        : controller.data;\r\n                },\r\n                one(events, callback) {\r\n                    if (!controller.isLoaded)\r\n                        return $(controller.data).one(\"2scLoad\", callback)[0];\r\n                    callback({}, controller.data);\r\n                    return controller.data;\r\n                }\r\n            } as SxcDataWithInternals,\r\n\r\n            id: id,\r\n            cbid: cbid,\r\n            cacheKey: cacheKey,\r\n            source: null,\r\n            isLoaded: false,\r\n            lastRefresh: null as Date,\r\n            manage: null as any, // initialize correctly later on\r\n\r\n            /**\r\n             * true/false if it's currently edit mode or not\r\n             */\r\n            isEditMode() {\r\n                return controller.manage && controller.manage._isEditMode();\r\n            },\r\n            recreate(resetCache: boolean): SxcInstanceWithInternals {\r\n                if (resetCache) delete $2sxc._controllers[cacheKey]; // clear cache\r\n                return <SxcInstanceWithInternals>$2sxc(controller.id, controller.cbid); // generate new\r\n            },\r\n            webApi: {\r\n                get(s, p?, d?, paf?) { return controller.webApi._action(s, p, d, paf, \"GET\"); },\r\n                post(s, p?, d?, paf?) { return controller.webApi._action(s, p, d, paf, \"POST\"); },\r\n                \"delete\"(s, p?, d?, paf?) { return controller.webApi._action(s, p, d, paf, \"DELETE\"); },\r\n                put(s, p?, d?, paf?) { return (controller.webApi as any)._action(s, p, d, paf, \"PUT\"); },\r\n                _action(settings: string | any, params, data, preventAutoFail, method) {\r\n\r\n                    // Url parameter: autoconvert a single value (instead of object of values) to an id=... parameter\r\n                    if (typeof params != \"object\" && typeof params != \"undefined\")\r\n                        params = { id: params };\r\n\r\n                    // If the first parameter is a string, resolve settings\r\n                    if (typeof settings == \"string\") {\r\n                        const controllerAction = settings.split(\"/\");\r\n                        const controllerName = controllerAction[0];\r\n                        const actionName = controllerAction[1];\r\n\r\n                        if (controllerName === \"\" || actionName === \"\")\r\n                            alert(\"Error: controller or action not defined. Will continue with likely errors.\");\r\n\r\n                        settings = {\r\n                            controller: controllerName,\r\n                            action: actionName,\r\n                            params: params,\r\n                            data: data,\r\n                            url: controllerAction.length > 2 ? settings : null,\r\n                            preventAutoFail: preventAutoFail\r\n                        };\r\n                    }\r\n\r\n                    const defaults = {\r\n                        method: method === null ? \"POST\" : method,\r\n                        params: null,\r\n                        preventAutoFail: false\r\n                    };\r\n                    settings = $.extend({}, defaults, settings);\r\n                    var sf = $.ServicesFramework(id);\r\n\r\n                    const promise = $.ajax({\r\n                        type: settings.method,\r\n                        dataType: settings.dataType || \"json\", // default is json if not specified\r\n                        async: true,\r\n                        data: JSON.stringify(settings.data),\r\n                        contentType: \"application/json\",\r\n                        url: controller.webApi.getActionUrl(settings),\r\n                        beforeSend(xhr) {\r\n                            xhr.setRequestHeader(\"ContentBlockId\", cbid);\r\n                            sf.setModuleHeaders(xhr);\r\n                        }\r\n                    });\r\n\r\n                    if (!settings.preventAutoFail)\r\n                        promise.fail(controller.showDetailedHttpError);\r\n\r\n                    return promise;\r\n                },\r\n                getActionUrl(settings: any): string {\r\n                    const sf = $.ServicesFramework(id);\r\n                    const base = (settings.url)\r\n                        ? controller.resolveServiceUrl(settings.url)\r\n                        : sf.getServiceRoot(\"2sxc\") + \"app/auto/api/\" + settings.controller + \"/\" + settings.action;\r\n                    return base + (settings.params === null ? \"\" : (\"?\" + $.param(settings.params)));\r\n                }\r\n            } as SxcWebApiWithInternals,\r\n\r\n            // Show a nice error with more infos around 2sxc\r\n            showDetailedHttpError(result: any): any {\r\n                if (window.console)\r\n                    console.log(result);\r\n\r\n                if (result.status === 404 &&\r\n                    result.config &&\r\n                    result.config.url &&\r\n                    result.config.url.indexOf(\"/dist/i18n/\") > -1) {\r\n                    if (window.console)\r\n                        console.log(\"just fyi: failed to load language resource; will have to use default\");\r\n                    return result;\r\n                }\r\n\r\n\r\n                // if it's an unspecified 0-error, it's probably not an error but a cancelled request, (happens when closing popups containing angularJS)\r\n                if (result.status === 0 || result.status === -1)\r\n                    return result;\r\n\r\n                // let's try to show good messages in most cases\r\n                let infoText = \"Had an error talking to the server (status \" + result.status + \").\";\r\n                const srvResp = result.responseText\r\n                    ? JSON.parse(result.responseText) // for jquery ajax errors\r\n                    : result.data; // for angular $http\r\n                if (srvResp) {\r\n                    const msg = srvResp.Message;\r\n                    if (msg) infoText += \"\\nMessage: \" + msg;\r\n                    const msgDet = srvResp.MessageDetail || srvResp.ExceptionMessage;\r\n                    if (msgDet) infoText += \"\\nDetail: \" + msgDet;\r\n\r\n\r\n                    if (msgDet && msgDet.indexOf(\"No action was found\") === 0)\r\n                        if (msgDet.indexOf(\"that matches the name\") > 0)\r\n                            infoText += \"\\n\\nTip from 2sxc: you probably got the action-name wrong in your JS.\";\r\n                        else if (msgDet.indexOf(\"that matches the request.\") > 0)\r\n                            infoText += \"\\n\\nTip from 2sxc: Seems like the parameters are the wrong amount or type.\";\r\n\r\n                    if (msg && msg.indexOf(\"Controller\") === 0 && msg.indexOf(\"not found\") > 0)\r\n                        infoText +=\r\n                            \"\\n\\nTip from 2sxc: you probably spelled the controller name wrong or forgot to remove the word 'controller' from the call in JS. To call a controller called 'DemoController' only use 'Demo'.\";\r\n\r\n                }\r\n                infoText += \"\\n\\nif you are an advanced user you can learn more about what went wrong - discover how on 2sxc.org/help?tag=debug\";\r\n                alert(infoText);\r\n\r\n                return result;\r\n            }\r\n        };//as SxcInstanceWithInternals;\r\n\r\n        // add manage property, but not within initializer, because inside the manage-initializer it may reference 2sxc again\r\n        try { // sometimes the manage can't be built, like before installing\r\n            controller.manage = null;\r\n            if ($2sxc._manage) $2sxc._manage.initInstance(controller);\r\n        } catch (e) {\r\n            throw e;\r\n        }\r\n\r\n        // this only works when manage exists (not installing) and translator exists too\r\n        if ($2sxc._translateInit && controller.manage) $2sxc._translateInit(controller.manage);    // init translate, not really nice, but ok for now\r\n\r\n        // Make sure back-reference to controller is set\r\n        // 2017-09-05 2dm: remove this, don't believe anybody is using this - leave comment till 2018, then remove completely\r\n        //controller.data.controller = controller;\r\n\r\n        return controller;\r\n    };\r\n\r\n    $2sxc._controllers = {} as any;\r\n    $2sxc.sysinfo = {\r\n        version: \"09.05.00\",\r\n        description: \"The 2sxc Controller object - read more about it on 2sxc.org\"\r\n    };\r\n\r\n    $2sxc.beta = {};\r\n    $2sxc._data = {};\r\n\r\n\r\n    // this creates a full-screen iframe-popup and provides a close-command to finish the dialog as needed\r\n    $2sxc.totalPopup = {\r\n        open(url: string, callback: Function):void {\r\n            // count parents to see how high the z-index needs to be\r\n            let z = 10000010, p = window; // Needs at least 10000000 to be on top of the DNN9 bar\r\n            while (p !== window.top && z < 10000100) {\r\n                z++;\r\n                p = p.parent;\r\n            }\r\n\r\n            const wrapper = document.createElement(\"div\");\r\n            wrapper.setAttribute(\"style\", \" top: 0;left: 0;width: 100%;height: 100%; position:fixed; z-index:\" + z);\r\n            document.body.appendChild(wrapper);\r\n\r\n            const ifrm = document.createElement(\"iframe\");\r\n            ifrm.setAttribute(\"allowtransparency\", \"true\");\r\n            ifrm.setAttribute(\"style\", \"top: 0;left: 0;width: 100%;height: 100%;\");\r\n            ifrm.setAttribute(\"src\", url);\r\n            wrapper.appendChild(ifrm);\r\n            document.body.className += \" sxc-popup-open\";\r\n            $2sxc.totalPopup.frame = ifrm;\r\n            $2sxc.totalPopup.callback = callback;\r\n        },\r\n        close(): void {\r\n            if ($2sxc.totalPopup.frame) {\r\n                document.body.className = document.body.className.replace(\"sxc-popup-open\", \"\");\r\n                const frm = $2sxc.totalPopup.frame;\r\n                frm.parentNode.parentNode.removeChild(frm.parentNode);\r\n                $2sxc.totalPopup.callback();\r\n            }\r\n        },\r\n        closeThis():void {\r\n            (window.parent as any).$2sxc.totalPopup.close();\r\n        },\r\n        frame: undefined,\r\n        callback: undefined\r\n    };\r\n\r\n    $2sxc.urlParams = {\r\n        get(name) {\r\n            // warning: this method is duplicated in 2 places - keep them in sync. \r\n            // locations are eav and 2sxc4ng \r\n            name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n            const searchRx = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\", \"i\");\r\n            let results = searchRx.exec(location.search),\r\n                strResult:string;\r\n\r\n            if (results === null) {\r\n                const hashRx = new RegExp(\"[#&]\" + name + \"=([^&#]*)\", \"i\");\r\n                results = hashRx.exec(location.hash);\r\n            }\r\n\r\n            // if nothing found, try normal URL because DNN places parameters in /key/value notation\r\n            if (results === null) {\r\n                // Otherwise try parts of the URL\r\n                const matches = window.location.pathname.match(new RegExp(\"/\" + name + \"/([^/]+)\", \"i\"));\r\n\r\n                // Check if we found anything, if we do find it, we must reverse the results so we get the \"last\" one in case there are multiple hits\r\n                if (matches && matches.length > 1)\r\n                    strResult = matches.reverse()[0];\r\n            } else\r\n                strResult = results[1];\r\n\r\n            return strResult === null || strResult === undefined ? \"\" : decodeURIComponent(strResult.replace(/\\+/g, \" \"));\r\n        },\r\n        require(name) {\r\n            const found = $2sxc.urlParams.get(name);\r\n            if (found === \"\") {\r\n                const message = `Required parameter (${name}) missing from url - cannot continue`;\r\n                alert(message);\r\n                throw message;\r\n            }\r\n            return found;\r\n        }\r\n    };\r\n\r\n    function autoFind(domElement:HTMLElement): SxcInstanceWithInternals {\r\n        const containerTag = $(domElement).closest(\".sc-content-block\")[0];\r\n        if (!containerTag) return null;\r\n        const iid = containerTag.getAttribute(\"data-cb-instance\"),\r\n            cbid = containerTag.getAttribute(\"data-cb-id\");\r\n        if (!iid || !cbid) return null;\r\n        return <SxcInstanceWithInternals>$2sxc(iid, cbid);\r\n    };\r\n\r\n    // note: I would like to remove this from $2sxc, but it's currently used both in the inpage-edit and in the dialogs\r\n    // debug state which is needed in various places\r\n    $2sxc.debug = {\r\n        load: ($2sxc.urlParams.get(\"debug\") === \"true\"),\r\n        uncache: $2sxc.urlParams.get(\"sxcver\")\r\n    };\r\n\r\n\r\n    // mini-helpers to manage 2sxc parts, a bit like a dependency loader which will optimize to load min/max depending on debug state\r\n    $2sxc.parts = {\r\n        getUrl(url:string, preventUnmin:boolean) {\r\n            let r = (preventUnmin || !$2sxc.debug.load) ? url : url.replace(\".min\", \"\"); // use min or not\r\n            if ($2sxc.debug.uncache && r.indexOf(\"sxcver\") === -1)\r\n                r = r + ((r.indexOf(\"?\") === -1) ? \"?\" : \"&\") + \"sxcver=\" + $2sxc.debug.uncache;\r\n            return r;\r\n        }\r\n    };\r\n})();\r\n// ReSharper restore InconsistentNaming\r\n\r\n"]}