{"version":3,"file":"2sxc.api.js","mappings":"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","sources":["webpack://2sic-2sxc-js-api/./src/Stats.ts","webpack://2sic-2sxc-js-api/./src/_/window.ts","webpack://2sic-2sxc-js-api/./src/cms/command-names.ts","webpack://2sic-2sxc-js-api/./src/cms/command-params-metadata.ts","webpack://2sic-2sxc-js-api/./src/cms/command-params.ts","webpack://2sic-2sxc-js-api/./src/cms/index.ts","webpack://2sic-2sxc-js-api/./src/cms/item-identifiers.ts","webpack://2sic-2sxc-js-api/./src/cms/run-params.ts","webpack://2sic-2sxc-js-api/./src/constants/index.ts","webpack://2sic-2sxc-js-api/./src/data/index.ts","webpack://2sic-2sxc-js-api/./src/data/metadata-for.ts","webpack://2sic-2sxc-js-api/./src/data/target-types.ts","webpack://2sic-2sxc-js-api/./src/environment/env-loader-dnn-sf.ts","webpack://2sic-2sxc-js-api/./src/environment/env-loader-dynamic.ts","webpack://2sic-2sxc-js-api/./src/environment/env-loader-meta.ts","webpack://2sic-2sxc-js-api/./src/environment/environment-specs.ts","webpack://2sic-2sxc-js-api/./src/environment/index.ts","webpack://2sic-2sxc-js-api/./src/environment/sxc-global-environment.ts","webpack://2sic-2sxc-js-api/./src/index.ts","webpack://2sic-2sxc-js-api/./src/sxc-global/context-identifier.ts","webpack://2sic-2sxc-js-api/./src/sxc-global/index.ts","webpack://2sic-2sxc-js-api/./src/sxc-global/sxc-global-bootstrap.ts","webpack://2sic-2sxc-js-api/./src/sxc-global/sxc-global-debug.ts","webpack://2sic-2sxc-js-api/./src/sxc-global/sxc-global-get.ts","webpack://2sic-2sxc-js-api/./src/sxc-global/sxc-global-http.ts","webpack://2sic-2sxc-js-api/./src/sxc-global/sxc-global-manage.ts","webpack://2sic-2sxc-js-api/./src/sxc-global/sxc-global.ts","webpack://2sic-2sxc-js-api/./src/sxc/data/sxc-data-service-base.ts","webpack://2sic-2sxc-js-api/./src/sxc/data/sxc-data.ts","webpack://2sic-2sxc-js-api/./src/sxc/data/sxc-query.ts","webpack://2sic-2sxc-js-api/./src/sxc/index.ts","webpack://2sic-2sxc-js-api/./src/sxc/sxc-cms.ts","webpack://2sic-2sxc-js-api/./src/sxc/sxc-manage.ts","webpack://2sic-2sxc-js-api/./src/sxc/sxc-part.ts","webpack://2sic-2sxc-js-api/./src/sxc/sxc.ts","webpack://2sic-2sxc-js-api/./src/sxc/web-api/ajax-promise.ts","webpack://2sic-2sxc-js-api/./src/sxc/web-api/ajax-settings.ts","webpack://2sic-2sxc-js-api/./src/sxc/web-api/sxc-web-api-deprecated.ts","webpack://2sic-2sxc-js-api/./src/sxc/web-api/sxc-web-api.ts","webpack://2sic-2sxc-js-api/./src/tools/index.ts","webpack://2sic-2sxc-js-api/./src/tools/obj2url.ts","webpack://2sic-2sxc-js-api/./src/tools/total-popup.ts","webpack://2sic-2sxc-js-api/./src/tools/url-params.ts","webpack://2sic-2sxc-js-api/../core/constants/index.ts","webpack://2sic-2sxc-js-api/../core/index.ts","webpack://2sic-2sxc-js-api/../core/logging/Log.ts","webpack://2sic-2sxc-js-api/../core/logging/entry.ts","webpack://2sic-2sxc-js-api/../core/logging/has-log.ts","webpack://2sic-2sxc-js-api/../core/logging/index.ts","webpack://2sic-2sxc-js-api/../core/logging/insights.ts","webpack://2sic-2sxc-js-api/../core/logging/log-call.ts","webpack://2sic-2sxc-js-api/../core/logging/log-entry-options.ts","webpack://2sic-2sxc-js-api/../core/plumbing/index.ts","webpack://2sic-2sxc-js-api/../core/plumbing/no-jquery.ts","webpack://2sic-2sxc-js-api/../core/plumbing/obj.ts","webpack://2sic-2sxc-js-api/../core/plumbing/type-value.ts","webpack://2sic-2sxc-js-api/../core/plumbing/url.ts","webpack://2sic-2sxc-js-api/webpack/bootstrap","webpack://2sic-2sxc-js-api/webpack/runtime/define property getters","webpack://2sic-2sxc-js-api/webpack/runtime/hasOwnProperty shorthand","webpack://2sic-2sxc-js-api/webpack/runtime/make namespace object","webpack://2sic-2sxc-js-api/./src/2sxc.api.ts"],"sourcesContent":["/** @internal */\r\nexport class Stats {\r\n    watchDomChanges = 0;\r\n}\r\n","import { SxcGlobal } from '../sxc-global';\r\n\r\n/**\r\n * export interface WindowInternal extends\r\n * @public\r\n */\r\ndeclare global {\r\n  interface Window {\r\n      /**\r\n       * The global $2sxc object / function to generate Sxc instances\r\n       */\r\n      $2sxc: SxcGlobal;\r\n\r\n      /** @internal */\r\n      $: any & DnnJQueryExtensions;\r\n  }\r\n\r\n  /**\r\n   * The global $2sxc object / function to generate Sxc instances\r\n   */\r\n  const $2sxc: SxcGlobal;\r\n}\r\n\r\n/** @internal */\r\ninterface DnnJQueryExtensions {\r\n    /** the generator for the DNN ServicesFramework */\r\n    dnnSF: (id?: number) => any;\r\n    /** The DNN Services Framework */\r\n    ServicesFramework: (id: number) => any;\r\n}","// Documentation notes\r\n//\r\n// You cannot use @see in the docs, it doesn't work with docFx\r\n// Instead, always use [text](xref:Api.Js.SxcJs.CommandNames)\r\n// or similar\r\n//\r\n// End documentation notes\r\n\r\n\r\n/**\r\n * Names of commands known to 2sxc CMS - for use in toolbars and calling commands directly from code\r\n * @public\r\n */\r\n// IMPORTANT: this must be a `const enum`, otherwise it won't work in d.ts files\r\nexport const enum CommandNames {\r\n    /**\r\n     * `add` adds another demo-item to a **list of items**.\r\n     * It does not open the edit-dialog.\r\n     * <br> The new item is placed after the item the (+) was clicked on.\r\n     * <br>💡\r\n     * This is different than new, which opens a dialog to add something. \r\n     * <br> 🪜 Only appears on toolbars of items which are in a list.\r\n     * <br> 📩 [Parameters](xref:Api.Js.SxcJs.CommandAddParams)\r\n     */\r\n    add = 'add',\r\n\r\n    /**\r\n     * `add-existing` opens a dialog allowing the user to select an existing item to add to a **list of items**.\r\n     * <br> The new item is placed after the item the (+) was clicked on.\r\n     * <br> 🪜 Only appears on toolbars of items which are in a list.\r\n     * <br> 📩 [Parameters](xref:Api.Js.SxcJs.CommandAddExistingParams)\r\n     * <br> 🆕 in v11.01\r\n     */\r\n    addExisting = 'add-existing',\r\n\r\n    /**\r\n     * `app` opens the app-admin dialog\r\n     * <br> 🔐 Toolbar shows this automatically to elevated admins.\r\n     * <br> 📩 No params required,\r\n     * (auto-detected from context)\r\n     */\r\n    app = 'app',\r\n\r\n    /**\r\n     * `app-import` opens the dialog to import an App.\r\n     * <br> 🔘 This is not available on the toolbar.\r\n     * <br> 📩 No params required,\r\n     * (auto-detected from context)\r\n     */\r\n    appImport = 'app-import',\r\n\r\n    /**\r\n     * `app-resources` opens the edit dialog for app-resources (multi-language texts, labels etc.).\r\n     * <br> 🔘 It's disabled on the toolbar if the app doesn't have resource-values to configure.\r\n     * <br> 🔐 Toolbar shows this automatically to elevated admins.\r\n     * <br> 📩 No params required,\r\n     * (auto-detected from context)\r\n     */\r\n    appResources = 'app-resources',\r\n\r\n    /**\r\n     * `app-settings` opens the edit dialog for the app-settings.\r\n     * <br> 🔘 It's disabled on the toolbar if the app doesn't have setting-values to configure\r\n     * <br> 🔐 Toolbar shows this automatically to elevated admins.\r\n     * <br> 📩 No params required,\r\n     * (auto-detected from context)\r\n     */\r\n    appSettings = 'app-settings',\r\n\r\n    /**\r\n     * `apps` opens the manage all apps dialog.\r\n     * <br> 🔐 Toolbar shows this automatically to elevated admins.\r\n     * <br> 📩 No params required,\r\n     * (auto-detected based on toolbar)\r\n     */\r\n    apps = 'apps',\r\n\r\n    /**\r\n     * `data` opens the list to manage all items of a specific content-type.\r\n     * <br> 🔘 Will use the settings of the current template to open.\r\n     * It is only shown to elevated admins.\r\n     * <br> 📩 [Parameters](xref:Api.Js.SxcJs.CommandDataParams)\r\n     */\r\n    data = 'data',\r\n\r\n    /**\r\n     * old name\r\n     * @internal\r\n     */\r\n    data_old_contentItems = 'contentitems',\r\n\r\n    /**\r\n     * `fields` opens the dialog to view or modify fields of a content-type.\r\n     * <br> 🔘 On a toolbar it will use the content-type of the current item.\r\n     * <br> 🔐 Toolbar shows this automatically to elevated admins.\r\n     * <br> 📩 [Parameters](xref:Api.Js.SxcJs.CommandContentTypeParams)\r\n     */\r\n    fields = 'fields',\r\n\r\n    /**\r\n     * old name\r\n     * @internal\r\n     */\r\n    fields_old_contenttype = 'contenttype',\r\n\r\n\r\n    /**\r\n     * `copy` opens the edit-dialog for the current item in copy-mode, so when saving it will be a new item.\r\n     * <br> 📩 [Parameters](xref:Api.Js.SxcJs.CommandCopyParams)\r\n     * <br> 🆕 in v14.03\r\n     */\r\n    copy = 'copy',\r\n\r\n    /**\r\n     * `code` will execute custom javascript.\r\n     * <br> 🔘 This is mainly for toolbars, to add buttons with custom code.\r\n     * <br> 📩 [Parameters](xref:Api.Js.SxcJs.CommandCodeParams)\r\n     * <br> _this used to be called `custom` and had a different setup_\r\n     */\r\n    code = 'code',\r\n\r\n    /**\r\n     * old name\r\n     * @internal\r\n     */\r\n    code_old_custom = 'custom',\r\n\r\n    /**\r\n     * `delete` will delete (not just remove) a content-item.\r\n     * <br> 💡 This is similar to `remove` but really deletes the data from the DB.\r\n     * <br> 🔘 It only appears if the toolbar explicitly asks for it.\r\n     * <br> 📩 [Parameters](xref:Api.Js.SxcJs.CommandDeleteParams)\r\n     * (auto-detected from context)\r\n     */\r\n    delete = 'delete',\r\n\r\n    /**\r\n     * `edit` opens an edit-dialog.\r\n     * <br>\r\n     * In scenarios where the page is currently showing a _demo item_, this will have the same effect as `add`.\r\n     * So instead of editing the _demo item_ it would trigger a dialog to add a new item. \r\n     * <br> 🔘 Only appears if `entityId` is known or item is in a list.\r\n     * <br> 📩 Parameters either one of these: \r\n     * [Id](xref:Api.Js.SxcJs.CommandParamsEntityById),\r\n     * [In Block](xref:Api.Js.SxcJs.CommandParamsEntityInContentBlock),\r\n     * [In List](xref:Api.Js.SxcJs.CommandParamsEntityInList)\r\n     * (auto-detected from context)\r\n     */\r\n    edit = 'edit',\r\n\r\n    /**\r\n     * `image` opens the edit-dialog for the metadata of the current image\r\n     * @internal - may be removed soon\r\n     */\r\n    image = 'image',\r\n\r\n    /**\r\n     * `insights` opens the insights logs page\r\n     * <br> 🔐 Toolbar shows this automatically to elevated admins.\r\n     * <br> 📩 No params required.\r\n     */\r\n    insights = 'insights',\r\n\r\n    /**\r\n     * old name\r\n     * @internal\r\n     */\r\n    insights_old_server = 'insights-server',\r\n\r\n    /**\r\n     * `instance-list` opens a dialog to manually re-order **items in a list**.\r\n     * <br> 🪜 Only appears on toolbars of items which are in a list.\r\n     * <br> 📩 No params required,\r\n     * (auto-detected from context)\r\n     */\r\n    list = 'list',\r\n\r\n    /**\r\n     * old name\r\n     * @internal\r\n     */\r\n    list_old_instanceList = 'instance-list',\r\n\r\n\r\n    /**\r\n     * `layout` opens the in-page dialog to change the layout of the current content.\r\n     * <br> 📩 No params required,\r\n     * (auto-detected from context)\r\n     */\r\n    layout = 'layout',\r\n\r\n    /**\r\n     * `metadata` opens the edit-dialog for the current metadata item.\r\n     * <br> 🔘 It only appears if the toolbar explicitly asks for it.\r\n     * <br> 📩 [Parameters](xref:Api.Js.SxcJs.CommandMetadataParams)\r\n     */\r\n    metadata = 'metadata',\r\n\r\n    /**\r\n     * `more` create a \"…\" (ellipsis) button which flips through the button groups of toolbars\r\n     * <br> 🔘 It only appears if the toolbar has `more`=`auto` and has multiple groups.\r\n     * <br> 📩 No params required, \r\n     * (auto-detected based on toolbar)\r\n     */\r\n    more = 'more',\r\n\r\n    /**\r\n     * `movedown` moves a content-item down one position in a **list of items**.\r\n     * <br> 🪜 Only appears on toolbars of items which are in a list.\r\n     * <br> 📩 Parameters either one of these: \r\n     * [In Block](xref:Api.Js.SxcJs.CommandParamsEntityInContentBlock),\r\n     * [In List](xref:Api.Js.SxcJs.CommandParamsEntityInList)\r\n     * (auto-detected from context)\r\n     */\r\n    moveDown = 'movedown',\r\n\r\n    /**\r\n     * `moveup` moves a content-item up one position in a **list of items**.\r\n     * <br> 🪜 Only appears on toolbars of items which are in a list.\r\n     * <br> 📩 Parameters either one of these: \r\n     * [In Block](xref:Api.Js.SxcJs.CommandParamsEntityInContentBlock),\r\n     * [In List](xref:Api.Js.SxcJs.CommandParamsEntityInList)\r\n     * (auto-detected from context)\r\n     */\r\n    moveUp = 'moveup',\r\n\r\n    /**\r\n     * `new` opens the edit-dialog to create a new item/entity.\r\n     * <br>\r\n     * If the previous item is in a list, it will add it to that list _after_ the previous item with the toolbar. \r\n     * Otherwise it just creates it and the visualization will differ depending on the App.\r\n     * <br> 🪜 It works differently for lists - in which case it also adds it to the list. \r\n     * <br> 📩 [Parameters](xref:Api.Js.SxcJs.CommandNewParams)\r\n     * (usually auto-detected from context)\r\n     */\r\n    new = 'new',\r\n\r\n    /**\r\n     * `new` sets new mode used in parameters\r\n     * @internal - must move, this shouldn't be here as it's not a command!\r\n     */\r\n    newMode = 'new',\r\n\r\n    /**\r\n     * `publish` tells the system to update a content-items status to published. If there was a published and a draft before, the draft will replace the previous item\r\n     * <br> 🔘 Appears automatically if the item is in draft mode / not published.\r\n     * <br> 📩 Parameters either one of these: \r\n     * [Id](xref:Api.Js.SxcJs.CommandParamsEntityById),\r\n     * [In Block](xref:Api.Js.SxcJs.CommandParamsEntityInContentBlock),\r\n     * [In List](xref:Api.Js.SxcJs.CommandParamsEntityInList)\r\n     * (auto-detected from context)\r\n     */\r\n    publish = 'publish',\r\n\r\n    /**\r\n     * `remove` removes an item from a list of items.\r\n     * <br> 🪜 Only appears on toolbars of items which are in a list.\r\n     * <br> 📩 [Parameters](xref:Api.Js.SxcJs.CommandParamsEntityInList)\r\n     * (auto-detected from context)\r\n     */\r\n    remove = 'remove',\r\n\r\n    /**\r\n     * `replace` opens the dialog to assign a different content-item in this slot on module-assigned content items\r\n     * <br> 📩 [Parameters](xref:Api.Js.SxcJs.CommandParamsEntityInList)\r\n     * (auto-detected from context)\r\n     */\r\n    replace = 'replace',\r\n\r\n    /**\r\n     * `template-develop` opens the template-editor dialog in a new window.\r\n     * <br> 🔐 Toolbar shows this automatically to elevated admins.\r\n     * <br> 📩 No params required,\r\n     * (auto-detected from context)\r\n     */\r\n    template = 'template',\r\n\r\n    /**\r\n     * old name\r\n     * @internal\r\n     */\r\n    template_old_develop = 'template-develop',\r\n\r\n\r\n    /**\r\n     * `template-query` opens the pipeline/query-designer in a new window.\r\n     * <br> 🔘 It's not available on the simple Content App, only on full Apps.\r\n     * It is disabled if no query is configured. \r\n     * <br> 🔐 Toolbar shows this automatically to elevated admins.\r\n     * <br> 📩 No params required,\r\n     * (auto-detected from context)\r\n     */\r\n    query = 'query',\r\n\r\n    /**\r\n     * old name\r\n     * @internal\r\n     */\r\n    query_old_templateQuery = 'template-query',\r\n    \r\n    /**\r\n     * `template-settings` will change settings on the template currently used\r\n     * <br> 🔐 Toolbar shows this automatically to elevated admins.\r\n     */\r\n    view = 'view',\r\n\r\n    /**\r\n     * old name\r\n     * @internal\r\n     */\r\n    view_old_templateSettings = 'template-settings',\r\n\r\n    /**\r\n     * `system` opens the system dialog for this zone/site.\r\n     * <br> 🔐 Toolbar shows this automatically to elevated admins.\r\n     * <br> 📩 No params required,\r\n     * (auto-detected from context)\r\n     */\r\n    system = 'system',\r\n\r\n    /**\r\n     * old name\r\n     * @internal\r\n     */\r\n    system_old_zone = 'zone',\r\n}\r\n\r\n\r\n// Experimental\r\n// Goal is to probably split the command names\r\n// and then make a new CommandNames which merges all the previous ones\r\n// type All = CommandNames | CommandNamesEdit;","import { MetadataTargetTypes } from '../data';\r\n\r\n/**\r\n * Parameters on `metadata` for commands which have a metadata-target. \r\n * @public\r\n */\r\nexport interface CommandParamsMetadata {\r\n    /** \r\n     * The key which identifies the target of this metadata item\r\n     */\r\n    key: string;\r\n\r\n    /**\r\n     * the key type, will default to 'string'\r\n     */\r\n    keyType?: string;\r\n\r\n    /**\r\n     * The target type, will default to 10 = CMS-Item\r\n     */\r\n    targetType?: MetadataTargetTypes;\r\n}\r\n","import { CommandNames, ItemIdentifierGroup, ItemIdentifierSimple, CommandParamsMetadata } from '.';\r\nimport { TypeValue } from '../../../inpage/src/plumbing';\r\n\r\n/**\r\n * Command parameters are handed over to a command for execution.\r\n * It contains all possible combinations of parameters that can be used in a command. \r\n * \r\n * We will try to improve how this is documented, but ATM it just has all parameters, \r\n * even though you may need none, or just a few. \r\n * \r\n * _Note: For your specific commands, you can also pass other parameters._\r\n * \r\n * **Important for the docs**\r\n * \r\n * Most properties are actually not visible (you will get them in the types though).\r\n * So actually you will usually create one of these:\r\n * * [](xref:Api.Js.SxcJs.CommandParamsEntityById)\r\n * * [](xref:Api.Js.SxcJs.CommandParamsEntityInContentBlock)\r\n * * [](xref:Api.Js.SxcJs.CommandParamsEntityInList)\r\n * * [](xref:Api.Js.SxcJs.CommandAddParams)\r\n * * [](xref:Api.Js.SxcJs.CommandAddExistingParams)\r\n * * [](xref:Api.Js.SxcJs.CommandDataParams)\r\n * * [](xref:Api.Js.SxcJs.CommandCopyParams)\r\n * * [](xref:Api.Js.SxcJs.CommandCodeParams)\r\n * * [](xref:Api.Js.SxcJs.CommandDeleteParams)\r\n * * [](xref:Api.Js.SxcJs.CommandMetadataParams)\r\n * * [](xref:Api.Js.SxcJs.CommandNewParams)\r\n * \r\n * Because of this, most of the properties below are NOT documented, as their purpose can change depending on the command used. \r\n * @public\r\n */\r\nexport interface CommandParams extends Record<string, unknown>\r\n  // We cannot extend from the real parameters, because this won't make it into the documentation\r\n  // extends Partial<CommandParamsEntityById>, Partial<CommandParamsEntity>\r\n  {\r\n    /** \r\n     * The action is used in scenarios where the command name must be included\r\n     * @internal - wait with publishing this, it shouldn't actually be here. we may need to create another type which includes it\r\n     */\r\n    action?: CommandNames;\r\n\r\n    /** @internal */\r\n    items?: Array<ItemIdentifierSimple | ItemIdentifierGroup>;\r\n\r\n    /** \r\n     * Special change of dialogs, for example to change the edit-dialog into a new-dialog. \r\n     * @internal - not sure how this matches / replaces dialog, probably internal only\r\n     */\r\n    mode?: string;\r\n\r\n    // both contentType and contentTypeName were used historically, so both variations may exist in Razor templaets\r\n    /** \r\n     * The purpose of this varies by [Command](xref:Api.Js.SxcJs.CommandNames).\r\n     * @public\r\n     */\r\n    contentType?: string;\r\n    /** @internal old */\r\n    contentTypeName?: string;\r\n\r\n    /** @internal */\r\n    pipelineId?: number;\r\n    /** \r\n     * The purpose of this varies by [Command](xref:Api.Js.SxcJs.CommandNames).\r\n     * @public\r\n     */\r\n    filters?: string;\r\n    /** @internal */\r\n    dialog?: string;\r\n\r\n    /** \r\n     * @internal \r\n     * @deprecated but still in use\r\n     */\r\n    sortOrder?: number;\r\n\r\n    /** \r\n     * The purpose of this varies by [Command](xref:Api.Js.SxcJs.CommandNames).\r\n     * @public\r\n     */\r\n    index?: number;\r\n\r\n    /** \r\n     * The purpose of this varies by [Command](xref:Api.Js.SxcJs.CommandNames).\r\n     * @public\r\n     */\r\n    entityId?: number;\r\n\r\n    /** \r\n     * The purpose of this varies by [Command](xref:Api.Js.SxcJs.CommandNames).\r\n     * @public\r\n     */\r\n    entityGuid?: string;\r\n\r\n    /** \r\n     * The purpose of this varies by [Command](xref:Api.Js.SxcJs.CommandNames).\r\n     * @public\r\n     */\r\n    entityTitle?: string;\r\n\r\n    /** \r\n     * The purpose of this varies by [Command](xref:Api.Js.SxcJs.CommandNames).\r\n     * @public\r\n     */\r\n    title?: string;\r\n\r\n    /** \r\n     * The purpose of this varies by [Command](xref:Api.Js.SxcJs.CommandNames).\r\n     * @public\r\n     */\r\n    useModuleList?: true;\r\n\r\n    /** \r\n     * The purpose of this varies by [Command](xref:Api.Js.SxcJs.CommandNames).\r\n     * @public\r\n     */\r\n    metadata?: CommandParamsMetadata;\r\n\r\n    /** @internal */\r\n    isPublished?: boolean;\r\n\r\n    /** \r\n     * The purpose of this varies by [Command](xref:Api.Js.SxcJs.CommandNames).\r\n     * @public\r\n     */\r\n    prefill?: Record<string, boolean | string | number | Date>;\r\n\r\n    /**\r\n     * Custom Code in the previous V9 standard\r\n     * @internal\r\n     */\r\n    customCode?: string;\r\n\r\n    /** \r\n     * The purpose of this varies by [Command](xref:Api.Js.SxcJs.CommandNames).\r\n     * @public\r\n     */\r\n    call?: string;\r\n\r\n\r\n    /**\r\n     * New in 10.27 - list of apps for the quick dialog\r\n     * @internal\r\n     */\r\n    apps?: string;\r\n\r\n    /** \r\n     * The purpose of this varies by [Command](xref:Api.Js.SxcJs.CommandNames).\r\n     * @public\r\n     */\r\n    parent?: string;\r\n    /** \r\n     * The purpose of this varies by [Command](xref:Api.Js.SxcJs.CommandNames).\r\n     * @public\r\n     */\r\n    fields?: string;\r\n\r\n    /**\r\n     * for template edit dialog \r\n     * @internal\r\n     */\r\n    isshared?: boolean;\r\n}\r\n","\r\nexport * from './command-params';\r\nexport * from './command-names';\r\nexport * from './item-identifiers';\r\nexport * from './command-params-metadata';\r\nexport * from './run-params';\r\n","import { CommandParamsMetadata } from '.';\r\nimport { TypeValue } from '../../../inpage/src/plumbing';\r\n\r\n// NOTE: THESE ITEM IDENTIFIERS SHOULD PROBABLY ALWAYS REMAIN INTERNAL\r\n// As we need the flexibility to change them, without breaking public APIs\r\n\r\n/**\r\n * Shared properties of all item identifiers\r\n * @internal\r\n */\r\ninterface ItemIdentifierShared {\r\n  EntityId?: number;\r\n  Prefill?: Record<string, TypeValue>;\r\n}\r\n\r\n/**\r\n * Simple identifier, which is id/type-name\r\n * @internal\r\n */\r\nexport interface ItemIdentifierSimple {\r\n  EntityId: number;\r\n  ContentTypeName?: string;\r\n  Metadata?: CommandParamsMetadata;\r\n  Prefill?: Record<string, TypeValue>;\r\n}\r\n\r\n/**\r\n * Simple identifier, which is id/type-name\r\n * @internal\r\n * WAIT with publishing, we'll probably change the duplicate-entity to a bool instead of an id\r\n */\r\nexport interface ItemIdentifierCopy extends ItemIdentifierShared {\r\n  DuplicateEntity: number;\r\n  ContentTypeName?: string;\r\n}\r\n\r\n/**\r\n * Group identifier\r\n * @internal\r\n * TODO: KEEP INTERNAL, PROBABLY RENAME \"Part\" to \"Field\" or something in the whole chain\r\n * TODO: MAY BE replaced completely with ItemIdentifierInField, as it has the same purpose\r\n */\r\nexport interface ItemIdentifierParent {\r\n  /** The parent entity GUID - in these cases usually the ContentBlock */\r\n  Guid: string;\r\n\r\n  /** The part of the parent it's in, kind of the \"Field\" - should be renamed to Field ASAP */\r\n  Part?: string;\r\n\r\n  /** The index position within that field/part */\r\n  Index: number;\r\n\r\n  /** Whether to add the item - alternative is just to leave it, if it already existed */\r\n  Add: boolean;\r\n}\r\n\r\n/**\r\n * Experimental in 10.27\r\n * @internal\r\n */\r\nexport interface ItemIdentifierInField extends ItemIdentifierSimple {\r\n  Parent?: string;\r\n  Field?: string;\r\n  Add?: boolean;\r\n}\r\n\r\n/**\r\n * Template Identifier for telling the code-editor about this template\r\n * @internal\r\n */\r\nexport interface TemplateIdentifier {\r\n  /** The entity Id of the View-configuration which points to the template file */\r\n  EntityId: number;\r\n\r\n  /** The template edition (kind of a path) - to ensure code-editor can find the right one */\r\n  Edition?: string;\r\n\r\n  /** The template path */\r\n  Path?: string;\r\n}\r\n\r\n/**\r\n * Complex identifier using a group\r\n * @internal\r\n */\r\nexport interface ItemIdentifierGroup extends ItemIdentifierShared {\r\n  Group: ItemIdentifierParent;\r\n}\r\n\r\n","import { ContextIdentifier, Sxc } from '..';\r\nimport { CommandNames } from './command-names';\r\nimport { CommandParams } from './command-params';\r\n\r\n/**\r\n * Parameters for the Instance sxc.cms.run(...) command.\r\n * New in 13.03\r\n */\r\nexport interface RunParams {\r\n  /**\r\n   * The action to perform.\r\n   * Required.\r\n   */\r\n  // ATM actually required if you don't have params which themselves have the action, but we plan to change that it's always on this\r\n  action?: CommandNames;\r\n\r\n  /**\r\n   * The command params, like contentType, entityId etc.\r\n   * Optional for many actions.\r\n   */\r\n  params?: CommandParams;\r\n\r\n  /**\r\n   * The event which triggered this command - sometimes useful internally further use.\r\n   * Optional in most cases, but in some cases it will improve the behavior of the code.\r\n   */\r\n  event?: MouseEvent;\r\n\r\n  /**\r\n   * Workflows work the same way as with a toolbar, except that they are added here and not registered on init.\r\n   * Because of limitations in automatic documentation, the type here is set to `unknown` but it's actually `WorkflowStep` | `WorkflowStep[]`\r\n   */\r\n  workflows?: unknown;\r\n}\r\n\r\n/**\r\n * Parameters for the **Global** $2sxc.cms.run(...) command in Addition to the [RunParams](xref:Api.Js.SxcJs.RunParams).\r\n * It provides context to the run-params such as a Sxc instance or a tag which it started on.\r\n * New in 12.10\r\n * @public\r\n */\r\nexport interface RunParamsWithContext extends RunParams {\r\n  /**\r\n   * The tag on which the run was triggered - it's used to give the command a context to start from\r\n   * We always need the tag OR the context, but never both\r\n   */\r\n  tag?: HTMLElement;\r\n\r\n  /**\r\n   * The context to run in, basically containing module id, etc.\r\n   * We always need the tag OR the context, but never both\r\n   */\r\n  context?: Sxc | ContextIdentifier;\r\n}\r\n","\r\n/**\r\n * This is a placeholder in the settings, which must be replaced with \"2sxc\" or another term for other dnn extensions\r\n * @internal\r\n */\r\nexport const ApiExtensionPlaceholder = 'e.x.t';\r\n\r\n/**\r\n * The special header meta tag containing settings for 2sxc\r\n * @internal\r\n */\r\nexport const MetaHeaderJsApi = '_jsApi';\r\n\r\n/**\r\n * The fallback path to the UI\r\n * @internal\r\n */\r\nexport const DnnUiRoot = '/desktopmodules/tosic_sexycontent/';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const PlatformOqtane = 'oqtane';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const PlatformDnn = 'dnn';\r\n\r\n/**\r\n * The fallback AntiForgery token header name (as in Dnn)\r\n * @internal\r\n */\r\nexport const AntiForgeryTokenHeaderNameDnn = 'RequestVerificationToken';\r\n","\r\nexport * from './target-types';\r\nexport * from './metadata-for';","import { MetadataTargetTypes } from './target-types';\r\n/** \r\n * A Metadata-Target identifier to tell an entity that it describes something else.\r\n * \r\n * Usually used in Sxc instances with the [Data Service](xref:Api.Js.SxcJs.SxcData)\r\n * \r\n * Warning: There is another MetadataFor type and they are not fully consistent. \r\n * This is historical and not easy to correct, but we're working on it. \r\n * @public\r\n */\r\nexport interface MetadataFor {\r\n  /**\r\n   * The target type identifier \r\n   * - TODO: @2dm - THIS SHOULD probably be number only\r\n   */\r\n  Target: string | MetadataTargetTypes;\r\n\r\n  /**\r\n   * The number of the target, if it's identified by a number.\r\n   */\r\n  Number?: number;\r\n\r\n  /**\r\n   * The string-id of the target, if it's identified by a string.\r\n   */\r\n  String?: string;\r\n\r\n  /**\r\n   * The GUID of the target, if it's identified by a GUID.\r\n   */\r\n  Guid?: string;\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  Singleton?: boolean;\r\n}\r\n  ","/**\r\n * Metadata Target Types\r\n * \r\n * These are constants to determine what something is assigned to (e.g. it describes an Entity, a file, etc.)\r\n * \r\n * Use it for the @see MetadataFor objects\r\n * @public\r\n */\r\nexport enum MetadataTargetTypes {\r\n  /** \r\n   * Undefined Type (0) - included for completeness.\r\n   * Not usually used, actually None (1) is the default\r\n   */\r\n  Undefined = 0,\r\n\r\n  /** \r\n   * Things that are not used as Metadata (1). This is the default for most Entities.\r\n   */\r\n  None = 1,\r\n\r\n  /** \r\n   * Metadata of attributes / fields (2). This is used to store configuration like the field label, amount-of-rows, etc.\r\n   * Remarks = \r\n   * The key is always a number (int) pointing to the Attribute ID in the DB.\r\n   */\r\n  Attribute = 2,\r\n\r\n  /** \r\n   * App metadata (3). Used to give Apps additional properties. \r\n   * Remarks = \r\n   * The key should always be an int ID of the App.\r\n   */\r\n  App = 3,\r\n\r\n  /** \r\n   * Metadata of entities / data-items (4). \r\n   * This lets us enhance entities with additional information. \r\n   * Remarks = \r\n   * The Key should always be a GUID\r\n   */\r\n  Entity = 4,\r\n\r\n  /** \r\n   * Metadata of a content-type / data-schema (5). Used to give it a description etc. \r\n  */\r\n  ContentType = 5,\r\n\r\n  /** \r\n   * Zone metadata (6) - used to give a Zone additional information. \r\n   * Only used in very special cases, best not use.\r\n   */\r\n  Zone = 6,\r\n\r\n  /** \r\n   * Item / Object of the Platform, like a File or Folder etc. (10)\r\n   * Remarks = \r\n   * * The key is usually a string to further specify what it's describing, like \"file:72\"\r\n   * * The text equivalent is CmsObject\r\n   */\r\n  CmsItem = 10,\r\n\r\n  /** \r\n   * The entire system / platform - so Metadata for the current Dnn/Oqtane installation (11).\r\n   * Remarks = \r\n   * This is not in use as of now, just added for completeness sakes.\r\n   * New in v13\r\n   */\r\n  System = 11,\r\n\r\n  /** \r\n   * A Site - like the current site (12)\r\n   * Remarks = New in v13</remarks>\r\n   */\r\n  Site = 12,\r\n\r\n  /** \r\n   * A Site - like the current site (13)\r\n   * Remarks = New in v13 / beta</remarks>\r\n   */\r\n  // [PrivateApi]\r\n  SiteVariant = 13,\r\n\r\n  /** \r\n   * A Page - like the current page (14)\r\n   * Remarks = New in v13</remarks>\r\n   */\r\n  Page = 14,\r\n\r\n  /** \r\n   * A Page - like the current page (15) \r\n   * Remarks = New in v13 / beta</remarks>\r\n   */\r\n  // [PrivateApi]\r\n  PageVariant = 15,\r\n\r\n  /** \r\n   * A Module - like a module containing some content (16) \r\n   * Remarks = New in v13</remarks>\r\n   */\r\n  Module = 16,\r\n\r\n  /** \r\n   * A Module - like a module containing some content (17)\r\n   * Remarks = New in v13 / beta</remarks>\r\n   */\r\n  // [PrivateApi]\r\n  ModuleVariant = 17,\r\n\r\n  /** \r\n   * A User - like the admin-user (18)\r\n   * Remarks = New in v13</remarks>\r\n   */\r\n  User = 18,\r\n\r\n  /** Custom target (90). This is what you should use for basic apps which have a custom target that's none of the other defaults. */\r\n  Custom = 90,\r\n\r\n  /** Custom target (91). Use this for basic apps which need multiple different custom targets (advanced, rare use case) */\r\n  Custom1 = 91,\r\n  /** Custom target (92). Use this for basic apps which need multiple different custom targets (advanced, rare use case) */\r\n  Custom2 = 92,\r\n  /** Custom target (93). Use this for basic apps which need multiple different custom targets (advanced, rare use case) */\r\n  Custom3 = 93,\r\n  /** Custom target (94). Use this for basic apps which need multiple different custom targets (advanced, rare use case) */\r\n  Custom4 = 94,\r\n  /** Custom target (95). Use this for basic apps which need multiple different custom targets (advanced, rare use case) */\r\n  Custom5 = 95,\r\n  /** Custom target (96). Use this for basic apps which need multiple different custom targets (advanced, rare use case) */\r\n  Custom6 = 96,\r\n  /** Custom target (97). Use this for basic apps which need multiple different custom targets (advanced, rare use case) */\r\n  Custom7 = 97,\r\n  /** Custom target (98). Use this for basic apps which need multiple different custom targets (advanced, rare use case) */\r\n  Custom8 = 98,\r\n  /** Custom target (99). Use this for basic apps which need multiple different custom targets (advanced, rare use case) */\r\n  Custom9 = 99,\r\n}\r\n","import { SxcGlobalEnvironment } from '.';\r\nimport { HasLog, NoJQ } from '../../../core';\r\nimport { EnvironmentSpecs } from '..';\r\nimport { AntiForgeryTokenHeaderNameDnn, DnnUiRoot, PlatformDnn } from '../constants';\r\n\r\nconst helpAutoDetect = 'You must either include jQuery on the page or inject the jsApi parameters to prevent auto-detection.';\r\ndeclare const window: Window;\r\n\r\n/**\r\n * This helps load environment information from DNN ServicesFramework - it's a fallback in case the other mechanisms fail\r\n * @internal\r\n */\r\nexport class EnvironmentDnnSfLoader extends HasLog {\r\n    constructor(public env: SxcGlobalEnvironment) {\r\n        super('Env.DnnLdr', env.log);\r\n    }\r\n\r\n\r\n    /**\r\n     * This will assume the new parameter injection failed and it will attempt to fallback\r\n     * it's for backward compatibility, in case something is using $2sxc and doesn't provide the new\r\n     * implementation\r\n     */\r\n    dnnSfFallback(): void {\r\n        const cl = this.log.call('dnnSfFallback');\r\n        // await page-ready to then initialize the stuff\r\n        NoJQ.ready(() => this.dnnSfLoadWhenDocumentReady());\r\n        cl.done('started dom-ready watcher')\r\n    }\r\n\r\n    private dnnSfLoadWhenDocumentReady(): void {\r\n        const cl = this.log.call('dnnSfLoadWhenDocumentReady');\r\n        if (typeof window.$ === 'undefined') {\r\n            cl.done('error');\r\n            throw `Can't load pageid, moduleid, etc. and $ is not available. \\n ${helpAutoDetect}`;\r\n        }\r\n\r\n        const sf = window.$.ServicesFramework;\r\n        if (typeof sf === 'undefined') {\r\n            cl.done('error');\r\n            throw `Can't load pageid, moduleid etc. and DNN SF is not available. \\n ${helpAutoDetect}`;\r\n        }\r\n        const dnnSf = sf(0);\r\n        var apiRoot = dnnSf.getServiceRoot('2sxc');\r\n        var sfJsInfo: EnvironmentSpecs = {\r\n            page: dnnSf.getTabId(),\r\n            root: 'unknown',\r\n            api: apiRoot,\r\n            appApi: apiRoot,\r\n            rvtHeader: AntiForgeryTokenHeaderNameDnn,\r\n            rvt: dnnSf.getAntiForgeryValue(),\r\n            uiRoot: DnnUiRoot,\r\n            platform: PlatformDnn,\r\n        };\r\n        this.env.load(sfJsInfo, 'dnn SF');\r\n        cl.done();\r\n    }\r\n}\r\n","import { EnvironmentSpecs } from '..';\r\nimport { Log } from '../../../core';\r\nimport { EnvironmentMetaLoader } from './env-loader-meta';\r\n\r\nconst InputValue = 'value';\r\n\r\nconst SelectorInputRvt = `input[name=__RequestVerificationToken]`;\r\n\r\n/**\r\n * Special loader for dynamic pages like Oqtane, where content can change at runtime\r\n * @internal\r\n */\r\nexport class EnvironmentLoaderDynamic {\r\n\r\n  public log: Log;\r\n\r\n  constructor(\r\n      private mainLoader: EnvironmentMetaLoader\r\n  ) {\r\n    this.log = new Log('ldr.dynmic', mainLoader.log);\r\n  }\r\n\r\n  /**\r\n   * Watch for changes in our special meta header, to update the variables.\r\n   * Important for Oqtane, which changes the page on the fly without reloading.\r\n   */\r\n  public startMetaTagObserver(attribute: string): void {\r\n    if (!!this.observer) return;\r\n    this.observer = new MutationObserver((mutationsList: MutationRecord[]) => {\r\n      for(const mut of mutationsList)\r\n        if (mut.type === 'attributes' && mut.attributeName === attribute)\r\n          this.mainLoader.updateEnv(JSON.parse(this.mainLoader.getMetaContent()) as EnvironmentSpecs)\r\n    });\r\n    this.log.add('start observing meta tag');\r\n    this.observer.observe(this.mainLoader.getJsApiMetaTag(), { attributes: true, childList: false, subtree: false });\r\n  }\r\n  private observer: MutationObserver;\r\n\r\n  /**\r\n   * Load RequestVerificationToken from the hidden form-field in Oqtane\r\n   */\r\n  public startInputRvtObserver(): void {\r\n    if (!!this.inputRvtObserver) return;\r\n    this.inputRvtObserver = new MutationObserver((mutationsList: MutationRecord[]) => {\r\n      for(const mut of mutationsList)\r\n        if (mut.type === 'attributes' && mut.attributeName === InputValue)\r\n          this.loadRvtFromHiddenInput(mut.target as HTMLInputElement);\r\n    });\r\n    this.log.add('start observing Rvt Input');\r\n    const hiddenField = document.querySelector(SelectorInputRvt);\r\n    if (hiddenField == null) {\r\n      console.error(`Can't find Oqtane RVT field with selector ${SelectorInputRvt}\\n` +`So we cannot watch it for changes.\\n` +`This will probably cause the $2sxc to fail.`);\r\n      return;\r\n    }\r\n    this.loadRvtFromHiddenInput(hiddenField as HTMLInputElement);\r\n    this.inputRvtObserver.observe(hiddenField, { attributes: true, childList: false, subtree: false });\r\n  }\r\n  private inputRvtObserver: MutationObserver;\r\n\r\n  private loadRvtFromHiddenInput(input: HTMLInputElement){\r\n    this.log.add('Input Rvt updated');\r\n    if(input && input.value)\r\n      this.mainLoader.env.updateRvt(input.value);\r\n  }\r\n}\r\n","import { EnvironmentSpecs } from '..';\r\nimport { SxcGlobalEnvironment } from '.';\r\nimport { EnvironmentDnnSfLoader } from './env-loader-dnn-sf';\r\nimport { MetaHeaderJsApi, PlatformOqtane } from '../constants';\r\nimport { HasLog, Log } from '../../../core';\r\nimport { EnvironmentLoaderDynamic } from './env-loader-dynamic';\r\n\r\n// temp: usually 10, but because Oqtane has some delays, we'll temporarily increase to 100 till we're safe\r\nconst maxRetries = 100;\r\nconst retryMs = 10;\r\n\r\nconst MetaSourceId = 'meta header';\r\n\r\nconst MetaProperty = 'content';\r\n\r\n\r\nfunction logTest(): boolean\r\n{\r\n    console.log('test');\r\n    return true;\r\n}\r\n/**\r\n * This loads environment information from the meta-header tag.\r\n * Because of timing issues, it will try multiple times\r\n * @internal\r\n */\r\nexport class EnvironmentMetaLoader extends HasLog {\r\n    public retries = 0;\r\n\r\n    public log: Log;\r\n\r\n    private dynamicPageHelper: EnvironmentLoaderDynamic;\r\n\r\n    constructor(public env: SxcGlobalEnvironment) {\r\n        super('Env.MetaLd', logTest ? env.log : env.log);\r\n        this.dynamicPageHelper = new EnvironmentLoaderDynamic(this);\r\n    }\r\n\r\n    public loadMetaFromHeader(forceFallback = false): void {\r\n        const cl = this.log.call('loadMetaFromHeader', `${forceFallback}`);\r\n        // avoid duplicate execution\r\n        if(this.env.ready) return cl.done('loadMeta - ready');\r\n\r\n        this.log.add('loadMetaFromHeader: start, retry:' + this.retries + ', force fallback: ' + forceFallback);\r\n        const meta = this.getMetaContent();\r\n        if(!meta) {\r\n            this.retries++;\r\n            if(forceFallback || this.retries >= maxRetries) {\r\n                new EnvironmentDnnSfLoader(this.env).dnnSfFallback();\r\n                return cl.done()\r\n            }\r\n            setTimeout(() => { this.loadMetaFromHeader(); }, retryMs);\r\n            return cl.done('will retry');\r\n        }\r\n        // Load the settings\r\n        this.updateEnv(JSON.parse(meta) as EnvironmentSpecs);\r\n\r\n        // monitor setting changes - important for Oqtane\r\n        this.dynamicPageHelper.startMetaTagObserver(MetaProperty);\r\n        cl.done();\r\n    }\r\n\r\n    public updateEnv(newJsInfo: EnvironmentSpecs) {\r\n        this.log.add('meta env info updated');\r\n        this.env.load(newJsInfo, MetaSourceId);\r\n        if(newJsInfo.platform === PlatformOqtane)\r\n            this.dynamicPageHelper.startInputRvtObserver();\r\n    }\r\n\r\n    public getMetaContent(): string {\r\n        const ourMeta = this.getJsApiMetaTag();\r\n        if (!ourMeta) return null;\r\n        return ourMeta.getAttribute(MetaProperty)\r\n    }\r\n\r\n    public getJsApiMetaTag() {\r\n        return document.querySelector(`meta[name=${MetaHeaderJsApi}]`);\r\n    }\r\n\r\n\r\n    /**\r\n     * Watch for changes in our special meta header, to update the variables.\r\n     * Important for Oqtane, which changes the page on the fly without reloading.\r\n     */\r\n    public startMetaTagObserver(): void {\r\n      if (!!this.observer) return;\r\n      this.observer = new MutationObserver((mutationsList: MutationRecord[]) => {\r\n        for(const mut of mutationsList)\r\n          if (mut.type === 'attributes' && mut.attributeName === MetaProperty)\r\n            this.updateEnv(JSON.parse(this.getMetaContent()) as EnvironmentSpecs)\r\n      });\r\n      this.log.add('start observing meta tag');\r\n      this.observer.observe(this.getJsApiMetaTag(), { attributes: true, childList: false, subtree: false });\r\n    }\r\n    private observer: MutationObserver;\r\n\r\n}\r\n","/**\r\n * A context information for the current page, helping the JS talk with the backend\r\n * @public\r\n */\r\nexport interface EnvironmentSpecs {\r\n  /** Page ID */\r\n  page: number;\r\n\r\n  /** Optional API key - optional if set from external, because it's auto derived from root */\r\n  api: string;\r\n\r\n  /** Optional App API Root - required because in Oqtane we'll have a different root for appAPIs */\r\n  appApi: string;\r\n\r\n  /** Portal root path - used for various things incl. the API root */\r\n  root: string;\r\n\r\n  /** Request verification token header name */\r\n  rvtHeader: string;\r\n\r\n  /** Request verification token value */\r\n  rvt: string;\r\n\r\n  // 2021-02 2dm - as far as I know it's never used outside of 2sxc\r\n  /** \r\n   * The root path for the UI \r\n   * @internal\r\n   */\r\n  uiRoot: string;\r\n\r\n  /** The platform code like 'dnn' or 'oqt' */\r\n  platform: string;\r\n\r\n  /**\r\n   * Additional URL params for the dialog\r\n   * added in v14.08\r\n   * @internal\r\n   */\r\n  dialogQuery?: string;\r\n}\r\n","\r\nexport * from './environment-specs';\r\nexport * from './sxc-global-environment';\r\nexport * from './env-loader-meta'","import { EnvironmentSpecs } from '..';\r\nimport { EnvironmentMetaLoader } from './env-loader-meta';\r\nimport { HasLog, Insights, SxcApiUrlRoot } from '../../../core';\r\nimport { AntiForgeryTokenHeaderNameDnn, DnnUiRoot, PlatformDnn } from '../constants';\r\n\r\ndeclare const _jsApi: EnvironmentSpecs;\r\n\r\n/**\r\n * Provides environment information to $2sxc - usually page-id, api-root and stuff like that\r\n * @public\r\n */\r\nexport class SxcGlobalEnvironment extends HasLog {\r\n    /** @internal */\r\n    private header: EnvironmentSpecs;\r\n    /** \r\n     * Flag to determine if the environment information is available. \r\n     */\r\n    public ready = false;\r\n    /** \r\n     * Where the environment information came from.\r\n     */\r\n    public source = '';\r\n\r\n    /** @internal */\r\n    public metaLoader: EnvironmentMetaLoader;\r\n\r\n    /** @internal */\r\n    constructor() {\r\n        super('Environment', null, 'starting');\r\n        this.log.keepData = true;   // always keep here for clarity\r\n        Insights.add('system', 'environment', this.log);\r\n        this.metaLoader = new EnvironmentMetaLoader(this);\r\n\r\n        // check if a global variable was already set which we should use\r\n        if(typeof _jsApi !== typeof undefined) {\r\n            this.log.add('found _jsApi, will use');\r\n            this.load(_jsApi, 'global variable _jsApi');\r\n        } else {\r\n            this.log.add('will start initializing');\r\n            this.metaLoader.loadMetaFromHeader();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Manually load a new EnvironmentSpecs in cases where the page cannot provide them. \r\n     * This is only used in scenarios outside of Dnn / Oqtane, you will usually not need this. \r\n     * @param envSpecs new info to load\r\n     * @param source _optional_ name where the data came from\r\n     */\r\n    public load(envSpecs: EnvironmentSpecs, source?: string) {\r\n        const cl = this.log.call('load');\r\n        if(envSpecs.root && !envSpecs.api) {\r\n            cl.add('root provided, api missing, will auto-complete');\r\n            const addSlash = (envSpecs.root.endsWith('/') ? '' : '/');\r\n            envSpecs.api = `${envSpecs.root}${addSlash}${SxcApiUrlRoot}`;\r\n        }\r\n        this.header = envSpecs;\r\n\r\n        // in some cases the UpdateRvt may already have been called before\r\n        // in which case it's probably more relevant\r\n        // so we should set it again\r\n        if(this.replacedRvt) this.header.rvt = this.replacedRvt;\r\n\r\n        this.ready = true;\r\n        this.source = source || 'external/unknown' + (this.replacedRvt ? '+rvt': '');\r\n        cl.return(envSpecs, 'loaded from ' + this.source);\r\n    }\r\n\r\n    /** @internal */\r\n    private replacedRvt: string;\r\n\r\n    /** @internal */\r\n    public updateRvt(newRvt: string) {\r\n        if(!newRvt) return;\r\n        this.replacedRvt = newRvt;\r\n        this.header.rvt = newRvt;\r\n    }\r\n\r\n    /**\r\n     * The API endpoint url from the environment\r\n     */\r\n    public api(): string {\r\n        this.ensureReadyOrThrow('api');\r\n        return this.header.api;\r\n    }\r\n\r\n    // WIP - may return undefined\r\n    /** @internal */\r\n    public appApi(): string {\r\n        // WIP - must get it to work without 'appApi' but only 'api' to ensure ...\r\n        this.ensureReadyOrThrow('appApi');\r\n        return this.header.appApi;\r\n    }\r\n\r\n    /**\r\n     * The current page ID - often needed in API calls\r\n     */\r\n    public page(): number {\r\n        this.ensureReadyOrThrow('page');\r\n        return this.header.page;\r\n    }\r\n\r\n    /**\r\n     * The request verification token header name for internal WebAPI calls\r\n     */\r\n    public rvtHeader(): string {\r\n        this.ensureReadyOrThrow('rvtHeader');\r\n        return this.header.rvtHeader || AntiForgeryTokenHeaderNameDnn;\r\n    }\r\n\r\n    /**\r\n     * The request-verification token for internal WebAPI calls\r\n     */\r\n    public rvt(): string {\r\n        this.ensureReadyOrThrow('rvt');\r\n        return this.header.rvt;\r\n    }\r\n\r\n    /**\r\n     * The uiRoot path\r\n     * @internal\r\n     */\r\n    public uiRoot(): string {\r\n        this.ensureReadyOrThrow('uiRoot');\r\n        return this.header.uiRoot || DnnUiRoot;\r\n    }\r\n\r\n    /**\r\n     * The platform code like 'oqt' or 'dnn' in case the JS needs to know the difference\r\n     */\r\n    public platform(): string {\r\n        this.ensureReadyOrThrow('platform');\r\n        return this.header.platform || PlatformDnn;\r\n    }\r\n\r\n    /**\r\n     * The dialogQuery added in 14.08 because of issues with opening the dialog on sub-portals\r\n     * ATM very internal\r\n     * Don't check if it was initialized, because it's valid if it doesn't exist\r\n     * @internal\r\n     */\r\n    public dialogQuery(): string {\r\n      return this.header.dialogQuery ?? null;\r\n    }\r\n  \r\n\r\n    /** @internal */\r\n    private ensureReadyOrThrow(partRequested: string): void {\r\n        if(this.ready) return;\r\n\r\n        // try one last time - usually it should really be ready by now\r\n        this.log.add('ensureReady - force last attempt to load MetaHeader for ' + partRequested)\r\n        this.metaLoader.loadMetaFromHeader(true);\r\n\r\n        // if still not ready, throw exception to console log\r\n        if(this.ready) return;\r\n        throw `Can't find ${partRequested} - something went wrong, pls contact 2sxc.org`;\r\n    }\r\n\r\n}\r\n\r\n","import { ToolUrlObjects } from './tools/obj2url';\r\n/* \r\n    This is just a type-index entry point.\r\n    The purpose is that other 2sxc projects in this repo can access all the types\r\n    in this project from here, without having to know the exact code files\r\n\r\n    Note that the order of things in this file can cause trouble\r\n    As webpack needs the order to be correct, meaning some depedencies need to be early\r\n*/\r\n\r\n// early things without dependencies, which may be needed by others\r\nexport * from './_/window';\r\nexport * from './data';\r\nexport * from './tools';\r\nexport * from './constants';\r\nexport * from './Stats';\r\n\r\nexport * from './environment';\r\n\r\nexport * from './cms';\r\nexport * from './sxc';\r\n\r\nexport * from './sxc-global';\r\n","/**\r\n * ContextIdentifier is used to initialize a Sxc object outside of the default context.\r\n * @public\r\n */\r\nexport class ContextIdentifier {\r\n  /**\r\n   * ZoneId of this Context\r\n   * @requires zoneId\r\n   */\r\n  zoneId: number;\r\n\r\n  /**\r\n   * AppId of this Context\r\n   * @requires appId\r\n   */\r\n  appId: number;\r\n\r\n  /** \r\n   * PageId of this Context (optional)\r\n   * @optional\r\n   */\r\n  pageId?: number;\r\n\r\n  /**\r\n   * ModuleId of this Context (optional)\r\n   * @optional\r\n   */\r\n  moduleId?: number;\r\n\r\n  /**\r\n   * Exclude pageId and moduleId headers in web requests\r\n   * @internal\r\n   */\r\n  _ignoreHeaders?: boolean;\r\n\r\n  /**\r\n   * Marks the context as complete, so it won't merge in anything else \r\n   * WIP #CustomContext ATM for the updated edit-ui\r\n   * @internal\r\n   */\r\n  complete?: boolean;\r\n\r\n  /**\r\n   * WIP #CustomContext not really used yet\r\n   * @internal\r\n   */\r\n  blockId?: number;\r\n\r\n  /**\r\n   * Type Guard to determine if an object is a ContextIdentifier\r\n   * @param original \r\n   * @returns \r\n   * @internal\r\n   */\r\n  static is(original: unknown): original is ContextIdentifier {\r\n    const origAsContextId = original as ContextIdentifier;\r\n    return origAsContextId.zoneId !== undefined && origAsContextId.appId !== undefined;\r\n  }\r\n\r\n  /**\r\n   * Internal\r\n   * @param ctx \r\n   * @internal\r\n   */\r\n  static ensureCompleteOrThrow(ctx: ContextIdentifier): ContextIdentifier {\r\n    // if it's fulfills the minimum requirements\r\n    if (ctx.zoneId && ctx.appId) return ctx; \r\n  \r\n    const msg = `It looks like the id given is a ContextIdentifier, but it's missing either zoneId or appId.`;\r\n    console.error(msg, ctx);\r\n    throw msg;\r\n  }\r\n  \r\n  /**\r\n   * Create a string-id to identify in a cache. \r\n   * @param ctx \r\n   * @returns \r\n   * @internal\r\n   */\r\n  static toCacheKey(ctx: ContextIdentifier): string {\r\n    this.ensureCompleteOrThrow(ctx);\r\n    return `${ctx.zoneId}/${ctx.appId}/${ctx.pageId}/${ctx.moduleId}/${ctx.blockId}`;\r\n  }\r\n}\r\n","\r\nexport * from './context-identifier';\r\nexport * from './sxc-global';\r\nexport * from './sxc-global-debug';\r\nexport * from './sxc-global-bootstrap';\r\nexport * from './sxc-global-manage';\r\nexport * from './sxc-global-http'","import { TotalPopup } from '../tools/total-popup';\r\nimport { UrlParams } from '../tools/url-params';\r\nimport { Stats } from '../Stats';\r\nimport { SxcGlobalDebug, SxcGlobal, SxcGlobalEnvironment } from '..';\r\nimport { Insights, Log, SxcVersion } from '../../../core';\r\nimport { $2sxcGet } from './sxc-global-get';\r\nimport { SxcGlobalHttp } from './sxc-global-http';\r\n\r\n\r\n/**\r\n * Build a SXC Controller for the page. Should only ever be executed once\r\n * @internal\r\n */\r\nexport function buildSxcRoot(): SxcGlobal {\r\n    const rootApiV2 = getRootPartsV2();\r\n\r\n    const urlManager = new UrlParams();\r\n    const debug = new SxcGlobalDebug();\r\n    const stats = new Stats();\r\n\r\n\r\n    const addOn: Partial<SxcGlobal> = {\r\n        get: $2sxcGet,\r\n        _controllers: {} as any,\r\n        beta: {},\r\n        // 2022-06-01 2dm disabled, believe this is for the old .data\r\n        // _data: {},\r\n        // this creates a full-screen iframe-popup and provides a close-command to finish the dialog as needed\r\n        totalPopup: new TotalPopup(),\r\n        urlParams: urlManager,\r\n        // note: I would like to remove this from $2sxc, but it's currently\r\n        // used both in the inpage-edit and in the dialogs\r\n        // debug state which is needed in various places\r\n        debug,\r\n        stats: stats,\r\n        insights: (partName: string, index?: number, start?: number, length?: number) => Insights.show(partName, index, start, length),\r\n        _insights: Insights,\r\n\r\n        // 2022-06-01 2dm removed, don't think this is used anywhere\r\n        // mini-helpers to manage 2sxc parts, a bit like a dependency loader\r\n        // which will optimize to load min/max depending on debug state\r\n        // parts: {\r\n        //     getUrl(url: string, preventUnmin: boolean) {\r\n        //         // let r = url;// (preventUnmin || !debug.load) ? url : url.replace('.min', ''); // use min or not\r\n        //         if (debug.uncache && url.indexOf('sxcver') === -1)\r\n        //             return url + ((url.indexOf('?') === -1) ? '?' : '&') + 'sxcver=' + debug.uncache;\r\n        //         return url;\r\n        //     },\r\n        // },\r\n    };\r\n\r\n    const merged = Object.assign($2sxcGet, addOn, rootApiV2) as SxcGlobal;\r\n    merged.log.add('sxc controller built');\r\n\r\n    console.log(`$2sxc ${SxcVersion} with insights-logging - see https://r.2sxc.org/insights`)\r\n\r\n    return merged;\r\n}\r\n\r\n/** @internal */\r\nfunction getRootPartsV2(): Partial<SxcGlobal> {\r\n    const log = new Log('$2sxc', null, 'building');\r\n    var env = new SxcGlobalEnvironment();\r\n    return {\r\n        sysinfo: {\r\n            version: SxcVersion,\r\n            description: 'The 2sxc Controller - read more about it on docs.2sxc.org',\r\n        },\r\n        env: env,\r\n        http: new SxcGlobalHttp(env),\r\n        log: log,\r\n    };\r\n}\r\n","import { UrlParams } from '..';\r\n\r\nconst urlManager = new UrlParams();\r\nconst urlDebugState = urlManager.isDebug() === true;\r\n\r\n/** @internal */\r\nexport class SxcGlobalDebug {\r\n    /**\r\n     * The load-debug state (provided by the url with debug=true)\r\n     */\r\n    load: boolean;\r\n\r\n    /**\r\n     * Cache breaker string, contains the version number of 2sxc if one is provided with sxcver=...\r\n     */\r\n    uncache: string;\r\n\r\n    constructor() {\r\n        this.load = urlDebugState;\r\n        this.uncache = urlManager.get('sxcver');\r\n    }\r\n}\r\n","import { Sxc, SxcGlobal } from '..';\r\nimport { ContextIdentifier } from './context-identifier';\r\n\r\ndeclare const window: Window;\r\n// TODO: copied from selectors in inpage project. Probably best to move selectors from inpage to core\r\nconst toolbarSelector = `.sc-menu[toolbar],.sc-menu[data-toolbar],[sxc-toolbar]`;\r\nconst sxcDivsSelector = 'div[data-edit-context]';\r\n\r\n/**\r\n * returns a 2sxc-instance of the id or html-tag passed in\r\n * @param id\r\n * @param cbid\r\n * @returns {}\r\n * @internal\r\n */\r\nexport function $2sxcGet(id: number | ContextIdentifier | HTMLElement | Sxc, cbid?: number): Sxc {\r\n    const $2sxc = window.$2sxc as SxcGlobal;\r\n    $2sxc.log.add('FindSxcInstance(' + id + ',' + cbid);\r\n    if (!$2sxc._controllers)\r\n        throw new Error('$2sxc not initialized yet');\r\n\r\n    // Test if it already is such an instance, in which case we just preserve it and return it\r\n    // Used in cases where the $2sxc(something) is just used to ensure it really is this\r\n    if (Sxc.is(id)) return id;\r\n\r\n    // check if it's a context identifier\r\n    let ctx: ContextIdentifier = null;\r\n    if (ContextIdentifier.is(id)) {\r\n        ctx = ContextIdentifier.ensureCompleteOrThrow(id);\r\n        // get moduleId or create fake, based on zone and app because this is used to identify the object in the cache\r\n        id = ctx.moduleId ?? ctx.zoneId * 100000 + ctx.appId;\r\n    } else if (id instanceof HTMLElement && id.matches(toolbarSelector) && !id.closest(sxcDivsSelector)) {\r\n        // for toolbars that are not inside 2sxc modules (e.g. in skin)\r\n        const contextAttr = 'sxc-context';\r\n        const contextAttribute = id.getAttribute(contextAttr);\r\n        var ctxTlbAttribute = JSON.parse(contextAttribute);\r\n        if (ctxTlbAttribute == null) throw new Error(`Toolbar outside of module without ${contextAttr} attribute found.`);\r\n        return $2sxcGet(ctxTlbAttribute);\r\n    } \r\n    // HTMLElement or anything else, try to auto-find...\r\n    if (typeof id === 'object') {\r\n        // if it's a dom-element, use auto-find\r\n        const idTuple = autoFind(id);\r\n        id = idTuple[0];\r\n        cbid = idTuple[1];\r\n    }\r\n\r\n    // if content-block is unknown, use id of module, and create an ID in the cache\r\n    if (!cbid) cbid = id;\r\n    const cacheKey = ctx != null ? ContextIdentifier.toCacheKey(ctx) : id + ':' + cbid;\r\n\r\n    // either get the cached controller from previous calls, or create a new one\r\n    if ($2sxc._controllers[cacheKey]) {\r\n        $2sxc.log.add('Cache found for: ' + cacheKey);\r\n        return $2sxc._controllers[cacheKey];\r\n    }\r\n\r\n    return ($2sxc._controllers[cacheKey]\r\n        = new Sxc(id, cbid, cacheKey, $2sxc, ctx));\r\n}\r\n\r\nfunction autoFind(domElement: HTMLElement): [number, number] {\r\n    const containerTag = domElement.closest('.sc-content-block');\r\n    if (!containerTag) return null;\r\n    const iid = containerTag.getAttribute('data-cb-instance');\r\n    const cbid = containerTag.getAttribute('data-cb-id');\r\n    if (!iid || !cbid) return null;\r\n    return [parseInt(iid, 10), parseInt(cbid, 10)];\r\n}\r\n","import { ApiExtensionPlaceholder } from '../constants';\r\nimport { AppApiMarker, HasLog, HeaderNames, ToSxcName } from '../../../core';\r\nimport { ContextIdentifier, SxcGlobalEnvironment } from '..';\r\n\r\n/**\r\n * Global HTTP Service for information and helpers on `$2sxc.http`\r\n * @public\r\n */\r\nexport class SxcGlobalHttp extends HasLog {\r\n    /** @internal */\r\n    constructor(private env: SxcGlobalEnvironment) {\r\n        super('Sxc.Http');\r\n    }\r\n\r\n    /**\r\n     * All the headers which are needed in an ajax call.\r\n     * @returns Dictionary / Record of headers\r\n     */\r\n    headers(): Record<string, string>;\r\n\r\n    /**\r\n     * All the headers which are needed in an ajax call - within a module context.\r\n     * @param id _optional_ module ID\r\n     * @returns Dictionary / Record of headers\r\n     */\r\n    headers(id: number): Record<string, string>;\r\n\r\n    /**\r\n     * All the headers which are needed in an ajax call - within a module and content-block context.\r\n     * @param id _optional_ module ID\r\n     * @param cbid _optional_ content block ID\r\n     * @returns Dictionary / Record of headers\r\n     */\r\n    headers(id: number, cbid: number): Record<string, string>;\r\n\r\n    /**\r\n     * All the headers which are needed in an ajax call.\r\n     * Uses a module and content-block context (but these could also be null) \r\n     * and a full context identifier for advanced operations.\r\n     * @param id _optional_ module ID\r\n     * @param cbid _optional_ content block ID\r\n     * @param ctx _optional_ context information to include in the header\r\n     * @returns Dictionary / Record of headers\r\n     */\r\n    headers(id: number, cbid: number, ctx: ContextIdentifier): Record<string, string>;\r\n\r\n    /**\r\n     * All the headers which are needed in an ajax call.\r\n     * Uses a module and content-block context (but these could also be null) \r\n     * and a full context identifier for advanced operations.\r\n     * @param id _optional_ module ID\r\n     * @param cbid _optional_ content block ID\r\n     * @param ctx _optional_ context information to include in the header\r\n     * @returns Dictionary / Record of headers\r\n     */\r\n    headers(id?: number, cbid?: number, ctx?: ContextIdentifier): Record<string, string> {\r\n        const cl = this.log.call('headers', `${id}, ${cbid}`);\r\n        const fHeaders: Record<string, string> = {};\r\n        const pageId = (ctx?.pageId ?? this.env.page()).toString();\r\n        id = ctx?.moduleId ?? id;\r\n        cbid = ctx?.blockId ?? cbid;\r\n\r\n        // TODO: THE #_ignoreHeaders is only used in edit-ui, and should be changed to somehow say use-in-URL\r\n        if (!ctx?._ignoreHeaders) {\r\n            if (id) fHeaders[HeaderNames.ModuleId] = id.toString();\r\n            if (cbid) fHeaders[HeaderNames.ContentBlockId] = cbid.toString();\r\n            fHeaders[HeaderNames.TabId] = pageId;\r\n            fHeaders[HeaderNames.PageId] = pageId;\r\n        }\r\n        fHeaders[this.env.rvtHeader()] = this.env.rvt();\r\n        return cl.return(fHeaders, `headers(id:${id}, cbid:${cbid})`);\r\n    }\r\n\r\n    /**\r\n     * Get the API-Root path for a specific extension/endpoint\r\n     * @returns\r\n     * @internal Not relevant for 2sxc, only used if calling platform endpoints\r\n     */\r\n    apiRoot(endpointName: string): string {\r\n        const cl = this.log.call('apiRoot');\r\n        var result = this.env.api().replace(ApiExtensionPlaceholder, endpointName);\r\n        return cl.return(result, `apiRoot('${endpointName}')`);\r\n    }\r\n\r\n    /**\r\n     * Get the API-Root path for Apps\r\n     * new in v12\r\n     * @internal\r\n     */\r\n     appApiRoot(): string {\r\n        const cl = this.log.call('appApiRoot');\r\n        // try to get it, or fall back to the previous / old convention\r\n        var result = this.env.appApi() ?? this.apiRoot(ToSxcName);\r\n        return cl.return(result, `appApiRoot()`);\r\n    }\r\n\r\n    /**\r\n     * Convert short urls like `app/auto/api/Posts/All` to the full URL needed.\r\n     * Will ignore urls which clearly already are the full url.\r\n     * @param url short URL like `app/auto/api/Posts/All`\r\n     * @returns the converted, long url with the full endpoint\r\n     */\r\n    apiUrl(url: string): string;\r\n\r\n    /**\r\n     * Convert short urls like `app/auto/api/Posts/All` to the full URL needed.\r\n     * Will ignore urls which clearly already are the full url.\r\n     * @param url short URL like `app/auto/api/Posts/All`\r\n     * @param endpointName _optional_ endpoint name if accessing a different exotic endpoint\r\n     * @returns the converted, long url with the full endpoint\r\n     */\r\n    apiUrl(url: string, endpointName: string): string;\r\n\r\n    /**\r\n     * Convert short urls like `app/auto/api/Posts/All` to the full URL needed.\r\n     * Will ignore urls which clearly already are the full url.\r\n     * @param url short URL like `app/auto/api/Posts/All`\r\n     * @param endpointName _optional_ endpoint name if accessing a different exotic endpoint\r\n     * @returns the converted, long url with the full endpoint\r\n     */\r\n    apiUrl(url: string, endpointName?: string): string\r\n    {\r\n        const cl = this.log.call('apiUrl');\r\n        this.log.add(`apiUrl(url:'${url}', endpointName:'${endpointName}')`);\r\n\r\n        // null/undefined check\r\n        if(url == null) return url;\r\n\r\n        // if starts with http: or https: then ignore\r\n        if(!url || url.indexOf('http:') == 0 || url.indexOf('https:') == 0 || url.indexOf('//') == 0)\r\n            return cl.return(url);\r\n\r\n        // if no endpoint specified, then also skip absolute and relative urls\r\n        if(!endpointName && (url.indexOf('/') == 0 || url.indexOf('.') == 0))\r\n            return cl.return(url);\r\n\r\n        var baseUrl = url.toLocaleLowerCase().startsWith(AppApiMarker)\r\n            ? this.appApiRoot()\r\n            : this.apiRoot(endpointName || ToSxcName);\r\n\r\n\r\n        // ensure base ends with slash\r\n        if(baseUrl[baseUrl.length-1] != '/') baseUrl += '/';\r\n        // ensure url doesn't start with slash\r\n        if(url[0] == '/') url = url.slice(1);\r\n        return cl.return(baseUrl + url);\r\n    }\r\n}\r\n","import { Sxc } from '..';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface SxcGlobalManage {\r\n  /**\r\n   * Init the manage-object on a just-created sxc-instance\r\n   * we must keep signature of initInstance in sync with the 2sxc.api.js\r\n   * @param sxc\r\n   */\r\n  initInstance(sxc: Sxc): void;\r\n\r\n  _toolbarManager: any;\r\n}","import { UrlParams } from '../tools';\r\nimport { SxcGlobalEnvironment } from '../environment';\r\nimport { Insights, Log } from '../../../core';\r\nimport { ContextIdentifier, SxcGlobalDebug, Stats, Sxc, TotalPopup } from '..';\r\nimport { SxcGlobalHttp } from './sxc-global-http';\r\nimport { SxcGlobalManage } from './sxc-global-manage';\r\n\r\n/**\r\n * This is the root global `window.$2sxc` function / object. \r\n * \r\n * It is both a function `window.$2sxc(...)` and object `window.$2sxc.insights...`\r\n * \r\n * If the page feature `2sxc.JsCms` is enabled, the `window.$2sxc` will also be a [SxcGlobalWithCms](xref:Api.Js.SxcJs.SxcGlobalWithCms)\r\n * @public\r\n */\r\n// **Documentation notes**\r\n// Because of limitations in the documentation, the main function isn't documented here as it wouldn't show in docFx\r\n// So additional information is in the docs-project\r\nexport interface SxcGlobal {\r\n    /**\r\n     * Get an Sxc Instance\r\n     * @param id number: moduleId | HTMLElement: tag in the page | Sxc: an existing sxc - will just be returned | ContextIdentifier: an identifier in complex scenarios without a moduleId/context\r\n     * @param cbid number\r\n     * @returns SxcInstance\r\n     */\r\n    (id: number | HTMLElement | ContextIdentifier | Sxc, cbid?: number): Sxc;\r\n\r\n    /**\r\n     * Get an Sxc Instance using the moduleId. \r\n     * Using `$2sxc.get(...)` is the same as using `$2sxc(...)`\r\n     * @param moduleId number: moduleId\r\n     * @returns SxcInstance\r\n     * @since v14.01\r\n     */\r\n    get(moduleId: number): Sxc;\r\n\r\n    /**\r\n     * Get an Sxc Instance using the moduleId and contentBlockId. \r\n     * Using `$2sxc.get(...)` is the same as using `$2sxc(...)`\r\n     * @param moduleId number: moduleId\r\n     * @param contentBlockId number: content-block ID\r\n     * @returns Sxc\r\n     * @since v14.01\r\n     */\r\n    get(moduleId: number, contentBlockId: number): Sxc;\r\n\r\n    /**\r\n     * Get an Sxc Instance using a tag / `HtmlElement`. Using `$2sxc.get(...)` is the same as using `$2sxc(...)`\r\n     * @param tag HTMLElement: tag in the page\r\n     * @returns Sxc\r\n     * @since v14.01\r\n     */\r\n    get(tag: HTMLElement): Sxc;\r\n\r\n    /**\r\n     * Get an Sxc Instance using a full context-identifier (advanced). Using `$2sxc.get(...)` is the same as using `$2sxc(...)`\r\n     * @param context ContextIdentifier: full context identifier\r\n     * @returns Sxc\r\n     * @since v14.01\r\n     */\r\n    get(context: ContextIdentifier): Sxc;\r\n\r\n    /**\r\n     * Get an Sxc Instance passing in an existing Sxc - just for cases where you're not sure what you aready have. Using `$2sxc.get(...)` is the same as using `$2sxc(...)`\r\n     * @param sxc Sxc: an existing sxc - will just be returned\r\n     * @returns Sxc - the same Sxc as the one which was passed in\r\n     * @since v14.01\r\n     */\r\n    get(sxc: Sxc): Sxc;\r\n\r\n\r\n    // /**\r\n    //  * Get an Sxc Instance. Using `$2sxc.get(...)` is the same as using `$2sxc(...)`\r\n    //  * @param id number: moduleId | HTMLElement: tag in the page | Sxc: an existing sxc - will just be returned | ContextIdentifier: an identifier in complex scenarios without a moduleId/context\r\n    //  * @param cbid number\r\n    //  * @returns Sxc\r\n    //  * @since v14.01\r\n    //  */\r\n    // get(id: number | HTMLElement | ContextIdentifier | Sxc, cbid?: number): Sxc;\r\n\r\n    /** @internal */\r\n    _controllers: { [id: string]: Sxc };\r\n\r\n    /** @internal */\r\n    beta: any;\r\n\r\n    // 2022-06-01 2dm disabled, believe this is for the old .data\r\n    // _data: any;\r\n\r\n    /** @internal */\r\n    _manage: SxcGlobalManage;\r\n\r\n    /** @internal */\r\n    _translateInit: any;\r\n\r\n    /**\r\n     * 2022-06-01 2dm - I believe this is not used, probably remove\r\n     * @internal */\r\n    debug: SxcGlobalDebug;\r\n\r\n    /** @internal */\r\n    stats: Stats;\r\n\r\n\r\n    /**\r\n     * system information, mainly for checking which version of 2sxc is running\r\n     * note: it's not always updated reliably, but it helps when debugging\r\n     */\r\n    sysinfo: {\r\n        /** the version using the ##.##.## syntax */\r\n        version: string;\r\n\r\n        /** a short text description, for people who have no idea what this is */\r\n        description: string;\r\n    };\r\n\r\n    /**\r\n     * Environment information\r\n     * @type {SxcGlobalEnvironment}\r\n     */\r\n    env: SxcGlobalEnvironment;\r\n\r\n    /**\r\n     * Http helper for API calls and such\r\n     */\r\n    http: SxcGlobalHttp;\r\n\r\n    /**\r\n     * The debugging / insights system. \r\n     * Call the `$2sxc.insights()` without parameters to get instructions what the parameters could be.\r\n     * @param partName optional name of a part of the system for which we want to see the logs\r\n     * @param index optional index on that part for which log we want to see\r\n     * @param start log start index - this is to skip the first few lines if there are too many\r\n     * @param length amount of lines to show - in some cases will default to 25\r\n     */\r\n    insights(partName: string, index?: number, start?: number, length?: number): void;\r\n\r\n    /** @internal */\r\n    _insights: typeof Insights;\r\n    \r\n\r\n    /**\r\n     * Internal logger to better see what's happening\r\n     * @internal\r\n     */\r\n    log: Log;\r\n\r\n\r\n    /**\r\n     * Helper to work with url parameters behind ? or #\r\n     */\r\n    urlParams: UrlParams;\r\n\r\n    /**\r\n     * A helper to create full-screen popups\r\n     * @internal\r\n     */\r\n    totalPopup: TotalPopup;\r\n}\r\n","import { Sxc } from '..';\r\nimport { SxcPart } from '../sxc-part';\r\nimport { SxcWebApi } from '../web-api/sxc-web-api';\r\n\r\n/**\r\n * Base class doing common checks.\r\n * This is internal and not important, but we can't keep it out of the docs. \r\n * @public\r\n */\r\nexport abstract class SxcDataServiceBase extends SxcPart {\r\n  protected readonly webApi: SxcWebApi;\r\n  /**\r\n  * Creates an instance of SxcData.\r\n  * @param sxc: \r\n  * @param name: the content-type name\r\n  * @internal\r\n  */\r\n  constructor(\r\n    sxc: Sxc,\r\n    readonly name: string,\r\n    nameInError: string\r\n  ) {\r\n    super(sxc, 'data');\r\n    this.webApi = sxc.webApi;\r\n    \r\n    // Fail early if something is wrong\r\n    nameInError += ' name ';\r\n    if (name == null) throw nameInError + 'is empty';\r\n    if (name.indexOf(\"/\") != -1 || name.indexOf(\"\\\\\") != -1) throw nameInError + 'has slashes - not allowed';\r\n    if (name.indexOf(\"?\") != -1) throw nameInError + 'has \"?\" - not allowed';\r\n  }\r\n\r\n}\r\n  ","import { Sxc } from '..';\r\nimport { MetadataTargetTypes } from '../../data';\r\nimport { MetadataFor } from '../../data/metadata-for';\r\nimport { SxcDataServiceBase } from './sxc-data-service-base';\r\n\r\nconst ContentApiRoot = 'app/auto/data';\r\n\r\n/**\r\n* Data Service for an App / Sxc-Instance to get/create data of a specific Content-Type\r\n* @public\r\n*/\r\nexport class SxcData<T = unknown> extends SxcDataServiceBase {\r\n  /**\r\n  * Creates an instance of SxcData.\r\n  * @param sxc:\r\n  * @param name: the content-type name\r\n  * @internal\r\n  */\r\n  constructor(sxc: Sxc, readonly name: string) {\r\n    super(sxc, name, 'ContentType');\r\n  }\r\n\r\n  /**\r\n   * Get all items of this type.\r\n   */\r\n  getAll(): Promise<T[]> {\r\n    return this.getInternal<T[]>();\r\n  }\r\n\r\n  /**\r\n   * Get the specific item with the ID. It will return null if not found\r\n   */\r\n  getOne(id: number): Promise<T> | null {\r\n    return this.getInternal<T>(id);\r\n  };\r\n\r\n  /** Future\r\n   *  @internal \r\n   */\r\n  private getMany(criteria: Record<string, unknown>, fields: Array<string>): Promise<T[]> {\r\n    throw 'not implemented - probably v13.5 or something';\r\n  }\r\n\r\n\r\n  /**\r\n   * Get all or one data entity from the backend\r\n   * @param id optional id as number or string - if not provided, will get all\r\n   * @param params optional parameters - ATM not usefuly but we plan to support more filters etc. \r\n   * @returns an array with 1 or n entities in the simple JSON format\r\n   * @internal\r\n   */\r\n  private getInternal<TCall>(id?: string | number, params?: string | Record<string, unknown>): Promise<TCall> {\r\n    let path = `${ContentApiRoot}/${this.name}`;\r\n    if (id && (typeof id === 'string' || typeof id === 'number')) path += \"/\" + id;\r\n    return this.webApi.fetchJson(this.webApi.url(path, params));\r\n  }\r\n\r\n  /**\r\n   * Create a new entity with the values supplied\r\n   * @param values a simple object containing the values to create\r\n   */\r\n  create(values: Record<string, unknown>): Promise<Record<string, unknown>>;\r\n\r\n  /**\r\n   * Create a new entity with the values supplied and also a metadata-for reference\r\n   * @param values a simple object containing the values to create\r\n   */\r\n  create(values: Record<string, unknown>, metadataFor: MetadataFor | string): Promise<Record<string, unknown>>;\r\n\r\n  /** @internal */\r\n  create(values: Record<string, unknown>, metadataFor?: MetadataFor | string): Promise<Record<string, unknown>> {\r\n    const path = `${ContentApiRoot}/${this.name}`;\r\n    if (metadataFor != null) {\r\n      if (typeof(metadataFor) === 'string')\r\n        metadataFor = { Target: MetadataTargetTypes.Entity, Guid: metadataFor } as MetadataFor;\r\n      try {\r\n        values.For = metadataFor;\r\n      } catch { }\r\n    }\r\n    return this.webApi.fetchJson(this.webApi.url(path), values, 'POST');\r\n  }\r\n\r\n  /**\r\n   * Update an existing entity with the values supplied\r\n   */\r\n  update(id: number, values: Record<string, unknown>): Promise<Record<string, unknown>> {\r\n    const path = `${ContentApiRoot}/${this.name}/${id}`;\r\n    return this.webApi.fetchJson(this.webApi.url(path), values, 'POST');\r\n  }\r\n\r\n  /**\r\n   * Delete an entity\r\n   * @param id id of the item to delete\r\n   */\r\n  delete(id: number): Promise<null>;\r\n\r\n  /**\r\n   * Delete an entity\r\n   * @param guid GUID of the item to delete\r\n   */\r\n  delete(guid: string): Promise<null>;\r\n\r\n  /** @internal */\r\n  delete(idOrGuid: number | string): Promise<null> {\r\n    const path = `${ContentApiRoot}/${this.name}/${idOrGuid}`;\r\n    return this.webApi.fetchRaw(this.webApi.url(path), undefined, 'DELETE').then(response => null);\r\n  }\r\n}\r\n\r\n","import { Sxc } from '..';\r\nimport { SxcDataServiceBase } from './sxc-data-service-base';\r\n\r\n/**\r\n * Instance Query Service\r\n * @public\r\n */\r\nexport class SxcQuery extends SxcDataServiceBase {\r\n\r\n  /**\r\n   * Creates an instance of SxcQuery.\r\n   * @internal\r\n   */\r\n  constructor(sxc: Sxc, readonly name: string) {\r\n    super(sxc, name, 'Query');\r\n  }\r\n\r\n  getAll<T = unknown>(): Promise<T>;\r\n  getAll<T = unknown>(urlParams: string | Record<string, unknown>): Promise<T>;\r\n  getAll<T = unknown>(urlParams: string | Record<string, unknown>, data: string | Record<string, unknown>): Promise<T>;\r\n  /**\r\n   * Retrieve the entire query with all streams\r\n   *\r\n   * @template T\r\n   * @returns {Promise<T>} containing a object with stream-names and items in the streams.\r\n   */\r\n  getAll<T = unknown>(urlParams?: string | Record<string, unknown>, data?: string | Record<string, unknown>): Promise<T> {\r\n    return this.getInternal<T>(undefined, urlParams, data);\r\n  }\r\n\r\n  /**\r\n   * Get just one stream, returning an array of items in that stream\r\n   *\r\n   * @template T\r\n   * @param stream\r\n   * @returns {Promise<T[]>} containing an array of items - or empty if stream not found or nothing returned\r\n   */\r\n  getStream<T = unknown>(stream: string): Promise<T[]>;\r\n  getStream<T = unknown>(stream: string, urlParams: string | Record<string, unknown>): Promise<T[]>;\r\n  getStream<T = unknown>(stream: string, urlParams: string | Record<string, unknown>, data: string | Record<string, unknown>): Promise<T[]>;\r\n  \r\n  getStream<T = unknown>(stream: string, urlParams?: string | Record<string, unknown>, data?: string | Record<string, unknown>): Promise<T[]> {\r\n    if (stream.indexOf(',') !== -1) throw \"parameter 'stream' can only contain one stream name for 'getStream'\";\r\n    return this.getInternal<unknown>(stream, urlParams, data).then((data) => {\r\n      if (data == null || !data.hasOwnProperty(stream)) return [];\r\n      return (data as any)[stream] as T[];\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get a query but only the mentioned streams.\r\n   * This will reduce the amount of data retrieved on queries that have many streams. \r\n   * @template T The schema/interfaces of what will be returned\r\n   * @returns {Promise<T>} Promise containing a object with stream-names and items in the streams.\r\n   * @public\r\n   */\r\n  getStreams<T = unknown>(streams: string): Promise<T>;\r\n  /**\r\n   * Get a query but only the mentioned streams.\r\n   * This will reduce the amount of data retrieved on queries that have many streams. \r\n   * @template T The schema/interfaces of what will be returned\r\n   * @param streams name of streams to get, comma separated\r\n   * @param urlParams additional parameters for the URL, either as a string or as a object\r\n   * @returns {Promise<T>} Promise containing a object with stream-names and items in the streams.\r\n   * @public\r\n   */\r\n  getStreams<T = unknown>(streams: string, urlParams: string | Record<string, unknown>): Promise<T>;\r\n  /**\r\n   * Get a query but only the mentioned streams.\r\n   * This will reduce the amount of data retrieved on queries that have many streams. \r\n   * @template T The schema/interfaces of what will be returned\r\n   * @param streams name of streams to get, comma separated\r\n   * @param urlParams additional parameters for the URL, either as a string or as a object\r\n   * @param data data to include in case of a POST call - if this is provided, it will use a post\r\n   * @returns {Promise<T>} Promise containing a object with stream-names and items in the streams.\r\n   * @public\r\n   */\r\n  getStreams<T = unknown>(streams: string, urlParams: string | Record<string, unknown>, data: string | Record<string, unknown>): Promise<T>;\r\n  /**\r\n   * Get a query but only the mentioned streams.\r\n   * This will reduce the amount of data retrieved on queries that have many streams. \r\n   *\r\n   * @template T The schema/interfaces of what will be returned\r\n   * @param streams name of streams to get, comma separated\r\n   * @param urlParams additional parameters for the URL, either as a string or as a object\r\n   * @param data data to include in case of a POST call - if this is provided, it will use a post\r\n   * @returns {Promise<T>} Promise containing a object with stream-names and items in the streams.\r\n   */\r\n  getStreams<T = unknown>(streams: string, urlParams?: string | Record<string, unknown>, data?: string | Record<string, unknown>): Promise<T> {\r\n    return this.getInternal<T>(streams, urlParams, data);\r\n  }\r\n\r\n  /**\r\n   * Get all or one data entity from the backend\r\n   * @param id optional id as number or string - if not provided, will get all\r\n   * @param params optional parameters - ATM not usefuly but we plan to support more filters etc. \r\n   * @returns an array with 1 or n entities in the simple JSON format\r\n   * @internal\r\n   */\r\n  private getInternal<T = unknown>(streams?: string, params?: string | Record<string, any>, data?: string | Record<string, unknown>): Promise<T> {\r\n    let path = \"app/auto/query/\" + this.name;\r\n    if (streams && (typeof streams === 'string')) path += \"?stream=\" + streams;\r\n    return this.webApi.fetchJson(this.webApi.url(path, params), data);\r\n  }\r\n}\r\n","\r\nexport * from './sxc';\r\nexport * from './sxc-manage';\r\nexport * from './web-api/sxc-web-api';\r\nexport * from './web-api/ajax-promise';\r\nexport * from './web-api/ajax-settings';\r\nexport * from './sxc-cms'\r\nexport * from './data/sxc-data'\r\nexport * from './data/sxc-query'\r\nexport * from './web-api/sxc-web-api-deprecated'\r\nexport * from './data/sxc-data-service-base'\r\nexport * from './sxc-part'","import { SxcPart } from './sxc-part';\r\nimport { RunParams } from '../cms/run-params';\r\nimport { Sxc } from '.';\r\n\r\n/**\r\n * This is in charge of sxc.cms on the instance level.\r\n * ATM it just has the run command.\r\n * In future, it may also have dedicated command like `layout` etc.\r\n * @public\r\n */\r\nexport class SxcCms extends SxcPart {\r\n\r\n  /** @internal */\r\n  constructor(sxc: Sxc) {\r\n    super(sxc, \"cms\");\r\n  }\r\n\r\n  /**\r\n   * Run a command on this sxc-instance. \r\n   * Requires edit mode to be on, which would enable the edit-JS parts.\r\n   * To use, remember to activate `2sxc.JsCms` on the page\r\n   * @param runParams - real type is actually RunParams\r\n   */\r\n  run<T>(runParams: RunParams): Promise<void | T> { \r\n    throw 'cms.run() requires editing to be on, or page-feature \"2sxc.JsCms\" to be enabled to work';\r\n  }\r\n}","/* \r\n  This is the base class for the Manage object on 2sxc instances.\r\n  It's typed here, so that API code is strongly typed, but it's incomplete.\r\n*/\r\n\r\n/** @internal */\r\nexport interface SxcManage {\r\n  /**\r\n   * The context contains information about the Sxc Instance, like module-id, etc.\r\n   */\r\n  context: any;\r\n\r\n  /**\r\n   * This checks / reports whether the API is in edit mode.\r\n   * Used to enabled/disable various features\r\n   */\r\n  _isEditMode(): boolean;\r\n}\r\n","import { Sxc } from '..';\r\n\r\n/**\r\n * Base class for anything attached to an sxc-instance.\r\n * This is internal and not important, but we can't keep it out of the docs. \r\n * @public\r\n */\r\nexport abstract class SxcPart {\r\n  /**\r\n  * Creates an instance of SxcData.\r\n  * @param sxc: sxc\r\n  * @param partName: name of the part\r\n  * @internal\r\n  */\r\n  constructor(\r\n    /** @internal */\r\n    public sxc: Sxc, \r\n    /** @internal */\r\n    public partName: string) {      \r\n  }\r\n\r\n}\r\n  ","import { ContextIdentifier } from '../sxc-global/context-identifier';\r\nimport { SxcWebApi } from './web-api/sxc-web-api';\r\nimport { ApiUrlRoots, HasLog, ToSxcName } from '../../../core';\r\nimport { SxcManage } from './sxc-manage';\r\nimport { SxcData } from './data/sxc-data';\r\nimport { SxcQuery } from './data/sxc-query';\r\nimport { SxcGlobal } from '..';\r\nimport { SxcCms } from './sxc-cms';\r\n\r\n/**\r\n* The typical sxc-instance object for a specific DNN module or content-block\r\n* @public\r\n*/\r\nexport class Sxc extends HasLog {\r\n  /** @internal */\r\n  private _isSxcInstance = true;\r\n\r\n\r\n  /**\r\n   * Web API calls for this instance.\r\n   * This is the pure call APIs system. \r\n   * To get data or queries, best use the data or query services.\r\n   */\r\n  webApi: SxcWebApi;\r\n\r\n  /**\r\n   * manage object which provides access to additional content-management features\r\n   * it only exists if 2sxc is in edit mode (otherwise the JS are not included for these features)\r\n   * @internal\r\n   */\r\n  manage: SxcManage = null; // initialize correctly later on\r\n\r\n  /**\r\n   * CMS operations on this sxc-instance, such as opening the edit dialog etc.\r\n   */\r\n  cms: SxcCms = new SxcCms(this);\r\n  \r\n  /** @internal */\r\n  constructor(\r\n    /** the sxc-instance ID, which is usually the DNN Module Id */\r\n    public id: number,\r\n    /**\r\n     * content-block ID, which is either the module ID, or the content-block definition entity ID\r\n     * this is an advanced concept you usually don't care about, otherwise you should research it\r\n     */\r\n    public cbid: number,\r\n    /** \r\n     * the id/key of this instance in the cache for reset\r\n     * @internal\r\n     */\r\n    public cacheKey: string,\r\n    /** \r\n     * The environment information, important for http-calls \r\n     * @internal\r\n     */\r\n    public readonly root: SxcGlobal,\r\n    /** \r\n     * Custom context information provided by the constructor - will replace auto-context detection\r\n     * @internal\r\n     */\r\n    public ctx?: ContextIdentifier,\r\n  ) {\r\n    super('SxcInstance', null, 'Generating for ' + id + ':' + cbid);\r\n    this.webApi = new SxcWebApi(this);\r\n    \r\n    // add manage property, but not within initializer, because inside the manage-initializer it may reference 2sxc again\r\n    try { // sometimes the manage can't be built, like before installing\r\n      if (root._manage) root._manage.initInstance(this);\r\n    } catch (e) {\r\n      console.error('error in 2sxc - will only log but not throw', e);\r\n    }\r\n\r\n    // ensure that data-APIs used incorrectly shows good warnings\r\n    patchDataWithWarnings(this.data);\r\n    \r\n    // this only works when manage exists (not installing) and translator exists too\r\n    if (root._translateInit && this.manage)\r\n    // ensure that we really have a manage context, otherwise we can't initialize i18n and it doesn't make sense\r\n    if (this.manage.context && this.manage.context.app && this.manage.context.app.currentLanguage)\r\n    root._translateInit(this.manage);    // init translate, not really nice, but ok for now\r\n  }\r\n\r\n  /**\r\n   * TypeGuard for TypeScript to verify this is a SxcInstance\r\n   * @param thing \r\n   * @internal\r\n   */\r\n  public static is(thing: unknown): thing is Sxc {\r\n    return (thing as Sxc)._isSxcInstance;\r\n  }\r\n\r\n  /**\r\n   * Get a data service for a specific content-type.\r\n   *\r\n   * @param contentType: name of the content type which this service will get\r\n   */\r\n  data<T = unknown>(contentType: string) : SxcData<T> {\r\n    return new SxcData<T>(this, contentType);\r\n  }\r\n  \r\n  /**\r\n   * \r\n   * @param query \r\n   */\r\n  query(query: string) : SxcQuery {\r\n    return new SxcQuery(this, query);\r\n  }\r\n    \r\n    \r\n  /**\r\n  * converts a short api-call path like \"/app/Blog/query/xyz\" to the DNN full path\r\n  * which varies from installation to installation like \"/desktopmodules/api/2sxc/app/...\"\r\n  * @deprecated use http.apiUrl instead\r\n  * @param virtualPath\r\n  * @returns mapped path\r\n  * @internal\r\n  */\r\n  resolveServiceUrl(virtualPath: string) {\r\n    const scope = virtualPath.split('/')[0].toLowerCase();\r\n    \r\n    // stop if it's not one of our special paths\r\n    if (ApiUrlRoots.indexOf(scope) === -1)\r\n    return virtualPath;\r\n    \r\n    return this.root.http.apiRoot(ToSxcName) + scope + '/' + virtualPath.substring(virtualPath.indexOf('/') + 1);\r\n  }\r\n    \r\n    \r\n  /**\r\n   * Show a nice error with more infos around 2sxc\r\n   * @param result \r\n   * @returns \r\n   * @internal\r\n   */\r\n  showDetailedHttpError(result: any): any {\r\n    if (window.console)\r\n    console.log(result);\r\n    \r\n    // check if the error was just because a language file couldn't be loaded - then don't show a message\r\n    if (result.status === 404 &&\r\n      result.config &&\r\n      result.config.url &&\r\n      result.config.url.indexOf('/dist/i18n/') > -1) {\r\n        if (window.console)\r\n        console.log('just fyi: failed to load language resource; will have to use default');\r\n        return result;\r\n    }\r\n      \r\n    // if it's an unspecified 0-error, it's probably not an error but a cancelled request,\r\n    // (happens when closing popups containing angularJS)\r\n    if (result.status === 0 || result.status === -1)\r\n    return result;\r\n    \r\n    // let's try to show good messages in most cases\r\n    let infoText = 'Had an error talking to the server (status ' + result.status + ').';\r\n    const srvResp = result.responseText\r\n    ? JSON.parse(result.responseText) // for jquery ajax errors\r\n    : result.data; // for angular $http\r\n    if (srvResp) {\r\n      const msg = srvResp.Message;\r\n      if (msg) infoText += '\\nMessage: ' + msg;\r\n      const msgDet = srvResp.MessageDetail || srvResp.ExceptionMessage;\r\n      if (msgDet) infoText += '\\nDetail: ' + msgDet;\r\n      \r\n      \r\n      if (msgDet && msgDet.indexOf('No action was found') === 0)\r\n      if (msgDet.indexOf('that matches the name') > 0)\r\n      infoText += '\\n\\nTip from 2sxc: you probably got the action-name wrong in your JS.';\r\n      else if (msgDet.indexOf('that matches the request.') > 0)\r\n      infoText += '\\n\\nTip from 2sxc: Seems like the parameters are the wrong amount or type.';\r\n      \r\n      if (msg && msg.indexOf('Controller') === 0 && msg.indexOf('not found') > 0)\r\n      infoText +=\r\n      // tslint:disable-next-line:max-line-length\r\n      \"\\n\\nTip from 2sxc: you probably spelled the controller name wrong or forgot to remove the word 'controller' from the call in JS. To call a controller called 'DemoController' only use 'Demo'.\";\r\n      \r\n    }\r\n    // tslint:disable-next-line:max-line-length\r\n    infoText += '\\n\\nif you are an advanced user you can learn more about what went wrong - discover how on 2sxc.org/help?tag=debug';\r\n    alert(infoText);\r\n    \r\n    return result;\r\n  }\r\n    \r\n  /**\r\n   * Test if the current code is in edit-mode and additional javascripts have been loaded to make it work\r\n   * @returns true if we are in edit-mode\r\n   */\r\n  isEditMode(): boolean {\r\n    return this.manage?._isEditMode() === true;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param resetCache \r\n   * @returns \r\n   * @internal\r\n   */\r\n  recreate(resetCache: boolean): Sxc {\r\n    if (resetCache) delete this.root._controllers[this.cacheKey]; // clear cache\r\n    return this.root(this.id, this.cbid) as any as Sxc; // generate new\r\n  }\r\n}\r\n\r\n// Help cach error on call of old code\r\n// Background: From v3 to v12 data had a unusualy system for retrieving data belonging to the module\r\n// We believe it's almost never used, but the TimelineJs App always used it, and we believe\r\n// 2-3 other examples may have as well. \r\n// Now in v13 sxc.data is used to get any kind of data,\r\n// and we want to make sure that old code will show a warning helping people fix this\r\n// All the old code would have started with sxc.data.on('load', ...) so this is where we give them the error\r\n// We only do this if it hasn't been done already\r\nfunction patchDataWithWarnings(data: any) {\r\n  if (!(data as any).on) {\r\n    (data as any).on = () => { throw warning };\r\n    Object.defineProperty(data, 'sourceUrl', {\r\n        get: function() { throw warning }\r\n    });\r\n  }\r\n}\r\n\r\nconst warning = 'Warning Obsolete Feature on 2sxc JS: the .data has been obsolete for a long time and is repurposed. \\n'\r\n+ 'If you are calling \".data.on(...)\" or \".data.sourceUrl\" you are running very old code. \\n' \r\n+ 'Guidance to fix this: https://r.2sxc.org/brc-13-id.';","import { Sxc, SxcWebApi } from '..';\r\nimport { NoJQ } from '../../../../core';\r\nimport { ZzzAjaxSettingsDeprecated } from './ajax-settings';\r\n\r\n/** @internal */\r\nexport class AjaxPromise {\r\n  constructor(private api: SxcWebApi, private sxc: Sxc) {\r\n  }\r\n\r\n  /**\r\n   * Make a jQuery style promise request\r\n   * @param settings: settings\r\n   * @returns JQueryPromise<any>\r\n   */\r\n  public makePromise(settings: ZzzAjaxSettingsDeprecated): any {\r\n    var headers = this.api.headers();\r\n    // debugger;\r\n    if (window.$ == null) {\r\n      throw new Error('JQuery is now removed from 2sxc installation. Please use newer api like fetch or include JQuery in your project');\r\n    }\r\n    const promise = window.$.ajax({\r\n      async: true,\r\n      dataType: (settings as any).dataType || 'json', // default is json if not specified\r\n      data: JSON.stringify((settings as any).data),\r\n      contentType: 'application/json',\r\n      type: (settings as any).method,\r\n      url: this.getActionUrl(settings),\r\n      beforeSend(xhr: any) {\r\n        for (var key in headers)\r\n          if (headers.hasOwnProperty(key))\r\n            xhr.setRequestHeader(key, headers[key]);\r\n      },\r\n    }) as any;\r\n\r\n    if (!settings.preventAutoFail)\r\n      promise.fail(this.sxc.showDetailedHttpError);\r\n\r\n    return promise;\r\n  }\r\n\r\n\r\n  /**\r\n   * Generate the correct WebApi url\r\n   * @param settings the settings as they would be in jQuery\r\n   */\r\n  private getActionUrl(settings: ZzzAjaxSettingsDeprecated): string {\r\n    var url = (settings as any).url || 'app/auto/api/' + settings.controller + '/' + settings.action;\r\n    // 2020-03-13 stop adding 2sxc endpoint-name, it's already happening in apiUrl so with this it happens 2x\r\n    // var endpoint = settings.endpoint || ToSxcName;\r\n    var base = this.sxc.root.http.apiUrl(url, settings.endpoint);\r\n\r\n    return base + (!settings.params ? '' : ('?' + NoJQ.param(settings.params)));\r\n  }\r\n}\r\n","/**\r\n * Deprecated parameters for old jQuery AJAX calls.\r\n * Shouldn't be used any more. \r\n * @public\r\n * @deprecated\r\n */\r\nexport interface ZzzAjaxSettingsDeprecated {\r\n    /**\r\n     * Override the endpoint, which is usually '2sxc'\r\n     * @internal\r\n     */\r\n    endpoint?: string;\r\n\r\n    /**\r\n     * Controller name, for controller/action calls\r\n     */\r\n    controller?: string;\r\n\r\n    /**\r\n     * action name, for controller/action calls\r\n     */\r\n    action?: string;\r\n\r\n    /** \r\n     * The params to be used in the url for the request \r\n     */\r\n    params?: any;\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    preventAutoFail?: boolean;\r\n}\r\n","import { ZzzAjaxSettingsDeprecated } from './ajax-settings';\r\n\r\n/**\r\n * **Deprecated**\r\n * Old APIs on sxc.webApi. \r\n * They only exist if jQuery is included on the page, and we highly discourage their use. \r\n * @deprecated\r\n */\r\nexport interface ZzzSxcWebApiDeprecated {\r\n\r\n    /**\r\n     * **Deprecated** \r\n     * Please use [fetchJson()](xref:Api.Js.SxcJs.SxcWebApi.fetchJson) \r\n     * or [fetchJson()](xref:Api.Js.SxcJs.SxcWebApi.fetchRaw) instead.\r\n     * \r\n     * Returns an http-get promise using jQuery\r\n     * @param settingsOrUrl the url to get\r\n     * @param params jQuery style ajax parameters\r\n     * @param data jQuery style data for post/put requests\r\n     * @param preventAutoFail\r\n     * @returns jQuery ajax promise object\r\n     * @deprecated use fetchJson instead\r\n     */\r\n    get(settingsOrUrl: string | ZzzAjaxSettingsDeprecated, params?: any, data?: any, preventAutoFail?: boolean): any;\r\n\r\n    /**\r\n     * **Deprecated** \r\n     * Please use [fetchJson()](xref:Api.Js.SxcJs.SxcWebApi.fetchJson) \r\n     * or [fetchJson()](xref:Api.Js.SxcJs.SxcWebApi.fetchRaw) instead.\r\n     * \r\n     * Returns an http-post promise using jQuery\r\n     * @param settingsOrUrl the url to get\r\n     * @param params jQuery style ajax parameters\r\n     * @param data jQuery style data for post/put requests\r\n     * @param preventAutoFail\r\n     * @returns jQuery ajax promise object\r\n     * @deprecated use fetchJson instead\r\n     */\r\n    post(settingsOrUrl: string | ZzzAjaxSettingsDeprecated, params?: any, data?: any, preventAutoFail?: boolean): any;\r\n\r\n    /**\r\n     * **Deprecated** \r\n     * Please use [fetchJson()](xref:Api.Js.SxcJs.SxcWebApi.fetchJson) \r\n     * or [fetchJson()](xref:Api.Js.SxcJs.SxcWebApi.fetchRaw) instead.\r\n     * \r\n     * Returns an http-delete promise using jQuery\r\n     * @param settingsOrUrl the url to talk to\r\n     * @param params jQuery style ajax parameters\r\n     * @param data jQuery style data for post/put requests\r\n     * @param preventAutoFail\r\n     * @returns jQuery ajax promise object\r\n     * @deprecated use fetchJson instead\r\n     */\r\n    delete(settingsOrUrl: string | ZzzAjaxSettingsDeprecated, params?: any, data?: any, preventAutoFail?: boolean): any;\r\n\r\n    /**\r\n     * **Deprecated** \r\n     * Please use [fetchJson()](xref:Api.Js.SxcJs.SxcWebApi.fetchJson) \r\n     * or [fetchJson()](xref:Api.Js.SxcJs.SxcWebApi.fetchRaw) instead.\r\n     * \r\n     * Returns an http-put promise using jQuery\r\n     * @param settingsOrUrl the url to put\r\n     * @param params jQuery style ajax parameters\r\n     * @param data jQuery style data for post/put requests\r\n     * @param preventAutoFail\r\n     * @returns jQuery ajax promise object\r\n     * @deprecated use fetchJson instead\r\n     */\r\n    put(settingsOrUrl: string | ZzzAjaxSettingsDeprecated, params?: any, data?: any, preventAutoFail?: boolean): any;\r\n\r\n    /**\r\n     * **Deprecated** \r\n     * Please use [fetchJson()](xref:Api.Js.SxcJs.SxcWebApi.fetchJson) \r\n     * or [fetchJson()](xref:Api.Js.SxcJs.SxcWebApi.fetchRaw) instead.\r\n     * \r\n     * Generic http request using jQuery\r\n     * @param settingsOrUrl the url to get\r\n     * @param params jQuery style ajax parameters\r\n     * @param data jQuery style data for post/put requests\r\n     * @param preventAutoFail\r\n     * @param method the http verb name\r\n     * @returns jQuery ajax promise object\r\n     * @deprecated use fetchJson instead\r\n     */\r\n    request(settings: string | ZzzAjaxSettingsDeprecated, params: any, data: any, preventAutoFail: boolean, method: string): any;\r\n\r\n}\r\n","import { Sxc } from '../sxc';\r\nimport { AjaxPromise } from './ajax-promise';\r\nimport { SxcGlobalEnvironment } from '../../environment';\r\nimport { ZzzAjaxSettingsDeprecated } from './ajax-settings';\r\nimport { NoJQ } from '../../../../core';\r\nimport { ZzzSxcWebApiDeprecated } from './sxc-web-api-deprecated';\r\n\r\n/**\r\n * helper API to run ajax / REST calls to the server\r\n * it will ensure that the headers etc. are set correctly\r\n * and that urls are rewritten\r\n * @public\r\n */\r\nexport class SxcWebApi implements ZzzSxcWebApiDeprecated {\r\n    /**\r\n     * @internal\r\n     */\r\n    public readonly env: SxcGlobalEnvironment;\r\n\r\n    /**\r\n     * \r\n     * @param sxc \r\n     * @internal\r\n     */\r\n    constructor(private readonly sxc: Sxc) {\r\n        this.env = sxc.root.env;\r\n    }\r\n\r\n    /**\r\n     * **Deprecated** - docs in the separate interface\r\n     * @deprecated use fetchJson instead\r\n     */\r\n    get(settingsOrUrl: string | ZzzAjaxSettingsDeprecated, params?: any, data?: any, preventAutoFail?: boolean): any {\r\n        return this.request(settingsOrUrl, params, data, preventAutoFail, 'GET');\r\n    }\r\n\r\n    /**\r\n     * **Deprecated** - docs in the separate interface\r\n     * @deprecated use fetchJson instead\r\n     */\r\n    post(settingsOrUrl: string | ZzzAjaxSettingsDeprecated, params?: any, data?: any, preventAutoFail?: boolean): any {\r\n        return this.request(settingsOrUrl, params, data, preventAutoFail, 'POST');\r\n    }\r\n\r\n    /**\r\n     * **Deprecated** - docs in the separate interface\r\n     * @deprecated use fetchJson instead\r\n     */\r\n    delete(settingsOrUrl: string | ZzzAjaxSettingsDeprecated, params?: any, data?: any, preventAutoFail?: boolean): any {\r\n        return this.request(settingsOrUrl, params, data, preventAutoFail, 'DELETE');\r\n    }\r\n\r\n    /**\r\n     * **Deprecated** - docs in the separate interface\r\n     * @deprecated use fetchJson instead\r\n     */\r\n     put(settingsOrUrl: string | ZzzAjaxSettingsDeprecated, params?: any, data?: any, preventAutoFail?: boolean): any {\r\n        return this.request(settingsOrUrl, params, data, preventAutoFail, 'PUT');\r\n    }\r\n\r\n    /**\r\n     * **Deprecated** - docs in the separate interface\r\n     * @deprecated use fetchJson instead\r\n     */\r\n     request(settings: string | ZzzAjaxSettingsDeprecated, params: any, data: any, preventAutoFail: boolean, method: string): any {\r\n\r\n        // url parameter: auto convert a single value (instead of object of values) to an id=... parameter\r\n        // tslint:disable-next-line:curly\r\n        if (typeof params !== 'object' && typeof params !== 'undefined')\r\n            params = { id: params };\r\n\r\n        // if the first parameter is a string, resolve settings\r\n        if (typeof settings === 'string') {\r\n            const controllerAction = settings.split('/');\r\n            const controllerName = controllerAction[0];\r\n            const actionName = controllerAction[1];\r\n\r\n            if (controllerName === '' || actionName === '')\r\n                console.warn('Error: controller or action not defined. Will continue with likely errors.');\r\n\r\n            settings = {\r\n                controller: controllerName,\r\n                action: actionName,\r\n                params,\r\n                data,\r\n                url: controllerAction.length > 2 ? settings : null,\r\n                preventAutoFail,\r\n            } as any;\r\n        }\r\n\r\n        const defaults = {\r\n            method: method === null ? 'POST' : method,\r\n            params: null as any,\r\n            preventAutoFail: false,\r\n        };\r\n        // new 10.25\r\n        var http = new AjaxPromise(this, this.sxc);\r\n\r\n        settings = Object.assign({}, defaults, settings);\r\n\r\n        const promise = http.makePromise(settings as ZzzAjaxSettingsDeprecated);\r\n\r\n        return promise;\r\n    }\r\n\r\n    /**\r\n     * Will retrieve data from the backend using a standard fetch. \r\n     * @param url a full url or short-hand like `controller/method?params` `app/auto/api/controller/method?params`. Note that params would also be specified on the url. \r\n     * @param data optional POST data\r\n     * @param method optional method, defaults to `GET` unless it has data, in which case it defaults to `POST`\r\n     * @returns a Promise containing a Response object, just like a normal fetch would. \r\n     * example: webApi.fetchRaw('Rss/Feed');\r\n     * example: webApi.fetchRaw(webApi.url('Rss/Feed', { id: 47 })); // url params\r\n     * example: webApi.fetchRaw('Rss/Feed', { id: 47 }); // post params\r\n     * example: webApi.fetchRaw(webApi.url('Rss/Feed', { id: 47 }), { something: 'this is a test' }); // url & post params\r\n     * maybe: webApi.fetchRaw({url: 'Rss/Feed', params: { id: 47 }})\r\n     * maybe: webApi.fetchRaw({url: ..., params: { ...}, body: { ...}, method: 'GET' })\r\n     */\r\n    fetchRaw(url: string, data?: string | Record<string, any>, method?: string): Promise<Response> {\r\n        const ctxParams = {} as { appId?: number; zoneId?: number; };\r\n        const ctx = this.sxc.ctx;\r\n        const urlLower = url.toLocaleLowerCase();\r\n        // TODO: THE #_ignoreHeaders is only used in edit-ui, and should be changed to somehow say use-in-URL\r\n        if (ctx?._ignoreHeaders && urlLower.includes('app/auto/')) {\r\n            if (ctx?.appId && !urlLower.includes('appid=')) ctxParams.appId = ctx.appId;\r\n            if (ctx?.zoneId && !urlLower.includes('zoneId=')) ctxParams.zoneId = ctx.zoneId;\r\n        }\r\n        url = this.url(url, ctxParams);\r\n        method = method || (data ? 'POST' : 'GET');\r\n        const headers = this.headers(method);\r\n\r\n        if (data) {\r\n            // test if data is a json. If it's not, convert it to json\r\n            try {\r\n                JSON.parse(data as string);\r\n            } catch {\r\n                data = JSON.stringify(data);\r\n            }\r\n        }\r\n\r\n        return fetch(url, {\r\n            headers,\r\n            method,\r\n            ...(data && { body: data as string }),\r\n        });\r\n    }\r\n\r\n    // Note: fetch was documented in v12.10 (December 2021) but will probably never be used externally\r\n    // So we rename it to fetchRaw and later will make fetch just be the json implementation.\r\n    // Renamed and added this warning in 13.04 (2022-03-14), will drop in v14 and probably make it do fetchJson by default\r\n    // Changed functionality in 13.10 (2022-05-04) to make it do fetchJson by default\r\n    // Changed functionality back in 13.11 (2022-05-10) because it seems that Mobius was published using fetch\r\n    // Important: Do not document in the docs, as it shouldn't be used\r\n    /** @internal */\r\n    fetch(url: string, data?: string | Record<string, any>, method?: string): Promise<Response> {\r\n        console.warn(`You are calling 'fetch' on the sxc.webApi. This is deprecated will stop in 2sxc v15, please use fetchRaw(...) or fetchJson(...) instead.`)\r\n        return this.fetchJson(url, data, method);\r\n    }\r\n\r\n    /**\r\n     * Will retrieve data from the backend using a standard fetch and give you an object. \r\n     * @param url a full url or short-hand like `controller/method?params` `app/auto/api/controller/method?params`. Note that params would also be specified on the url. \r\n     * @param data optional POST data\r\n     * @param method optional method, defaults to `GET` unless it has data, in which case it defaults to `POST`\r\n     * @returns a Promise containing any object.\r\n     */\r\n    fetchJson<T = any>(url: string, data?: string | Record<string, any>, method?: string): Promise<T> {\r\n        return this.fetchRaw(url, data, method).then(response => response.json());\r\n    }\r\n\r\n    /**\r\n     * All the headers which are needed in an ajax call for this to work reliably.\r\n     * Use this if you need to get a list of headers in another system\r\n     */\r\n    headers(method?: string): Record<string, string> {\r\n        const headers = this.sxc.root.http.headers(this.sxc.id, this.sxc.cbid, this.sxc.ctx);\r\n        if (!method) {\r\n            return headers;\r\n        }\r\n\r\n        switch (method.toLocaleUpperCase()) {\r\n            case 'GET':\r\n                headers['Accept'] = 'application/json';\r\n                break;\r\n            default:\r\n                headers['Accept'] = 'application/json';\r\n                headers['Content-Type'] = 'application/json';\r\n        }\r\n        return headers;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param url A short, medium or long url. \r\n     * Short like `controller/method`, \r\n     * medium like `app/auto/api/controller/method`\r\n     * long like `https://xyz.\r\n     * In all cases it can also have ?params etc.\r\n     * @param params Optional parameters as string or object, will be added to url-params. \r\n     * @returns In the cases of a short/medium url, \r\n     * it will auto-expand to have the full url as needed for an API call. \r\n     */\r\n    url(url: string, params?: string | Record<string, any>): string {\r\n        if (url == null) return url;\r\n\r\n        const urlAndParams = url.split('#')[0].split('?');\r\n\r\n        // url fixes\r\n        url = urlAndParams[0];\r\n        const urlParts = url.split('/');\r\n        if (urlParts.length === 2 && urlParts[0] && urlParts[1]) {\r\n            const controller = urlParts[0];\r\n            const action = urlParts[1];\r\n            url = `app/auto/api/${controller}/${action}`;\r\n        }\r\n        url = this.sxc.root.http.apiUrl(url);\r\n\r\n        // params fixes\r\n        params = `${urlAndParams[1] || ''}&${params ? typeof params === 'string' ? params : NoJQ.param(params) : ''}`\r\n            .split('&')\r\n            .filter(p => !!p)\r\n            .join('&');\r\n\r\n        // result\r\n        url = [url, params].filter(p => !!p).join('?');\r\n        return url;\r\n    }\r\n}\r\n","\r\nexport * from './url-params';\r\nexport * from './total-popup';","\r\n// Test code\r\n// window.beta.toUrl({ hello: 7, name: \"daniel\", sub: { subname: \"mettler\", subage: 27, subsub: { and: \"like\"} }, final: 42, null: null}, \"test\")\r\n\r\nimport { TypeValue } from '../../../core';\r\n\r\n// $2sxc.urlParams.toObj($2sxc.urlParams.toUrl({ v1: 1, v2: 2, v3: { v31: 0, v32: { v321: \"daniel\" } }, v4: 4}));\r\n\r\nconst equals = '=';\r\nconst dot = '.';\r\nconst separator = '~';\r\nconst sepEsc = '~~';\r\nconst stringPrefix = separator;\r\nconst space = ' ';\r\nconst spaceMarker = '_';\r\nconst spaceMarkerEsc = '~_';\r\nconst restoreSep = '#'; // can never exist unencoded in the fragment\r\nconst innerStringPrefix = '¶';\r\nconst bools = ['true', 'false'];\r\nconst specialValues = bools.concat(['null']);\r\n\r\n/**\r\n * Custom converter to pass objects into a URL and back.\r\n * @internal\r\n */\r\nexport class ToolUrlObjects {\r\n\r\n\r\n  toUrl(obj: any, encode: boolean = true): string {\r\n    if (!obj) return '';\r\n    if (Array.isArray(obj)) throw new Error(\"only objects can be toUrl(), arrays don't work. Put the array in an object property.\");\r\n    var result = this\r\n      .toUrlRecursive(obj, null, 0, encode)\r\n      .filter(x => x != null && x.length > 0);\r\n    const urlParam = result.join(separator);\r\n    return urlParam ? separator + urlParam : '';\r\n  }\r\n\r\n  toObj(value: string, decode: boolean = true, debug: boolean = false): unknown {\r\n    const parts = this.back(value, decode);\r\n    if (debug) return parts;\r\n    return unflatStringsToObj(parts);\r\n  }\r\n\r\n\r\n\r\n\r\n  /**\r\n   * Converts an object to a compact notation with dots.\r\n   * Recursive, as it needs to also handle sub-objects\r\n   * @param obj\r\n   * @param key\r\n   * @param depth\r\n   * @returns\r\n   */\r\n  private toUrlRecursive(obj: any, key: string, depth: number, encode: boolean): string[] {\r\n    if (obj == null) return [];\r\n    const prefix = depth > 0 ? dot.repeat(depth) : '';\r\n    if (typeof obj !== 'object')\r\n      return [`${prefix}${key}=${encode ? customEncode(obj) : obj}`];\r\n\r\n    const subItem: string[][] = Object.keys(obj)\r\n      .map(key => this.toUrlRecursive(obj[key], key, depth + 1, encode));\r\n    if (subItem.length === 0) return [];\r\n\r\n    var all = subItem.reduce(function (acc, val) {\r\n      return acc.concat(Array.isArray(val) ? arrayFlat(val, 2) : val);\r\n    }, []);\r\n\r\n    // Add header entry so the object structure is complete\r\n    const header = depth > 0 ? [`${prefix}${key}`, null] : [];\r\n    return header.concat(all);\r\n  }\r\n\r\n  public back(val: string, decode: boolean): Record<string, any> {\r\n    if (!val || val.length === 0) return [];\r\n\r\n    const parts = val\r\n      .replaceAll(equals + stringPrefix, equals + innerStringPrefix) // prot. string prefix\r\n      .replaceAll(sepEsc, restoreSep)                  // Protect escaped separators\r\n      .split(separator + dot)\r\n      .map(v => v?.replaceAll(restoreSep, separator))  // Restore escaped separators\r\n      .filter(x => x.length > 0);\r\n\r\n    let result: Record<string, TypeValue> = {};\r\n    let stack: string[] = [];\r\n\r\n    for (let i = 0; i < parts.length; i++) {\r\n      const pair = parts[i].split(equals);\r\n      const key = pair[0];\r\n\r\n      // count leading dots\r\n      const dotCount = key.match(/^\\.*/g)[0].length;\r\n\r\n      // Reset stack?\r\n      if (dotCount === 0) {\r\n        stack = key.split(dot); // could have multiple components\r\n      } else {\r\n        if (dotCount > stack.length)\r\n          throw new Error(`Invalid key: ${key} when current stack is ${stack.join(dot)}`);\r\n        const subKey = key.substring(dotCount);\r\n        stack = stack.slice(0, dotCount);\r\n        stack.push(subKey);\r\n        pair[0] = stack.join(dot);\r\n      }\r\n      result[pair[0]] = pair.length > 1\r\n        ? (decode ? restoreValue(decodeURIComponent(pair[1])) : pair[1])\r\n        : null;\r\n    }\r\n    return result;\r\n  }\r\n\r\n}\r\n\r\n\r\n// Recursively reduce sub-arrays to the specified depth\r\nfunction arrayFlat(arr: any[], depth: number): any[] {\r\n\r\n  // If depth is 0, return the array as-is\r\n  if (depth < 1) return arr.slice();\r\n\r\n  // Otherwise, concatenate into the parent array\r\n  return arr.reduce(function (acc, val) {\r\n    return acc.concat(Array.isArray(val) ? arrayFlat(val, depth - 1) : val);\r\n  }, []);\r\n};\r\n\r\n// https://stackoverflow.com/questions/42694980/how-to-unflatten-a-javascript-object-in-a-daisy-chain-dot-notation-into-an-objec\r\nfunction unflatStringsToObj(data: Record<string, any>): any {\r\n  var result: any = {};\r\n  for (var rec in data) {\r\n    var keys = rec.split(dot);\r\n    keys.reduce(function(list, key, j) {\r\n      return list[key] || (list[key] = isNaN(Number(keys[j + 1])) ? (keys.length - 1 == j ? data[rec] : {}) : [])\r\n    }, result)\r\n  }\r\n  return result\r\n}\r\n\r\n\r\n\r\n// https://stackoverflow.com/questions/175739/how-can-i-check-if-a-string-is-a-valid-number\r\nexport function isNumeric(str: string) {\r\n  if (typeof str != \"string\") return false // we only process strings!\r\n  return !isNaN(str as any) && // use type coercion to parse the _entirety_ of the string (`parseFloat` alone does not do this)...\r\n         !isNaN(parseFloat(str)) // ...and ensure strings of whitespace fail\r\n}\r\n\r\n\r\n/**\r\n * Mark strings which contain values that look like a bool/number\r\n */\r\nfunction customEncode(value: any) {\r\n  var mark = false;\r\n  // Not a string (a bool/number) - leave as is\r\n  if (typeof value === 'string') { // return value;\r\n\r\n    // Escape strings which look like booleans or numbers\r\n    if (specialValues.includes(value) || isNumeric(value as any))\r\n      mark = true;\r\n      // return `${innerStringPrefix}${value}`;\r\n\r\n    // Mark any characters which look like the encoding chars\r\n    value = value\r\n      .replaceAll(separator, sepEsc)\r\n      .replaceAll(spaceMarker, spaceMarkerEsc)\r\n      .replaceAll(' ', spaceMarker);\r\n  }\r\n  const enc = encodeURIComponent(value);\r\n  // marc after encoding\r\n  return (mark ? stringPrefix : '') + enc;\r\n}\r\n\r\n/**\r\n * Restore a value to the real type.\r\n * Explicitly marked strings will not be re-typed\r\n */\r\nfunction restoreValue(value: string) {\r\n  // if explicitly marked string, unwrap and return string\r\n  if (value?.length > 0 && value[0] === innerStringPrefix)\r\n    return restoreString(value.slice(1));\r\n  if (bools.includes(value))\r\n    return value === 'true';\r\n  if (isNumeric(value)) return parseFloat(value);\r\n  return restoreString(value);\r\n}\r\n\r\nfunction restoreString(value: string) {\r\n  const spaceMarkerTemp = String.fromCharCode(1);\r\n  return value\r\n    .replaceAll(spaceMarkerEsc, spaceMarkerTemp)\r\n    .replaceAll(spaceMarker, space)\r\n    .replaceAll(spaceMarkerTemp, spaceMarker);\r\n}\r\n","/** @internal */\r\nexport class TotalPopup {\r\n    frame: any = undefined;\r\n    callback: any = undefined;\r\n\r\n    open(url: string, callback: () => void): void {\r\n        // count parents to see how high the z-index needs to be\r\n        let z = 10000010; // Needs at least 10000000 to be on top of the DNN9 bar\r\n        let p = window as Window;\r\n        while (p !== window.top && z < 10000100) {\r\n            z++;\r\n            p = p.parent;\r\n        }\r\n\r\n        const wrapper = document.createElement('div');\r\n        wrapper.setAttribute('style', ' top: 0;left: 0;width: 100%;height: 100%; position:fixed; z-index:' + z);\r\n        document.body.appendChild(wrapper);\r\n\r\n        const ifrm = document.createElement('iframe');\r\n        ifrm.setAttribute('allowtransparency', 'true');\r\n        ifrm.setAttribute('style', 'top: 0;left: 0;width: 100%;height: 100%;');\r\n        ifrm.setAttribute('src', url);\r\n        wrapper.appendChild(ifrm);\r\n        document.body.className += ' sxc-popup-open';\r\n        this.frame = ifrm;\r\n        this.callback = callback;\r\n    }\r\n\r\n    close(): void {\r\n        if (this.frame) {\r\n            document.body.className = document.body.className.replace('sxc-popup-open', '');\r\n            const frm = this.frame;\r\n            frm.parentNode.parentNode.removeChild(frm.parentNode);\r\n            this.callback();\r\n        }\r\n    }\r\n\r\n    closeThis(): void {\r\n        (window.parent as any).$2sxc.totalPopup.close();\r\n    }\r\n\r\n}\r\n","import { ToolUrlObjects } from './obj2url';\r\n/**\r\n * Helper object to read url params. \r\n * Available on `$2sxc.urlParams`\r\n * @public\r\n */\r\nexport class UrlParams {\r\n    /**\r\n     * Get a param from the url, no matter if it's behind ? or #\r\n     * If not found, will return an empty string `''`\r\n     * @param name\r\n     */\r\n    get(name: string) {\r\n        // warning: this method is duplicated in 2 places - keep them in sync.\r\n        // locations are eav and 2sxc4ng\r\n        name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\r\n        const searchRx = new RegExp('[\\\\?&]' + name + '=([^&#]*)', 'i');\r\n        let results = searchRx.exec(location.search);\r\n        let strResult: string;\r\n\r\n        if (results === null) {\r\n            const hashRx = new RegExp('[#&]' + name + '=([^&#]*)', 'i');\r\n            results = hashRx.exec(location.hash);\r\n        }\r\n\r\n        // if nothing found, try normal URL because DNN places parameters in /key/value notation\r\n        if (results === null) {\r\n            // Otherwise try parts of the URL\r\n            const matches = location.pathname.match(new RegExp('/' + name + '/([^/]+)', 'i'));\r\n\r\n            // Check if we found anything, if we do find it, we must reverse the\r\n            // results so we get the \"last\" one in case there are multiple hits\r\n            if (matches && matches.length > 1)\r\n                strResult = matches.reverse()[0];\r\n        } else\r\n            strResult = results[1];\r\n\r\n        return strResult == null\r\n            ? ''\r\n            : decodeURIComponent(strResult.replace(/\\+/g, ' '));\r\n    }\r\n\r\n    /**\r\n     * Get a required param from the url, no matter if it's behind ? or #\r\n     * Will throw an error if not found\r\n     * @param name\r\n     */\r\n    require(name: string) {\r\n        const found = this.get(name);\r\n        if (found === '') {\r\n            const message = `Required parameter (${name}) missing from url - cannot continue`;\r\n            alert(message);\r\n            throw message;\r\n        }\r\n        return found;\r\n    }\r\n\r\n    /**\r\n     * Checks if debug is enabled in the URL\r\n     * @returns \r\n     */\r\n    isDebug(): boolean {\r\n        return this.get('debug')?.toLocaleLowerCase() === 'true'\r\n    }\r\n\r\n    /**\r\n     * Convert an object to be used in a URL.\r\n     * Uses a custom, brief syntax which can change at any time. \r\n     * So to unwrap, always use the toObj method.\r\n     * @param obj \r\n     * @returns \r\n     * @internal\r\n     */\r\n    toUrl(obj: any): string {\r\n      return new ToolUrlObjects().toUrl(obj, true);\r\n    }\r\n\r\n    /**\r\n     * Convert a url which was created by toUrl back to an object.\r\n     * @param url \r\n     * @returns\r\n     * @internal\r\n     */\r\n    toObj(url: string): unknown {\r\n      return new ToolUrlObjects().toObj(url, true);\r\n    }\r\n}\r\n","/**\r\n * Special version which is filled in during compile by the definePlugin\r\n * The real version comes from the main package.json file in this repo\r\n * The sub-projects also use this version\r\n */\r\ndeclare const ROOTVERSION: string;\r\n\r\n/** @internal */\r\nexport const ToSxcName = \"2sxc\";\r\n\r\n/** @internal */\r\nexport const SxcVersion = ROOTVERSION;\r\n\r\n/** @internal */\r\nexport const SxcApiUrlRoot = 'desktopmodules/2sxc/api/';\r\n\r\n/** @internal */\r\nexport const HeaderNames = {\r\n    // 2sxc specific header\r\n    ContentBlockId: \"ContentBlockId\",\r\n\r\n    // headers as defined by DNN\r\n    ModuleId: \"ModuleId\",\r\n    TabId: \"TabId\",\r\n\r\n    // Header which should replace \"TabId\" in the long run\r\n    PageId: \"PageId\",\r\n};\r\n\r\n/** @internal */\r\nexport const ApiUrlRoots = ['app', 'app-sys', 'app-api', 'app-query', 'app-content', 'eav', 'view', 'dnn'];\r\n/** @internal */\r\nexport const AppApiMarker = 'app';\r\n\r\n// TODO: this should later lead to remapping of old url calls, but it's not in use yet\r\n// note that these were always 'auto' so `app-content` would need to be come `app/auto/content`\r\n/** @internal */\r\nexport const AppApiMap = {\r\n    'app-api': 'app/[name]/api',\r\n    'app-query': 'app/[name]/query',\r\n    'app-content': 'app/[name]/content'\r\n};\r\n\r\n// These are Not-Defined-IDs.\r\n// Because\r\n\r\n/**\r\n * This is a marker for an ID which is not defined\r\n * This is for situations where a 0 or even a negative number\r\n * could be real numbers, so this number is so big, it should never be a real ID\r\n * @internal\r\n */\r\nexport const NumberNotDefinedHuge = 274200000000;\r\n","\r\nexport * from './constants';\r\nexport * from './logging';\r\nexport * from './plumbing';\r\n","import { LogEntry, LogCall } from '.';\r\n\r\nconst keepData = location.search.indexOf(\"debug=true\") !== -1;\r\n\r\nconst maxScopeLen = 3;\r\nconst maxNameLen = 6;\r\nconst liveDump = false;\r\nconst maxEntriesReached = 'Maximum amount of entries added to log, will stop adding more';\r\n\r\n/**\r\n * A log object which will collect log entries for another ojbect\r\n * @export\r\n * @interface Log\r\n * @public\r\n */\r\nexport class Log {\r\n\r\n    /**\r\n     * List of all entries added to this log\r\n     */\r\n    entries = new Array<LogEntry>();\r\n    /** @internal */\r\n    private depth = 0;\r\n    /** @internal */\r\n    private callDepths: string[] = [];\r\n    /** @internal */\r\n    startTime: number;\r\n\r\n    /**\r\n     * Maximum amount of entries to add - to prevent memory hoging\r\n     */\r\n    maxEntries = 1000;\r\n\r\n    /**\r\n     * Create a logger and optionally attach it to a parent logger\r\n     * @param string name this logger should use\r\n     * @param Log optional parrent logger to attach to\r\n     * @param string optional initial message to log\r\n     * @internal\r\n     */\r\n    constructor(name: string, parent?: Log, initialMessage?: string) {\r\n        this.rename(name);\r\n        this.linkLog(parent);\r\n        this.startTime = new Date().getTime();\r\n        if (initialMessage != null) this.add(initialMessage);\r\n    }\r\n\r\n    /* if we should live-dump, can be selectively activated */\r\n    /** @internal */\r\n    liveDump: boolean = liveDump;\r\n    /** @internal */\r\n    _parentHasLiveDump: boolean = false;\r\n    /** @internal */\r\n    keepData: boolean = keepData;\r\n    /** @internal */\r\n    _parentHasKeepData: boolean = false;\r\n\r\n    /**\r\n     * Full identifier of this log-object, with full hierarchy\r\n     * @internal\r\n     */\r\n    fullIdentifier = (): string =>\r\n        `${(this.parent ? this.parent.fullIdentifier() : '')}${this.identifier()}`\r\n\r\n    /**\r\n     * give this logger a new name\r\n     * usually happens in constructor, but in rare cases\r\n     * it's called manually\r\n     * @param name\r\n     * @internal\r\n     */\r\n    rename(name: string): void {\r\n        try {\r\n            const dot = name.indexOf('.');\r\n            this.scope = dot > 0 ? name.substr(0, Math.min(dot, maxScopeLen)) + '.' : '';\r\n            const rest = dot > 0 ? name.substr(dot + 1) : name;\r\n            this.name = rest.substr(0, Math.min(rest.length, maxNameLen));\r\n            this.name = this.name.substr(0, Math.min(this.name.length, maxNameLen));\r\n        } catch (e) {\r\n            /* ignore */\r\n        }\r\n    }\r\n\r\n    /**\r\n     * link this log to a parent\r\n     * usually happens in constructor, but in rare cases\r\n     * this must be called manually\r\n     * @internal\r\n     */\r\n    linkLog = (parent: Log): void => {\r\n        this.parent = parent || this.parent; // if new parent isn't defined, don't replace\r\n        if (this.parent) {\r\n            this._parentHasLiveDump = this.parent.liveDump || this.parent._parentHasLiveDump;\r\n            this._parentHasKeepData = this.parent.keepData || this.parent._parentHasKeepData;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add a simple message to the log\r\n     * @param message\r\n     *\r\n     * preferred usage is with string parameter:\r\n     * log.add(`description ${ parameter }`);\r\n     *\r\n     * in case that we experience error with normal string parameter, we can use arrow function to enclose parameter like this () => parameter\r\n     * but use it very rarely, because there is certainly a performance implication!\r\n     * log.add(`description ${() => parameter}`);\r\n     */\r\n    add(message: (() => string) | string, data?: unknown): string {\r\n        // check if the log is already too big\r\n        if(this.entries.length > this.maxEntries) \r\n            return this._prepareMessage(message);\r\n\r\n        // if we just reached the max, add special message\r\n        if(this.entries.length === this.maxEntries) \r\n            this._addEntry(this._prepareEntry(maxEntriesReached));\r\n\r\n        const entry = this._prepareEntry(message, data);\r\n        this._addEntry(entry);\r\n        return entry.message;\r\n    }\r\n\r\n    /** @internal */\r\n    addData(message: (() => string) | string, data: unknown): void {\r\n        if (this.logData()) this.add(message, data);\r\n    }\r\n\r\n    /** @internal */\r\n    logData(): boolean {\r\n        return this.keepData || this._parentHasKeepData;\r\n    }\r\n\r\n    /** @internal */\r\n    _prepareEntry(message: (() => string) | string, data?: unknown): LogEntry {\r\n        const msg = this._prepareMessage(message);\r\n        const time = new Date().getTime() - this.startTime;\r\n        const entry = new LogEntry(this, msg, this.depth, time, data);\r\n        return entry;\r\n    }\r\n\r\n    /** @internal */\r\n    private _prepareMessage(message: (() => string) | string): string {\r\n        if (message instanceof Function) {\r\n            try {\r\n                return ((message as () => string)());\r\n            } catch (e) {\r\n                return 'err: message undefined';\r\n            }\r\n        }\r\n        return message.toString();\r\n    }\r\n\r\n    /** @internal */\r\n    call(name: string, callParams?: string, message?: string, data?: {[key:string]: unknown }): LogCall {\r\n        return new LogCall(this, name, callParams, message, data);\r\n    }\r\n\r\n    /** @internal */\r\n    _callDepthAdd(name: string): void {\r\n        this.depth++;\r\n        this.callDepths.push(name);\r\n    }\r\n\r\n    /** @internal */\r\n    _callDepthRemove(name: string): void {\r\n        this.depth--;\r\n        const last = this.callDepths.pop();\r\n        if (last !== name) {\r\n            console.warn(`log: call depth reduced by '${name}' but last was '${last}'`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * helper to create a text-output of the log info\r\n     * @param separator\r\n     * @param start\r\n     * @param end\r\n     * @internal\r\n     */\r\n    dump(one: LogEntry = null, separator = ' - '): void {\r\n        if (one) this.dumpOne(0, one, separator);\r\n        else this.dumpList();\r\n    }\r\n\r\n    /** @internal */\r\n    dumpList(start: number = 0, length?: number) {\r\n        let index = start;\r\n        this.entries\r\n            .slice(start, length ? start + length : undefined           )\r\n            .forEach((e) => this.dumpOne(index++, e));\r\n    }\r\n\r\n    /** @internal */\r\n    private dumpOne(index: number, e: LogEntry, separator = ' - '): void {\r\n        const result = (e.result) ? ' =' + e.result : '';\r\n        const line = ('0000' + index).slice(-4) + ' ' + e.source() + separator + '..'.repeat(e.depth) + e.message + result;\r\n        if (e.data) console.log(line, e.data);\r\n        else console.log(line);\r\n    }\r\n\r\n\r\n    /**\r\n     * add an entry-object to this logger\r\n     * this is often called by sub-loggers to add to parent\r\n     * @param entry\r\n     * @internal\r\n     */\r\n    _addEntry(entry: LogEntry): void {\r\n        if (this.liveDump) this.dump(entry);\r\n        this.entries.push(entry);\r\n        if (this.parent) this.parent._addEntry(entry);\r\n    }\r\n\r\n    /**\r\n     * helper to generate a random 2-char ID\r\n     * @param stringLength\r\n     * @internal\r\n     */\r\n    private randomString(stringLength: number): string {\r\n        const chars = '0123456789abcdefghiklmnopqrstuvwxyz';\r\n        let randomstring = '';\r\n        for (let i = 0; i < stringLength; i++) {\r\n            const rnum = Math.floor(Math.random() * chars.length);\r\n            randomstring += chars.substring(rnum, rnum + 1);\r\n        }\r\n        return randomstring;\r\n    }\r\n\r\n    /**\r\n     * parent logger - important if loggers are chained\r\n     * @internal\r\n     */\r\n    private parent: Log;\r\n\r\n    /**\r\n     * scope of this logger - to easily see which ones\r\n     * are about the same topic\r\n     * @internal\r\n     */\r\n    private scope = 'tdo';\r\n\r\n    /**\r\n     * The name of this log, for scenarios where multiple loggers are mixed\r\n     */\r\n    public name = 'unknwn';\r\n\r\n\r\n    /**\r\n     * Unique 2-character ID of this specific log object\r\n     * @internal\r\n     */\r\n    private id = (): string => this.idCache || (this.idCache = this.randomString(2));\r\n    /** @internal */\r\n    private idCache: string;\r\n\r\n    /**\r\n     * Unique identifier of this log object, with name and ID\r\n     * @internal\r\n     */\r\n    private identifier = (): string => `${this.scope}${this.name}(${this.id()})`;\r\n\r\n}\r\n","import { Obj } from '../plumbing';\r\nimport { Log } from '.';\r\n\r\n/**\r\n * A log entry item\r\n * @export\r\n * @interface LogEntry\r\n * @public\r\n */\r\nexport class LogEntry {\r\n\r\n    /**\r\n     * The result of an operation - treated differently in the output\r\n     * @internal\r\n     */\r\n    public result: string;\r\n\r\n\r\n    /**\r\n     * Data which is logged - if data-logging is enabled\r\n     * @internal\r\n     */\r\n    get data(): unknown {\r\n        return this._data;\r\n    }\r\n    /** @internal */\r\n    set data(data: unknown) {\r\n        if (data === undefined) return;\r\n        if (this.log.logData())\r\n            this._data = Obj.DeepClone(data, true);\r\n    }\r\n    /** @internal */\r\n    private _data?: unknown;\r\n\r\n    /** @internal */\r\n    public source = (): string => this.log.fullIdentifier();\r\n\r\n    /** @internal */\r\n    constructor(\r\n        /** @internal */\r\n        private log: Log,\r\n        public message: string,\r\n        /** @internal */\r\n        public depth: number,\r\n        /** A timestamp for this entry to better see sequences of things happening */\r\n        public time: number,\r\n        data?: unknown,\r\n        ) {\r\n            if (data) {\r\n                // #2492 - jQuery isn't used any more in 2sxc\r\n                // if (data instanceof jQuery) {\r\n                //     const jq = data as JQuery;\r\n                //     this.data = {\r\n                //         isJQuery: true,\r\n                //         original: jq,\r\n                //         html: jq.length && jq[0].outerHTML,\r\n                //     };\r\n                // } \r\n                // else\r\n                    this.data = data;\r\n            }\r\n    }\r\n\r\n}\r\n","import { Log } from '.';\r\n\r\n/**\r\n * Any object that has an own log object\r\n * @export\r\n * @interface HasLog\r\n * @public\r\n */\r\nexport abstract class HasLog {\r\n  /**\r\n   * The logger for this object\r\n   * @internal usually not relevant and could make docs confusing\r\n   */\r\n  log: Log;\r\n\r\n  /**\r\n   * initialize the logger\r\n   * ideally it has a parent-logger to attach to\r\n   * @param logName name to show in the logger\r\n   * @param parentLog parent-logger to attach to\r\n   * @param initialMessage optional start-message to log\r\n   * @internal\r\n   */\r\n  constructor(\r\n    logName: string,\r\n    /** @internal */\r\n    private parentLog?: Log,\r\n    initialMessage?: string,\r\n  ) {\r\n    this.initLogInternal(logName, parentLog, initialMessage);\r\n  }\r\n\r\n  /** @internal */\r\n  public initLog = (name: string, parentLog?: Log, initialMessage?: string)\r\n    : void => this.initLogInternal(name, parentLog, initialMessage)\r\n\r\n  /** @internal */\r\n  private initLogInternal(name: string, parentLog?: Log, initialMessage?: string): void {\r\n    if (this.log == null)\r\n        // standard & most common case: just create log\r\n        this.log = new Log(name, parentLog, initialMessage);\r\n    else {\r\n    // late-init case, where the log was already created - just reconfig keeping what was in it\r\n      this.log.rename(name);\r\n      this.log.linkLog(parentLog);\r\n      if (initialMessage != null)\r\n        this.log.add(initialMessage);\r\n    }\r\n  }\r\n\r\n}\r\n","\r\nexport * from './log-entry-options';\r\nexport * from './has-log';\r\nexport * from './Log';\r\nexport * from './log-call';\r\nexport * from './entry';\r\nexport * from './insights';\r\n","import { HasLog, Log } from '.';\r\n\r\ndeclare const window: Window;\r\n\r\n/** @public */\r\ntype LogList = Array<{ key: string, log: Log}>;\r\n\r\nconst msgIntro = 'This is the $2sxc JS Insights - see https://r.2sxc.org/insights \\n'\r\n    + 'Add ?debug=true to the url to log more data. \\n'\r\n    + 'Copy/paste code lines below to see details. \\n'\r\n    + '----------------------------------------------------------------------\\n';\r\n\r\n/** @internal */\r\nclass InsightsSingleton extends HasLog {\r\n\r\n    constructor() {\r\n        super('Sys.Insght');\r\n        this.add('system', 'insights', this.log);\r\n        this.log.add(`this log is usually empty, as it's just a helper tool`)\r\n    }\r\n\r\n    history: { [key: string]: InsightsLogSet } = {};\r\n\r\n    add(setName: string, logName: string, log: Log ) {\r\n        if (!(setName in this.history))\r\n            this.history[setName] = new InsightsLogSet(setName);\r\n        this.history[setName].logs.push({key: logName, log: log});\r\n    }\r\n\r\n    show(partName: string, index?: number, start?: number, length?: number): void {\r\n        // if nothing specified, list what to do to see inner parts\r\n        if (!partName) {\r\n            const keys = Object.keys(this.history);\r\n            console.log(`${msgIntro}${keys.length} insights-sections found: \\n` + keys.map((p) => `$2sxc.insights('${p}');`).join('\\n'));\r\n            return;\r\n        }\r\n\r\n        // partName found, check if it exists\r\n        const part = this.history[partName];\r\n        if (!part) {\r\n            console.error(`part '${partName}' not found`);\r\n            return;\r\n        }\r\n\r\n        // We have a partName, but no index - show list and how to get details\r\n        if (index === undefined) {\r\n            let count = 0;\r\n            const logNames = part.logs\r\n                .map((s) => `$2sxc.insights('${partName}', ${count++}); - will show for '${s.key}'`)\r\n                .join('\\n');\r\n            console.log(`'${partName}' contains ${part.logs.length} entries. Copy/paste the code to to see the logs: \\n` + logNames);\r\n            return;\r\n        }\r\n\r\n        // verify the entry exists\r\n        const logSet = part.logs.length >= index && part.logs[index];\r\n        if (!logSet) {\r\n            console.error(`index ${index} not found in part '${partName}'`);\r\n            return;\r\n        }\r\n\r\n        if (!logSet.log) {\r\n            console.error(`found index ${index} on part '${partName}' but it has no logs`);\r\n            return;\r\n        }\r\n\r\n        console.log(`Will dump the log for ${partName}[${index}] '${logSet.key}'`);\r\n        let autoLimit = false;\r\n        if (start === undefined) {\r\n            autoLimit = true;\r\n            start = 0;\r\n            length = 25;\r\n        }\r\n        logSet.log.dumpList(start || 0, length);\r\n        if (autoLimit && logSet.log.entries.length > length)\r\n            console.warn(`Only showing ${length} of ${logSet.log.entries.length} logs. To show all, add start param '..., 0)' or start/length '..., 0, 100)'`)\r\n}\r\n}\r\n\r\n// tslint:disable-next-line: max-classes-per-file\r\nclass InsightsLogSet {\r\n    logs: LogList = [];\r\n    constructor(public name: string) {}\r\n}\r\n\r\n// ensure it's only created once\r\n// this is important, because the inpage code also uses this class\r\n// and would otherwise create the object separately\r\nconst singleton: InsightsSingleton = \r\n    window.$2sxc && window.$2sxc._insights   // try to load existing\r\n    || new InsightsSingleton();             // otherwise create new\r\n\r\n/** @internal */\r\nexport const Insights = singleton;\r\n","import { LogEntry, Log, LogEntryOptions as LEO } from '.';\r\n\r\n/** @internal */\r\nexport class LogCall {\r\n    /** The initial entry created - important for later attaching the final result of the call */\r\n    public initialEntry: LogEntry;\r\n\r\n    constructor(public log: Log, public name: string, callParams?: string, message?: string, data?: {[key:string]: unknown }) {\r\n        this.initialEntry = this.log._prepareEntry(name + '(' + (callParams || '') + ')');\r\n        this.log._callDepthAdd(name);\r\n        this.log._addEntry(this.initialEntry);\r\n        if (typeof message === 'string') this.add(message);\r\n        if (data) for (let key in data) this.data('initial:' + key, data[key]);\r\n    }\r\n\r\n    private lastMessage: string;\r\n\r\n    add(message: string, data?: unknown, behavior?: LEO) {\r\n        this.lastMessage = message;\r\n        this.log.add(message, data);\r\n        if (behavior) this.processExtraBehavior(behavior, message, data);\r\n    }\r\n\r\n    onlyAddIfNew(message: string, behavior?: LEO) {\r\n        if (this.lastMessage !== message)\r\n        this.add(message);\r\n        if (behavior) this.processExtraBehavior(behavior, message, undefined);\r\n    }\r\n\r\n    /** Add data - but only if data logging is enabled */\r\n    data(message: string, data: unknown) {\r\n        this.log.addData(message, data);\r\n    }\r\n\r\n    done(message?: string, behavior?: LEO): void {\r\n        this.return(null, message || '👍', behavior);\r\n    }\r\n\r\n    return<T>(result: T, message?: string, behavior?: LEO) {\r\n        message = message || '👍';\r\n        this.initialEntry.result = message;\r\n        this.log._callDepthRemove(this.name);\r\n\r\n        // if we're in keep-data / debug mode, keep that\r\n        this.initialEntry.data = result;\r\n\r\n        // if we're in live-dump mode, then the entry was already dumped, show again\r\n        if (this.log.liveDump || this.log._parentHasLiveDump)\r\n            this.add(this.name + ' = ' + message, result);\r\n\r\n        if (behavior) this.processExtraBehavior<T>(behavior, message, result);\r\n        return result;\r\n    }\r\n\r\n    /* \r\n     * treat all extra output or errors\r\n     * to allow setting a debug stop point when needed\r\n     * then you can trace the stack-call to see where the error originated\r\n     */\r\n    private processExtraBehavior<T>(behavior: LEO, message: string, data: T) {\r\n        if (behavior === LEO.log) console.log(message, data);\r\n        if (behavior === LEO.warn) console.warn(message, data);\r\n        if (behavior === LEO.error || behavior === LEO.throw) console.error(message, data);\r\n        if (behavior === LEO.throw) throw message;\r\n    }\r\n}\r\n","/** @internal */\r\nexport enum LogEntryOptions {\r\n    log = 'log',\r\n    warn = 'warn',\r\n    error = 'error',\r\n    throw = 'throw',\r\n}\r\n","//\r\n// Plumbing contains some object manipulation helpers and similarly\r\n// re-used bits of code\r\n//\r\n\r\nexport * from './obj';\r\nexport * from './type-value';\r\nexport * from './url';\r\nexport * from './no-jquery';\r\n","/** @internal */\r\nexport class NoJQ {\r\n\r\n    /** https://api.jquery.com/ready/ */\r\n    static ready(callback: () => void): void {\r\n        if (document.readyState === 'complete') {\r\n            callback();\r\n        } else {\r\n            document.addEventListener('DOMContentLoaded', () => callback(), { once: true });\r\n        }\r\n    }\r\n\r\n    /** https://api.jquery.com/jquery.param/ */\r\n    static param(obj: any): string {\r\n        const param = Object.entries(obj)\r\n            .map(([k, v]) => `${encodeURIComponent(k)}=${v == null ? '' : typeof v === 'string' ? encodeURIComponent(v) : encodeURIComponent(JSON.stringify(v))}`)\r\n            .join('&');\r\n        return param;\r\n    }\r\n\r\n    /** Build DOM elements from string */\r\n    static domFromString(string: string): HTMLElement[] {\r\n        // build elements from string into dummy parent\r\n        const dummyParent = document.createElement('div');\r\n        dummyParent.insertAdjacentHTML('afterbegin', string);\r\n\r\n        // scripts created from string are not executable and have to recreated manually to be executable\r\n        Array.from(dummyParent.querySelectorAll('script')).forEach((brokenScript) => {\r\n            const workingScript = document.createElement('script');\r\n            // copy attributes\r\n            Array.from(brokenScript.attributes).forEach((attribute) => {\r\n                workingScript.setAttribute(attribute.nodeName, attribute.nodeValue);\r\n            });\r\n            // copy inline part\r\n            workingScript.textContent = brokenScript.textContent;\r\n            // replace a non executable script with executable one\r\n            NoJQ.replaceWith(brokenScript, workingScript, false);\r\n        });\r\n\r\n        // remove created elements from dummy parent so it can be garbage collected\r\n        const elements = Array.from(dummyParent.children) as HTMLElement[];\r\n        elements.forEach((element) => {\r\n            dummyParent.removeChild(element);\r\n        });\r\n        return elements;\r\n    }\r\n\r\n    /** https://api.jquery.com/offset/ */\r\n    static offset(element: HTMLElement): { left: number; top: number; } {\r\n        const clientRect = element.getBoundingClientRect();\r\n        const offset: { left: number; top: number; } = {\r\n            top: clientRect.top + window.scrollY,\r\n            left: clientRect.left + window.scrollX,\r\n        };\r\n        return offset;\r\n    }\r\n\r\n    /** https://api.jquery.com/width/ */\r\n    static width(element: HTMLElement): number {\r\n        // jquery width === offsetWidth - borders - padding\r\n        const computedStyle = getComputedStyle(element);\r\n        const width = element.offsetWidth === 0\r\n            ? 0\r\n            : element.offsetWidth\r\n            - (parseInt(computedStyle.getPropertyValue('border-left-width'), 10) + parseInt(computedStyle.getPropertyValue('border-right-width'), 10))\r\n            - (parseInt(computedStyle.getPropertyValue('padding-left'), 10) + parseInt(computedStyle.getPropertyValue('padding-right'), 10));\r\n        return width;\r\n    }\r\n\r\n    /** https://api.jquery.com/height/ */\r\n    static height(element: HTMLElement): number {\r\n        // jquery height === offsetHeight - borders - padding\r\n        const computedStyle = getComputedStyle(element);\r\n        const height = element.offsetHeight === 0\r\n            ? 0\r\n            : element.offsetHeight\r\n            - (parseInt(computedStyle.getPropertyValue('border-top-width'), 10) + parseInt(computedStyle.getPropertyValue('border-bottom-width'), 10))\r\n            - (parseInt(computedStyle.getPropertyValue('padding-top'), 10) + parseInt(computedStyle.getPropertyValue('padding-bottom'), 10));\r\n        return height;\r\n    }\r\n\r\n    /** https://api.jquery.com/outerWidth/ */\r\n    static outerWidth(element: HTMLElement): number {\r\n        const outerWidth = element.offsetWidth;\r\n        return outerWidth;\r\n    }\r\n\r\n    /** https://api.jquery.com/empty/ */\r\n    static empty(element: HTMLElement): void {\r\n        Array.from(element.childNodes).forEach((n) => {\r\n            element.removeChild(n);\r\n        });\r\n    }\r\n\r\n    /** https://api.jquery.com/replacewith/ */\r\n    static replaceWith(toBeReplaced: HTMLElement, newElement: HTMLElement, runScripts: boolean): void {\r\n        const parent = toBeReplaced.parentElement;\r\n\r\n        // disable scripts before replacing dom\r\n        const scripts = Array.from(newElement.querySelectorAll('script'));\r\n        const restores: ScriptTypeRestore[] = [];\r\n        scripts.forEach((script) => {\r\n            restores.push({ script, type: script.type });\r\n            script.type = null;\r\n        });\r\n\r\n        // replace dom\r\n        parent.replaceChild(newElement, toBeReplaced);\r\n\r\n        // enable scripts\r\n        restores.forEach((restore) => {\r\n            restore.script.type = restore.type;\r\n        });\r\n\r\n        if (runScripts) {\r\n            // run scripts manually to ensure proper timing\r\n            AssetsLoader.runScripts(scripts, undefined);\r\n        }\r\n    }\r\n\r\n    /** https://api.jquery.com/append/ */\r\n    static append(parent: HTMLElement, newElements: HTMLElement[], runScripts: boolean): void {\r\n        const scripts: HTMLScriptElement[] = [];\r\n\r\n        newElements.forEach((element) => {\r\n            if (element.tagName.toLocaleLowerCase() === 'script') {\r\n                const script = element as HTMLScriptElement;\r\n                // disable script before inserting to the dom\r\n                const restoreType = script.type;\r\n                script.type = null;\r\n                // insert to dom\r\n                parent.appendChild(script);\r\n                // enable script\r\n                script.type = restoreType;\r\n                scripts.push(script);\r\n            } else {\r\n                parent.appendChild(element);\r\n            }\r\n        });\r\n\r\n        if (runScripts && scripts.length > 0) {\r\n            // run scripts manually to ensure proper timing\r\n            AssetsLoader.runScripts(scripts, undefined);\r\n        }\r\n    }\r\n}\r\n\r\n/** @internal */\r\nexport class AssetsLoader {\r\n\r\n    /** Asynchronously runs external and inline scripts in series */\r\n    static runScripts(scripts: HTMLScriptElement[], callback: () => void): void {\r\n        const script = scripts[0];\r\n        const others = scripts.slice(1);\r\n        if (script == null) {\r\n            callback?.();\r\n            return;\r\n        }\r\n\r\n        // create copy\r\n        const copy = document.createElement('script');\r\n        // attributes\r\n        Array.from(script.attributes).forEach((attribute) => {\r\n            copy.setAttribute(attribute.nodeName, attribute.nodeValue);\r\n        });\r\n        // inline part\r\n        copy.textContent = script.textContent;\r\n\r\n        // if src then insert in head, wait for onload or onerror, remove from head and move to next one\r\n        if (copy.type && copy.src) {\r\n            const listener = () => {\r\n                copy.onload = null;\r\n                copy.onerror = null;\r\n                document.head.removeChild(copy);\r\n                this.runScripts(others, callback);\r\n            };\r\n            copy.onload = listener;\r\n            copy.onerror = listener;\r\n            document.head.appendChild(copy);\r\n            return;\r\n        }\r\n\r\n        // if no src then inline, insert to head and remove instantly and move to next one\r\n        setTimeout(() => {\r\n            document.head.appendChild(copy);\r\n            document.head.removeChild(copy);\r\n            this.runScripts(others, callback);\r\n        });\r\n    }\r\n}\r\n\r\ninterface ScriptTypeRestore {\r\n    script: HTMLScriptElement;\r\n    type: string;\r\n}\r\n","\r\n/**\r\n * Object manipulator helpers\r\n * @internal\r\n */\r\nexport class Obj {\r\n    /**\r\n     * This is the same as Object.assign, but type-safe.\r\n     * Use it as a replacetment for Object.Assign(this, ... ) in constructors\r\n     */\r\n    static TypeSafeAssign <T, K extends keyof T>(...args: T[]) {\r\n        args.reduce( (result, current) =>\r\n            (Object.keys(current) as K[]).reduce((target, key) => {\r\n                target[key] = current[key];\r\n                return target;\r\n            }, result)\r\n        , args[0]);\r\n    }\r\n\r\n    static DeepClone<T>(original: T, ignoreCircular = false): T {\r\n        if(original === undefined || original === null)\r\n            return original;\r\n        const str = ignoreCircular ? JSON.stringify(original, getCircularReplacer) : JSON.stringify(original);\r\n        if(str === undefined || str === null)\r\n            return original;\r\n        return JSON.parse(str) as T;\r\n    }\r\n}\r\n\r\n\r\nconst getCircularReplacer = () => {\r\n    const seen = new WeakSet();\r\n    return (_:any, value: any) => {\r\n      if (typeof value === \"object\" && value !== null) {\r\n        if (seen.has(value)) {\r\n          return;\r\n        }\r\n        seen.add(value);\r\n      }\r\n      return value;\r\n    };\r\n  };\r\n","\r\n/*\r\n *  An overall type to ensure that something can be a value but not an object\r\n *  @internal\r\n */\r\nexport type TypeValue = boolean | string | number | Date;\r\n","\r\n/** @internal */\r\nexport function urlClean(original: string): string {\r\n  return original.replace(/(\\/+)/g, '/');\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// this is the 2sxc-javascript API\r\n// 2sxc will include this automatically when a user has edit-rights\r\n// a template developer will typically use this to use the data-api to read 2sxc-data from the server\r\n// read more about this in the wiki: https://github.com/2sic/2sxc/wiki/JavaScript-%242sxc\r\n\r\nimport { buildSxcRoot } from './sxc-global/sxc-global-bootstrap';\r\n\r\nif (!window.$2sxc) // prevent double execution\r\n  window.$2sxc = buildSxcRoot();\r\n"],"names":[],"sourceRoot":""}